{"version":3,"file":"index.esm.js","sources":["../src/components/DebugIcon.ts","../src/components/ProfileSettingsModal.ts","../src/utils/userProfileStorage.ts","../src/components/SettingsButton.ts","../src/components/SidebarButton.ts","../src/types/index.ts","../src/utils/roleColors.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/components/CommentSidebar.ts","../src/utils/dom.ts","../src/utils/base64Upload.ts","../src/components/ImageModal.ts","../src/components/CommentModal.ts","../src/components/CommentBubble.ts","../src/components/CommentForm.ts","../src/utils/mobile.ts","../src/utils/performance.ts","../src/utils/xpath.ts","../src/core/CommentManager.ts","../src/core/CommentSDK.ts","../src/storage/CommentStorage.ts","../src/storage/HybridCommentStorage.ts","../src/utils/hybridStorageUtils.ts","../src/utils/localStorageUtils.ts","../src/index.ts"],"sourcesContent":["import { DebugIconProps } from \"../types\";\n\nexport class DebugIcon {\n  private element: HTMLElement;\n  private props: DebugIconProps;\n\n  constructor(props: DebugIconProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const icon = document.createElement(\"div\");\n    icon.className = \"uicm-debug-icon\";\n    icon.setAttribute(\"data-uicm-element\", \"true\");\n    icon.style.position = \"fixed\";\n    icon.style.right = \"20px\";\n    icon.style.top = \"20px\";\n    icon.style.width = \"40px\";\n    icon.style.height = \"40px\";\n    icon.style.borderRadius = \"50%\";\n    icon.style.backgroundColor = this.props.isActive\n      ? \"rgba(255, 0, 0, 0.8)\"\n      : \"rgba(0, 0, 0, 0.5)\";\n    icon.style.display = \"flex\";\n    icon.style.alignItems = \"center\";\n    icon.style.justifyContent = \"center\";\n    icon.style.cursor = \"pointer\";\n    icon.style.transition = \"all 0.3s ease\";\n    icon.style.zIndex = \"999999\";\n    icon.style.boxShadow = \"0 2px 8px rgba(0, 0, 0, 0.2)\";\n\n    // Add hover effect\n    icon.addEventListener(\"mouseenter\", () => {\n      icon.style.transform = \"scale(1.1)\";\n      icon.style.backgroundColor = this.props.isActive\n        ? \"rgba(255, 0, 0, 1)\"\n        : \"rgba(0, 0, 0, 0.8)\";\n    });\n\n    icon.addEventListener(\"mouseleave\", () => {\n      icon.style.transform = \"scale(1)\";\n      icon.style.backgroundColor = this.props.isActive\n        ? \"rgba(255, 0, 0, 0.8)\"\n        : \"rgba(0, 0, 0, 0.5)\";\n    });\n\n    icon.innerHTML = this.getIconHTML();\n\n    return icon;\n  }\n\n  private getIconHTML(): string {\n    if (this.props.isActive) {\n      return `\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n        </svg>\n      `;\n    } else {\n      return `\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z\"/>\n        </svg>\n      `;\n    }\n  }\n\n  private attachEventListeners(): void {\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      this.props.onClick();\n    });\n\n    // Add tooltip functionality\n    let tooltip: HTMLElement | null = null;\n\n    this.element.addEventListener(\"mouseenter\", () => {\n      tooltip = this.createTooltip();\n      document.body.appendChild(tooltip);\n    });\n\n    this.element.addEventListener(\"mouseleave\", () => {\n      if (tooltip) {\n        tooltip.remove();\n        tooltip = null;\n      }\n    });\n  }\n\n  private createTooltip(): HTMLElement {\n    const tooltip = document.createElement(\"div\");\n    tooltip.className = \"uicm-tooltip\";\n    tooltip.textContent = this.props.isActive\n      ? \"Exit Comment Mode\"\n      : \"Enter Comment Mode\";\n    tooltip.setAttribute(\"data-uicm-element\", \"true\");\n\n    const iconRect = this.element.getBoundingClientRect();\n    tooltip.style.left = `${iconRect.right + 8}px`;\n    tooltip.style.top = `${iconRect.top + iconRect.height / 2 - 12}px`;\n\n    return tooltip;\n  }\n\n  public updateState(isActive: boolean): void {\n    this.props.isActive = isActive;\n    this.element.className = `uicm-debug-icon uicm-glass uicm-glass-hover ${\n      isActive ? \"uicm-active\" : \"\"\n    }`;\n    this.element.innerHTML = this.getIconHTML();\n  }\n\n  public updateTheme(theme: \"light\" | \"dark\"): void {\n    this.props.theme = theme;\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public destroy(): void {\n    // Remove any existing tooltips\n    const tooltips = document.querySelectorAll(\".uicm-tooltip\");\n    tooltips.forEach((tooltip) => tooltip.remove());\n\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }\n}\n","import { User } from \"../types\";\n\nexport interface ProfileSettingsModalProps {\n  currentUser: User;\n  onSave: (user: User) => Promise<void>;\n  onClose: () => void;\n}\n\nexport class ProfileSettingsModal {\n  private element: HTMLElement;\n  private props: ProfileSettingsModalProps;\n\n  constructor(props: ProfileSettingsModalProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const modal = document.createElement(\"div\");\n    modal.className = \"uicm-profile-modal\";\n    modal.innerHTML = `\n      <div class=\"uicm-profile-modal-overlay\"></div>\n      <div class=\"uicm-profile-modal-content\">\n        <div class=\"uicm-profile-modal-header\">\n          <h3 class=\"uicm-profile-modal-title\">Profile Settings</h3>\n          <button class=\"uicm-profile-modal-close\" type=\"button\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n        \n        <div class=\"uicm-profile-modal-body\">\n          <div class=\"uicm-profile-avatar-section\">\n            <div class=\"uicm-profile-avatar\">\n              <span class=\"uicm-profile-avatar-text\">${this.props.currentUser.name\n                .charAt(0)\n                .toUpperCase()}</span>\n            </div>\n            <div class=\"uicm-profile-avatar-info\">\n              <p class=\"uicm-profile-avatar-label\">Profile Picture</p>\n              <p class=\"uicm-profile-avatar-subtitle\">Avatar will be generated from your name</p>\n            </div>\n          </div>\n\n          <form class=\"uicm-profile-form\">\n            <div class=\"uicm-form-group\">\n              <label class=\"uicm-form-label\" for=\"profile-name\">Name</label>\n              <input \n                type=\"text\" \n                id=\"profile-name\" \n                class=\"uicm-form-input\" \n                value=\"${this.props.currentUser.name}\"\n                placeholder=\"Enter your name\"\n                maxlength=\"50\"\n              />\n              <div class=\"uicm-form-help\">This name will be displayed on your comments</div>\n            </div>\n\n            <div class=\"uicm-form-group\">\n              <label class=\"uicm-form-label\" for=\"profile-role\">Role</label>\n              <select id=\"profile-role\" class=\"uicm-form-select\">\n                <option value=\"developer\" ${\n                  this.props.currentUser.role === \"developer\" ? \"selected\" : \"\"\n                }>Developer</option>\n                <option value=\"designer\" ${\n                  this.props.currentUser.role === \"designer\" ? \"selected\" : \"\"\n                }>Designer</option>\n                <option value=\"product-manager\" ${\n                  this.props.currentUser.role === \"product-manager\"\n                    ? \"selected\"\n                    : \"\"\n                }>Product Manager</option>\n                <option value=\"qa\" ${\n                  this.props.currentUser.role === \"qa\" ? \"selected\" : \"\"\n                }>QA Tester</option>\n                <option value=\"stakeholder\" ${\n                  this.props.currentUser.role === \"stakeholder\"\n                    ? \"selected\"\n                    : \"\"\n                }>Stakeholder</option>\n                <option value=\"other\" ${\n                  this.props.currentUser.role === \"other\" ? \"selected\" : \"\"\n                }>Other</option>\n              </select>\n              <div class=\"uicm-form-help\">Your role helps others understand your perspective</div>\n            </div>\n          </form>\n        </div>\n\n        <div class=\"uicm-profile-modal-footer\">\n          <button class=\"uicm-btn uicm-btn-secondary\" type=\"button\">Cancel</button>\n          <button class=\"uicm-btn uicm-btn-primary\" type=\"button\">Save Changes</button>\n        </div>\n      </div>\n    `;\n\n    return modal;\n  }\n\n  private attachEventListeners(): void {\n    // Prevent modal from closing when clicking inside modal content\n    const modalContent = this.element.querySelector(\n      \".uicm-profile-modal-content\"\n    );\n    if (modalContent) {\n      modalContent.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n      });\n    }\n\n    // Close button\n    const closeBtn = this.element.querySelector(\".uicm-profile-modal-close\");\n    if (closeBtn) {\n      closeBtn.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        this.props.onClose();\n      });\n    }\n\n    // Cancel button\n    const cancelBtn = this.element.querySelector(\".uicm-btn-secondary\");\n    if (cancelBtn) {\n      cancelBtn.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        this.props.onClose();\n      });\n    }\n\n    // Save button\n    const saveBtn = this.element.querySelector(\".uicm-btn-primary\");\n    if (saveBtn) {\n      saveBtn.addEventListener(\"click\", async (e) => {\n        e.stopPropagation();\n        await this.handleSave();\n      });\n    }\n\n    // Close on overlay click\n    const overlay = this.element.querySelector(\".uicm-profile-modal-overlay\");\n    if (overlay) {\n      overlay.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        this.props.onClose();\n      });\n    }\n\n    // Prevent clicks inside modal from bubbling\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n    });\n\n    // Prevent other events from bubbling\n    this.element.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"mouseup\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keydown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keyup\", (e) => {\n      e.stopPropagation();\n    });\n\n    // Close on Escape key\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        this.props.onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscape);\n\n    // Clean up escape listener when modal is destroyed\n    this.element.addEventListener(\"remove\", () => {\n      document.removeEventListener(\"keydown\", handleEscape);\n    });\n\n    // Update avatar when name changes\n    const nameInput = this.element.querySelector(\n      \"#profile-name\"\n    ) as HTMLInputElement;\n    const avatarText = this.element.querySelector(\".uicm-profile-avatar-text\");\n\n    if (nameInput && avatarText) {\n      nameInput.addEventListener(\"input\", (e) => {\n        e.stopPropagation();\n        const name = nameInput.value.trim();\n        if (name) {\n          avatarText.textContent = name.charAt(0).toUpperCase();\n        } else {\n          avatarText.textContent = this.props.currentUser.name\n            .charAt(0)\n            .toUpperCase();\n        }\n      });\n    }\n  }\n\n  private async handleSave(): Promise<void> {\n    const nameInput = this.element.querySelector(\n      \"#profile-name\"\n    ) as HTMLInputElement;\n    const roleSelect = this.element.querySelector(\n      \"#profile-role\"\n    ) as HTMLSelectElement;\n    const saveBtn = this.element.querySelector(\n      \".uicm-btn-primary\"\n    ) as HTMLButtonElement;\n\n    if (!nameInput || !roleSelect || !saveBtn) return;\n\n    const name = nameInput.value.trim();\n    const role = roleSelect.value;\n\n    if (!name) {\n      // Show error\n      nameInput.classList.add(\"uicm-form-input-error\");\n      return;\n    }\n\n    // Remove error state\n    nameInput.classList.remove(\"uicm-form-input-error\");\n\n    // Disable save button\n    saveBtn.disabled = true;\n    saveBtn.textContent = \"Saving...\";\n\n    try {\n      const updatedUser: User = {\n        ...this.props.currentUser,\n        name,\n        role: role as any, // Type assertion for role\n      };\n\n      await this.props.onSave(updatedUser);\n      console.log(\"✅ Profile updated successfully\");\n      this.props.onClose();\n    } catch (error) {\n      console.error(\"Failed to update profile:\", error);\n      // Re-enable save button\n      saveBtn.disabled = false;\n      saveBtn.textContent = \"Save Changes\";\n    }\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public destroy(): void {\n    // Remove escape listener\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        this.props.onClose();\n      }\n    };\n    document.removeEventListener(\"keydown\", handleEscape);\n\n    this.element.remove();\n  }\n}\n","import { User } from \"../types\";\n\nconst USER_PROFILE_KEY = \"uicm-user-profile\";\n\nexport interface UserProfileStorage {\n  saveUserProfile(user: User): void;\n  loadUserProfile(): User | null;\n  clearUserProfile(): void;\n  updateUserProfile(updates: Partial<User>): User | null;\n}\n\nexport class LocalUserProfileStorage implements UserProfileStorage {\n  private storageKey: string;\n\n  constructor(storageKey: string = USER_PROFILE_KEY) {\n    this.storageKey = storageKey;\n  }\n\n  public saveUserProfile(user: User): void {\n    try {\n      const userData = JSON.stringify(user);\n      localStorage.setItem(this.storageKey, userData);\n      console.log(\"✅ User profile saved to localStorage:\", user);\n    } catch (error) {\n      console.error(\"Failed to save user profile to localStorage:\", error);\n    }\n  }\n\n  public loadUserProfile(): User | null {\n    try {\n      const userData = localStorage.getItem(this.storageKey);\n      if (!userData) {\n        return null;\n      }\n\n      const user = JSON.parse(userData) as User;\n      console.log(\"📂 User profile loaded from localStorage:\", user);\n      return user;\n    } catch (error) {\n      console.error(\"Failed to load user profile from localStorage:\", error);\n      return null;\n    }\n  }\n\n  public clearUserProfile(): void {\n    try {\n      localStorage.removeItem(this.storageKey);\n      console.log(\"🗑️ User profile cleared from localStorage\");\n    } catch (error) {\n      console.error(\"Failed to clear user profile from localStorage:\", error);\n    }\n  }\n\n  public updateUserProfile(updates: Partial<User>): User | null {\n    try {\n      const currentUser = this.loadUserProfile();\n      if (!currentUser) {\n        return null;\n      }\n\n      const updatedUser: User = {\n        ...currentUser,\n        ...updates,\n      };\n\n      this.saveUserProfile(updatedUser);\n      console.log(\"🔄 User profile updated in localStorage:\", updatedUser);\n      return updatedUser;\n    } catch (error) {\n      console.error(\"Failed to update user profile in localStorage:\", error);\n      return null;\n    }\n  }\n}\n\n// Default instance\nexport const userProfileStorage = new LocalUserProfileStorage();\n","import { User } from \"../types\";\nimport { ProfileSettingsModal } from \"./ProfileSettingsModal\";\nimport { userProfileStorage } from \"../utils/userProfileStorage\";\n\nexport interface SettingsButtonProps {\n  currentUser: User;\n  onUserUpdate: (user: User) => Promise<void>;\n  isVisible?: boolean;\n}\n\nexport class SettingsButton {\n  private element: HTMLElement;\n  private props: SettingsButtonProps;\n  private profileModal: ProfileSettingsModal | null = null;\n\n  constructor(props: SettingsButtonProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const button = document.createElement(\"button\");\n    button.className = \"uicm-settings-button\";\n    button.type = \"button\";\n    button.title = \"Profile Settings\";\n    button.style.display = this.props.isVisible === true ? \"flex\" : \"none\";\n    if (this.props.isVisible !== true) {\n      button.style.opacity = \"0\";\n      button.style.transform = \"scale(0.8) translateY(20px)\";\n    }\n\n    // Use a simple gear icon with CSS\n    button.innerHTML = `\n      <div class=\"uicm-settings-icon\">\n        <div class=\"uicm-gear-icon\">⚙</div>\n      </div>\n    `;\n\n    return button;\n  }\n\n  private attachEventListeners(): void {\n    this.element.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.openProfileSettings();\n    });\n  }\n\n  private openProfileSettings(): void {\n    // Close existing modal if any\n    if (this.profileModal) {\n      this.profileModal.destroy();\n      this.profileModal = null;\n    }\n\n    // Create and show profile settings modal\n    this.profileModal = new ProfileSettingsModal({\n      currentUser: this.props.currentUser,\n      onSave: async (updatedUser: User) => {\n        // Save to localStorage first\n        userProfileStorage.saveUserProfile(updatedUser);\n\n        // Then update in SDK\n        await this.props.onUserUpdate(updatedUser);\n\n        // Update current user in props\n        this.props.currentUser = updatedUser;\n\n        console.log(\"✅ Profile saved to localStorage and updated in SDK\");\n      },\n      onClose: () => {\n        if (this.profileModal) {\n          this.profileModal.destroy();\n          this.profileModal = null;\n        }\n      },\n    });\n\n    // Add modal to body\n    document.body.appendChild(this.profileModal.getElement());\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public setVisible(visible: boolean): void {\n    if (visible) {\n      this.element.style.display = \"flex\";\n      // Trigger animation by removing and re-adding the element\n      setTimeout(() => {\n        this.element.style.opacity = \"1\";\n        this.element.style.transform = \"scale(1) translateY(0)\";\n      }, 10);\n    } else {\n      this.element.style.opacity = \"0\";\n      this.element.style.transform = \"scale(0.8) translateY(20px)\";\n      setTimeout(() => {\n        this.element.style.display = \"none\";\n      }, 300); // Match transition duration\n    }\n  }\n\n  public destroy(): void {\n    if (this.profileModal) {\n      this.profileModal.destroy();\n      this.profileModal = null;\n    }\n    this.element.remove();\n  }\n}\n","import { User } from \"../types\";\n\nexport interface SidebarButtonProps {\n  currentUser: User;\n  onClick: () => void;\n  isVisible?: boolean;\n}\n\nexport class SidebarButton {\n  private element: HTMLElement;\n  private props: SidebarButtonProps;\n\n  constructor(props: SidebarButtonProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const button = document.createElement(\"button\");\n    button.className = \"uicm-sidebar-button\";\n    button.type = \"button\";\n    button.title = \"View All Comments\";\n    button.style.display = this.props.isVisible === true ? \"flex\" : \"none\";\n    if (this.props.isVisible !== true) {\n      button.style.opacity = \"0\";\n      button.style.transform = \"scale(0.8) translateY(20px)\";\n    }\n\n    // Use a list icon\n    button.innerHTML = `\n      <div class=\"uicm-sidebar-icon\">\n        <div class=\"uicm-list-icon\">📋</div>\n      </div>\n    `;\n\n    return button;\n  }\n\n  private attachEventListeners(): void {\n    this.element.addEventListener(\"click\", (e) => {\n      console.log(\"🔧 SidebarButton: Clicked!\");\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.onClick();\n    });\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public setVisible(visible: boolean): void {\n    if (visible) {\n      this.element.style.display = \"flex\";\n      // Trigger animation by removing and re-adding the element\n      setTimeout(() => {\n        this.element.style.opacity = \"1\";\n        this.element.style.transform = \"scale(1) translateY(0)\";\n      }, 10);\n    } else {\n      this.element.style.opacity = \"0\";\n      this.element.style.transform = \"scale(0.8) translateY(20px)\";\n      setTimeout(() => {\n        this.element.style.display = \"none\";\n      }, 300); // Match transition duration\n    }\n  }\n\n  public destroy(): void {\n    this.element.remove();\n  }\n}\n","export interface User {\n  id: string;\n  name: string;\n  avatar?: string;\n  role?:\n    | \"developer\"\n    | \"designer\"\n    | \"product-manager\"\n    | \"qa\"\n    | \"stakeholder\"\n    | \"other\";\n}\n\nexport enum CommentStatus {\n  BUG = \"bug\", // Màu đỏ - comment mới tạo\n  DEV_COMPLETED = \"dev_completed\", // Màu vàng - dev đã fix\n  DONE = \"done\", // Màu xanh - tester đã review\n  ARCHIVED = \"archived\", // Màu xám - đã archive\n}\n\nexport interface CommentAttachment {\n  id: string;\n  filename: string;\n  url: string;\n  type: \"image\" | \"file\";\n  size: number;\n  uploadedAt: string;\n}\n\nexport interface Comment {\n  id: string;\n  content: string;\n  xpath: string;\n  url: string;\n  position: { x: number; y: number };\n  relativePosition: { x: number; y: number };\n  createdAt: string;\n  createdBy: User;\n  role: string; // Role of the comment creator\n  replies: Comment[];\n  status: CommentStatus;\n  resolvedAt?: string; // Timestamp khi status changed to DONE\n  archivedAt?: string; // Timestamp khi archived\n  attachments?: CommentAttachment[]; // File/image attachments\n}\n\nexport type CommentMode = \"normal\" | \"comment\";\n\nexport interface CommentSDKConfig {\n  projectId: string;\n  currentUser: User;\n  theme?: \"light\" | \"dark\";\n  autoInject?: boolean;\n  debugMode?: boolean;\n  onLoadComments: () => Promise<Comment[]>;\n  onSaveComment: (\n    comment: Omit<Comment, \"id\" | \"createdAt\">\n  ) => Promise<Comment>;\n  onUpdateComment?: (comment: Comment) => Promise<Comment>;\n  onDeleteComment?: (commentId: string) => Promise<void>;\n}\n\nexport interface CommentBubbleProps {\n  comment: Comment;\n  position: { x: number; y: number };\n  isActive?: boolean;\n  onClick?: (comment: Comment) => void;\n  currentUser: User;\n  onReply?: (content: string) => void;\n  onResolve?: () => void;\n  onDelete?: () => void;\n}\n\nexport interface CommentFormProps {\n  position: { x: number; y: number };\n  element: Element;\n  onSubmit: (content: string) => void;\n  onCancel: () => void;\n  currentUser: User;\n}\n\nexport interface DebugIconProps {\n  isActive: boolean;\n  onClick: () => void;\n  theme: \"light\" | \"dark\";\n}\n\nexport interface CommentPopupProps {\n  comment: Comment;\n  position: { x: number; y: number };\n  onClose: () => void;\n  onReply?: (content: string) => void;\n  onResolve?: () => void;\n  onDelete?: () => void;\n  currentUser: User;\n}\n\nexport interface ElementHighlight {\n  element: Element;\n  bounds: DOMRect;\n}\n\nexport interface SDKEvents {\n  \"mode-changed\": { mode: CommentMode };\n  \"comment-created\": { comment: Comment };\n  \"comment-updated\": { comment: Comment };\n  \"comment-deleted\": { commentId: string };\n}\n\nexport type EventCallback<T extends keyof SDKEvents> = (\n  event: SDKEvents[T]\n) => void;\n","export interface RoleColor {\n  bg: string;\n  text: string;\n  border: string;\n}\n\nexport const ROLE_COLORS: Record<string, RoleColor> = {\n  developer: {\n    bg: \"#dbeafe\",\n    text: \"#1e40af\",\n    border: \"#3b82f6\",\n  },\n  designer: {\n    bg: \"#fef3c7\",\n    text: \"#92400e\",\n    border: \"#f59e0b\",\n  },\n  \"product-manager\": {\n    bg: \"#dcfce7\",\n    text: \"#166534\",\n    border: \"#22c55e\",\n  },\n  qa: {\n    bg: \"#fce7f3\",\n    text: \"#be185d\",\n    border: \"#ec4899\",\n  },\n  stakeholder: {\n    bg: \"#e0e7ff\",\n    text: \"#3730a3\",\n    border: \"#6366f1\",\n  },\n  other: {\n    bg: \"#f3f4f6\",\n    text: \"#374151\",\n    border: \"#6b7280\",\n  },\n};\n\nexport function getRoleColor(role: string): RoleColor {\n  return ROLE_COLORS[role] || ROLE_COLORS.other;\n}\n\nexport function getRoleDisplayName(role: string): string {\n  const displayNames: Record<string, string> = {\n    developer: \"Developer\",\n    designer: \"Designer\",\n    \"product-manager\": \"Product Manager\",\n    qa: \"QA\",\n    stakeholder: \"Stakeholder\",\n    other: \"Other\",\n  };\n\n  return displayNames[role] || \"Other\";\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { Comment, CommentStatus, User } from \"../types\";\nimport { getRoleColor, getRoleDisplayName } from \"../utils/roleColors\";\nimport \"../styles/comment-sidebar.css\";\n\nexport interface CommentSidebarProps {\n  comments: Comment[];\n  currentUser: User;\n  onNavigateToComment: (comment: Comment) => void;\n  onClose: () => void;\n  onStatusChange: (commentId: string, status: CommentStatus) => Promise<void>;\n}\n\ntype SidebarTab = \"active\" | \"archive\";\n\nexport class CommentSidebar {\n  private element: HTMLElement;\n  private props: CommentSidebarProps;\n  private isVisible: boolean = false;\n  private currentTab: SidebarTab = \"active\";\n  private commentsList: HTMLElement | null = null;\n  private statsContent: HTMLElement | null = null;\n\n  constructor(props: CommentSidebarProps) {\n    console.log(\n      \"🔧 CommentSidebar: Constructor called with\",\n      props.comments.length,\n      \"comments\"\n    );\n    this.props = props;\n    this.element = this.createElement();\n    console.log(\"🔧 CommentSidebar: Element created:\", this.element);\n    this.attachEventListeners();\n  }\n\n  private formatTimeAgo(dateString: string): string {\n    const now = new Date();\n    const date = new Date(dateString);\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n    if (diffInSeconds < 60) return \"just now\";\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;\n    if (diffInSeconds < 86400)\n      return `${Math.floor(diffInSeconds / 3600)}h ago`;\n    if (diffInSeconds < 2592000)\n      return `${Math.floor(diffInSeconds / 86400)}d ago`;\n    return date.toLocaleDateString();\n  }\n\n  private getStatusColor(status: CommentStatus): { bg: string; text: string } {\n    switch (status) {\n      case CommentStatus.BUG:\n        return { bg: \"#dc3545\", text: \"white\" };\n      case CommentStatus.DEV_COMPLETED:\n        return { bg: \"#ffc107\", text: \"black\" };\n      case CommentStatus.DONE:\n        return { bg: \"#28a745\", text: \"white\" };\n      case CommentStatus.ARCHIVED:\n        return { bg: \"#6c757d\", text: \"white\" };\n      default:\n        return { bg: \"#007bff\", text: \"white\" };\n    }\n  }\n\n  private getPageName(url: string): string {\n    try {\n      const urlObj = new URL(url);\n      const path = urlObj.pathname;\n\n      // Extract page name from path\n      if (path === \"/\" || path === \"\") return \"Home\";\n\n      const segments = path.split(\"/\").filter(Boolean);\n      if (segments.length === 0) return \"Home\";\n\n      // Convert path to readable name\n      const pageName = segments[segments.length - 1]\n        .split(\"-\")\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(\" \");\n\n      return pageName || \"Unknown Page\";\n    } catch {\n      return \"Unknown Page\";\n    }\n  }\n\n  private getFilteredComments(): Comment[] {\n    if (this.currentTab === \"active\") {\n      return this.props.comments.filter((c) => c.status !== \"archived\");\n    } else {\n      return this.props.comments.filter((c) => c.status === \"archived\");\n    }\n  }\n\n  private switchTab(tab: SidebarTab): void {\n    this.currentTab = tab;\n    this.updateCommentsDisplay();\n    this.updateStats();\n    this.updateTabStates();\n  }\n\n  private updateCommentsDisplay(): void {\n    if (!this.commentsList) return;\n\n    this.commentsList.innerHTML = \"\";\n    const filteredComments = this.getFilteredComments();\n\n    if (filteredComments.length === 0) {\n      const emptyState = document.createElement(\"div\");\n      emptyState.className = \"uicm-sidebar-empty\";\n      const emptyText =\n        this.currentTab === \"active\"\n          ? \"No active comments yet\"\n          : \"No archived comments\";\n      const emptySubtext =\n        this.currentTab === \"active\"\n          ? \"Start commenting on any element to see them here\"\n          : \"Archived comments will appear here\";\n\n      emptyState.innerHTML = `\n        <div class=\"uicm-sidebar-empty-icon\">💬</div>\n        <div class=\"uicm-sidebar-empty-title\">${emptyText}</div>\n        <div class=\"uicm-sidebar-empty-subtitle\">${emptySubtext}</div>\n      `;\n      this.commentsList.appendChild(emptyState);\n    } else {\n      filteredComments.forEach((comment) => {\n        const commentItem = this.createCommentItem(comment);\n        this.commentsList!.appendChild(commentItem);\n      });\n    }\n  }\n\n  private updateStats(): void {\n    if (!this.statsContent) return;\n\n    const activeComments = this.props.comments.filter(\n      (c) => c.status !== \"archived\"\n    ).length;\n    const archivedComments = this.props.comments.filter(\n      (c) => c.status === \"archived\"\n    ).length;\n    const totalReplies = this.props.comments.reduce(\n      (sum, comment) => sum + comment.replies.length,\n      0\n    );\n\n    this.statsContent.innerHTML = `\n      <span>📝 ${\n        this.currentTab === \"active\" ? activeComments : archivedComments\n      } ${this.currentTab === \"active\" ? \"active\" : \"archived\"}</span>\n      <span>💬 ${totalReplies} replies</span>\n      <span>📊 ${activeComments + archivedComments} total</span>\n    `;\n  }\n\n  private createCommentItem(comment: Comment): HTMLElement {\n    const item = document.createElement(\"div\");\n    item.className = \"uicm-sidebar-comment-item\";\n\n    // Click to navigate\n    item.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      console.log(\"🔧 Sidebar: Comment item clicked:\", comment.id);\n      this.props.onNavigateToComment(comment);\n    });\n\n    // Header with avatar, name, role, and time\n    const header = document.createElement(\"div\");\n    header.className = \"uicm-sidebar-comment-header\";\n\n    // Avatar\n    const avatar = document.createElement(\"div\");\n    avatar.className = \"uicm-sidebar-comment-avatar\";\n    let avatarChar = \"?\";\n    if (\n      comment &&\n      comment.createdBy &&\n      typeof comment.createdBy.name === \"string\" &&\n      comment.createdBy.name.length > 0\n    ) {\n      avatarChar = comment.createdBy.name.charAt(0).toUpperCase();\n    } else {\n      console.warn(\"Sidebar: Comment missing createdBy or name\", comment);\n    }\n    avatar.textContent = avatarChar;\n\n    // User info container\n    const userInfo = document.createElement(\"div\");\n    userInfo.className = \"uicm-sidebar-comment-user-info\";\n\n    // Name and role row\n    const nameRow = document.createElement(\"div\");\n    nameRow.className = \"uicm-sidebar-comment-name-row\";\n\n    const name = document.createElement(\"span\");\n    name.className = \"uicm-sidebar-comment-name\";\n    name.textContent = comment.createdBy.name;\n\n    // Role badge\n    const roleBadge = document.createElement(\"span\");\n    roleBadge.className = \"uicm-sidebar-comment-role\";\n    const roleColors = getRoleColor(comment.role);\n    roleBadge.style.backgroundColor = roleColors.bg;\n    roleBadge.style.color = roleColors.text;\n    roleBadge.style.borderColor = roleColors.border;\n    roleBadge.textContent = getRoleDisplayName(comment.role);\n\n    // Time\n    const time = document.createElement(\"span\");\n    time.className = \"uicm-sidebar-comment-time\";\n    time.textContent = this.formatTimeAgo(comment.createdAt);\n\n    nameRow.appendChild(name);\n    nameRow.appendChild(roleBadge);\n    nameRow.appendChild(time);\n\n    // Page name\n    const pageName = document.createElement(\"div\");\n    pageName.className = \"uicm-sidebar-comment-page\";\n    pageName.textContent = this.getPageName(comment.url);\n\n    userInfo.appendChild(nameRow);\n    userInfo.appendChild(pageName);\n\n    header.appendChild(avatar);\n    header.appendChild(userInfo);\n\n    // Content\n    const content = document.createElement(\"div\");\n    content.className = \"uicm-sidebar-comment-content\";\n    content.textContent = comment.content;\n\n    // Footer with status and reply count\n    const footer = document.createElement(\"div\");\n    footer.className = \"uicm-sidebar-comment-footer\";\n\n    // Status badge\n    const statusBadge = document.createElement(\"span\");\n    statusBadge.className = \"uicm-sidebar-comment-status\";\n    const statusColors = this.getStatusColor(comment.status);\n    statusBadge.style.backgroundColor = statusColors.bg;\n    statusBadge.style.color = statusColors.text;\n    statusBadge.textContent = comment?.status?.toUpperCase();\n\n    // Reply count\n    const replyCount = document.createElement(\"span\");\n    replyCount.className = \"uicm-sidebar-comment-replies\";\n    const replyIcon = document.createElement(\"span\");\n    replyIcon.className = \"uicm-sidebar-comment-replies-icon\";\n    replyIcon.textContent = \"💬\";\n    replyCount.appendChild(replyIcon);\n    replyCount.appendChild(\n      document.createTextNode(`${comment.replies.length}`)\n    );\n\n    footer.appendChild(statusBadge);\n    footer.appendChild(replyCount);\n\n    item.appendChild(header);\n    item.appendChild(content);\n    item.appendChild(footer);\n\n    return item;\n  }\n\n  private createElement(): HTMLElement {\n    const sidebar = document.createElement(\"div\");\n    sidebar.className = \"uicm-comment-sidebar\";\n\n    // Header\n    const header = document.createElement(\"div\");\n    header.className = \"uicm-sidebar-header\";\n\n    const title = document.createElement(\"h3\");\n    title.className = \"uicm-sidebar-title\";\n    title.textContent = \"All Comments\";\n\n    const closeButton = document.createElement(\"button\");\n    closeButton.className = \"uicm-sidebar-close\";\n    closeButton.innerHTML = \"×\";\n    closeButton.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.onClose();\n    });\n\n    header.appendChild(title);\n    header.appendChild(closeButton);\n\n    // Tabs\n    const tabsContainer = document.createElement(\"div\");\n    tabsContainer.className = \"uicm-sidebar-tabs\";\n\n    const activeTab = document.createElement(\"button\");\n    activeTab.className = \"uicm-sidebar-tab uicm-sidebar-tab-active\";\n    activeTab.textContent = \"Active\";\n    activeTab.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.switchTab(\"active\");\n    });\n\n    const archiveTab = document.createElement(\"button\");\n    archiveTab.className = \"uicm-sidebar-tab\";\n    archiveTab.textContent = \"Archive\";\n    archiveTab.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.switchTab(\"archive\");\n    });\n\n    tabsContainer.appendChild(activeTab);\n    tabsContainer.appendChild(archiveTab);\n\n    // Stats\n    const stats = document.createElement(\"div\");\n    stats.className = \"uicm-sidebar-stats\";\n\n    const activeComments = this.props.comments.filter(\n      (c) => c.status !== \"archived\"\n    ).length;\n    const archivedComments = this.props.comments.filter(\n      (c) => c.status === \"archived\"\n    ).length;\n    const totalReplies = this.props.comments.reduce(\n      (sum, comment) => sum + comment.replies.length,\n      0\n    );\n\n    this.statsContent = document.createElement(\"div\");\n    this.statsContent.className = \"uicm-sidebar-stats-content\";\n    this.statsContent.innerHTML = `\n      <span>📝 ${activeComments} active</span>\n      <span>💬 ${totalReplies} replies</span>\n      <span>📊 ${activeComments + archivedComments} total</span>\n    `;\n    stats.appendChild(this.statsContent);\n\n    // Comments list\n    this.commentsList = document.createElement(\"div\");\n    this.commentsList.className = \"uicm-sidebar-comments-list\";\n\n    // Populate comments based on current tab\n    this.updateCommentsDisplay();\n\n    sidebar.appendChild(header);\n    sidebar.appendChild(tabsContainer);\n    sidebar.appendChild(stats);\n    sidebar.appendChild(this.commentsList);\n\n    return sidebar;\n  }\n\n  private attachEventListeners(): void {\n    // ESC key to close\n    const escHandler = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\" && this.isVisible) {\n        this.props.onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", escHandler);\n\n    // Clean up on destroy\n    this.element.addEventListener(\"destroy\", () => {\n      document.removeEventListener(\"keydown\", escHandler);\n    });\n  }\n\n  public show(): void {\n    this.isVisible = true;\n\n    document.body.appendChild(this.element);\n\n    this.element.offsetHeight;\n\n    this.element.classList.add(\"show\");\n  }\n\n  public hide(): void {\n    console.log(\"🔧 CommentSidebar: hide() called\");\n    this.isVisible = false;\n\n    // Remove show class to trigger slide out animation\n    this.element.classList.remove(\"show\");\n\n    // Remove from DOM after animation\n    setTimeout(() => {\n      if (this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n        console.log(\"🔧 CommentSidebar: Element removed from DOM\");\n      }\n    }, 300);\n  }\n\n  public updateComments(comments: Comment[]): void {\n    this.props.comments = comments;\n    this.updateCommentsDisplay();\n    this.updateStats();\n    this.updateTabStates();\n  }\n\n  private updateTabStates(): void {\n    const activeTab = this.element.querySelector(\n      \".uicm-sidebar-tab:first-child\"\n    ) as HTMLElement;\n    const archiveTab = this.element.querySelector(\n      \".uicm-sidebar-tab:last-child\"\n    ) as HTMLElement;\n\n    if (activeTab && archiveTab) {\n      if (this.currentTab === \"active\") {\n        activeTab.classList.add(\"uicm-sidebar-tab-active\");\n        archiveTab.classList.remove(\"uicm-sidebar-tab-active\");\n      } else {\n        activeTab.classList.remove(\"uicm-sidebar-tab-active\");\n        archiveTab.classList.add(\"uicm-sidebar-tab-active\");\n      }\n    }\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public destroy(): void {\n    this.hide();\n    this.element.dispatchEvent(new Event(\"destroy\"));\n  }\n}\n","/**\n * Get the position of an element relative to the viewport\n */\nexport function getElementPosition(element: Element): { x: number; y: number } {\n  const rect = element.getBoundingClientRect();\n  return {\n    x: rect.left + rect.width / 2,\n    y: rect.top + rect.height / 2,\n  };\n}\n\n/**\n * Ensure a modal/form stays within viewport boundaries\n */\nexport function constrainToViewport(\n  element: HTMLElement,\n  position: { x: number; y: number },\n  options: {\n    padding?: number;\n    preferredSide?: \"top\" | \"bottom\" | \"left\" | \"right\";\n  } = {}\n): { x: number; y: number } {\n  const { padding = 16, preferredSide = \"bottom\" } = options;\n\n  // Get viewport dimensions\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  // Get element dimensions (use getBoundingClientRect for accurate size)\n  const rect = element.getBoundingClientRect();\n  const elementWidth = rect.width || 400; // fallback width\n  const elementHeight = rect.height || 300; // fallback height\n\n  let { x, y } = position;\n\n  // Constrain horizontal position\n  if (x + elementWidth > viewportWidth - padding) {\n    x = viewportWidth - elementWidth - padding;\n  }\n  if (x < padding) {\n    x = padding;\n  }\n\n  // Constrain vertical position\n  if (y + elementHeight > viewportHeight - padding) {\n    if (preferredSide === \"top\") {\n      // Try to position above the target\n      y = position.y - elementHeight - padding;\n    } else {\n      // Position at bottom of viewport\n      y = viewportHeight - elementHeight - padding;\n    }\n  }\n  if (y < padding) {\n    y = padding;\n  }\n\n  // If still outside viewport after adjustments, center it\n  if (x < padding || x + elementWidth > viewportWidth - padding) {\n    x = Math.max(padding, (viewportWidth - elementWidth) / 2);\n  }\n  if (y < padding || y + elementHeight > viewportHeight - padding) {\n    y = Math.max(padding, (viewportHeight - elementHeight) / 2);\n  }\n\n  return { x, y };\n}\n\n/**\n * Reposition an element to ensure it stays within viewport after being added to DOM\n */\nexport function repositionInViewport(\n  element: HTMLElement,\n  options: {\n    padding?: number;\n    preferredSide?: \"top\" | \"bottom\" | \"left\" | \"right\";\n  } = {}\n): void {\n  const { padding = 16, preferredSide = \"bottom\" } = options;\n\n  // Get current position\n  const currentLeft = parseFloat(element.style.left) || 0;\n  const currentTop = parseFloat(element.style.top) || 0;\n\n  // Constrain to viewport\n  const constrainedPosition = constrainToViewport(\n    element,\n    {\n      x: currentLeft,\n      y: currentTop,\n    },\n    { padding, preferredSide }\n  );\n\n  // Apply new position\n  element.style.left = `${constrainedPosition.x}px`;\n  element.style.top = `${constrainedPosition.y}px`;\n}\n\n/**\n * Get viewport dimensions\n */\nexport function getViewportSize(): { width: number; height: number } {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  };\n}\n\n/**\n * Calculate position from relative coordinates\n */\nexport function getAbsolutePositionFromRelative(\n  element: Element,\n  relativePosition: { x: number; y: number }\n): { x: number; y: number } {\n  const rect = element.getBoundingClientRect();\n  return {\n    x: rect.left + rect.width * relativePosition.x,\n    y: rect.top + rect.height * relativePosition.y,\n  };\n}\n\n/**\n * Calculate relative position within an element from absolute coordinates\n */\nexport function getRelativePositionFromAbsolute(\n  element: Element,\n  absolutePosition: { x: number; y: number }\n): { x: number; y: number } {\n  const rect = element.getBoundingClientRect();\n  return {\n    x: Math.max(0, Math.min(1, (absolutePosition.x - rect.left) / rect.width)),\n    y: Math.max(0, Math.min(1, (absolutePosition.y - rect.top) / rect.height)),\n  };\n}\n\n/**\n * Get comment position from click event and target element\n */\nexport function getCommentPositionFromClick(\n  element: Element,\n  clickEvent: { clientX: number; clientY: number }\n): {\n  position: { x: number; y: number };\n  relativePosition: { x: number; y: number };\n} {\n  const absolutePosition = { x: clickEvent.clientX, y: clickEvent.clientY };\n  const relativePosition = getRelativePositionFromAbsolute(\n    element,\n    absolutePosition\n  );\n\n  return {\n    position: absolutePosition,\n    relativePosition,\n  };\n}\n\n/**\n * Get the bounds of an element\n */\nexport function getElementBounds(element: Element): DOMRect {\n  return element.getBoundingClientRect();\n}\n\n/**\n * Check if a point is within element bounds\n */\nexport function isPointInElement(\n  x: number,\n  y: number,\n  element: Element\n): boolean {\n  const rect = element.getBoundingClientRect();\n  return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n}\n\n/**\n * Get the topmost element at a given point (excluding SDK elements)\n */\nexport function getElementAtPoint(x: number, y: number): Element | null {\n  // Temporarily hide SDK elements\n  const sdkElements = document.querySelectorAll(\"[data-uicm-element]\");\n  const originalDisplay: string[] = [];\n\n  sdkElements.forEach((el, index) => {\n    const htmlEl = el as HTMLElement;\n    originalDisplay[index] = htmlEl.style.display;\n    htmlEl.style.display = \"none\";\n  });\n\n  const element = document.elementFromPoint(x, y);\n\n  // Restore SDK elements\n  sdkElements.forEach((el, index) => {\n    const htmlEl = el as HTMLElement;\n    htmlEl.style.display = originalDisplay[index];\n  });\n\n  return element;\n}\n\n/**\n * Create a unique ID for elements (used for comment IDs)\n */\nexport function generateId(): string {\n  return `uicm_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Create SDK root container if it doesn't exist\n */\nexport function ensureSDKRoot(): HTMLElement {\n  let root = document.getElementById(\"uicm-root\");\n  if (!root) {\n    root = document.createElement(\"div\");\n    root.id = \"uicm-root\";\n    root.setAttribute(\"data-uicm-element\", \"true\");\n\n    // Position the layer\n    root.style.position = \"fixed\";\n    root.style.top = \"0\";\n    root.style.left = \"0\";\n    root.style.width = \"100vw\";\n    root.style.height = \"100vh\";\n    root.style.pointerEvents = \"none\"; // Allow events to pass through by default\n    root.style.zIndex = \"999999\";\n\n    // Create separate layers for different components\n    const highlightLayer = document.createElement(\"div\");\n    highlightLayer.id = \"uicm-highlight-layer\";\n    highlightLayer.style.position = \"absolute\";\n    highlightLayer.style.top = \"0\";\n    highlightLayer.style.left = \"0\";\n    highlightLayer.style.width = \"100%\";\n    highlightLayer.style.height = \"100%\";\n    highlightLayer.style.pointerEvents = \"none\";\n    highlightLayer.style.display = \"none\"; // Hidden by default\n    root.appendChild(highlightLayer);\n\n    // Combined interaction layer for both bubbles and forms\n    const interactionLayer = document.createElement(\"div\");\n    interactionLayer.id = \"uicm-interaction-layer\";\n    interactionLayer.style.position = \"absolute\";\n    interactionLayer.style.top = \"0\";\n    interactionLayer.style.left = \"0\";\n    interactionLayer.style.width = \"100%\";\n    interactionLayer.style.height = \"100%\";\n    interactionLayer.style.pointerEvents = \"auto\"; // Bubbles and forms need to be clickable\n    interactionLayer.style.display = \"none\"; // Hidden by default\n    root.appendChild(interactionLayer);\n\n    document.body.appendChild(root);\n  }\n  return root;\n}\n\n/**\n * Remove SDK root and cleanup\n */\nexport function removeSDKRoot(): void {\n  const root = document.getElementById(\"uicm-root\");\n  if (root) {\n    root.remove();\n  }\n}\n\n/**\n * Add global styles to the page\n */\nexport function injectGlobalStyles(css: string): HTMLStyleElement {\n  const style = document.createElement(\"style\");\n  style.id = \"uicm-styles\";\n  style.textContent = css;\n  document.head.appendChild(style);\n  return style;\n}\n\n/**\n * Remove global styles\n */\nexport function removeGlobalStyles(): void {\n  const style = document.getElementById(\"uicm-styles\");\n  if (style) {\n    style.remove();\n  }\n}\n\n/**\n * Debounce function for performance optimization\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: number | null = null;\n  return (...args: Parameters<T>) => {\n    if (timeout !== null) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}\n\n/**\n * Check if element is clickable (not covered by other elements)\n */\nexport function isElementClickable(element: Element): boolean {\n  const rect = element.getBoundingClientRect();\n  const centerX = rect.left + rect.width / 2;\n  const centerY = rect.top + rect.height / 2;\n\n  const topElement = document.elementFromPoint(centerX, centerY);\n  return topElement === element || element.contains(topElement);\n}\n\n/**\n * Scroll element into view smoothly\n */\nexport function scrollIntoView(element: Element): void {\n  element.scrollIntoView({\n    behavior: \"smooth\",\n    block: \"center\",\n    inline: \"nearest\",\n  });\n}\n\n/**\n * Get XPath of an element\n */\nexport function getXPath(element: Element): string {\n  if (!element) return \"\";\n  if (element.id) return `//*[@id=\"${element.id}\"]`;\n\n  const paths: string[] = [];\n  let current = element;\n\n  while (current && current.nodeType === Node.ELEMENT_NODE) {\n    let index = 1;\n    let hasSibling = false;\n\n    // Count previous siblings with same tag name\n    let sibling = current.previousSibling;\n    while (sibling) {\n      if (\n        sibling.nodeType === Node.ELEMENT_NODE &&\n        (sibling as Element).tagName === current.tagName\n      ) {\n        index++;\n        hasSibling = true;\n      }\n      sibling = sibling.previousSibling;\n    }\n\n    // Build path\n    const tagName = current.tagName.toLowerCase();\n    const pathIndex = hasSibling ? `[${index}]` : \"\";\n    paths.unshift(`${tagName}${pathIndex}`);\n\n    // Move up to parent\n    current = current.parentElement as Element;\n  }\n\n  return `/${paths.join(\"/\")}`;\n}\n","import { CommentAttachment } from \"../types\";\n\nexport class Base64UploadManager {\n  private maxFileSize: number;\n  private allowedTypes: string[];\n\n  constructor(maxFileSize: number = 5 * 1024 * 1024) {\n    // 5MB default\n    this.maxFileSize = maxFileSize;\n    this.allowedTypes = [\n      \"image/jpeg\",\n      \"image/png\",\n      \"image/gif\",\n      \"image/webp\",\n      \"application/pdf\",\n      \"application/msword\",\n      \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n      \"text/plain\",\n      \"application/zip\",\n      \"application/x-rar-compressed\",\n    ];\n  }\n\n  /**\n   * Convert file to base64 and create attachment\n   */\n  async uploadFile(file: File): Promise<CommentAttachment> {\n    // Validate file size\n    if (file.size > this.maxFileSize) {\n      throw new Error(\n        `File too large. Maximum size is ${this.formatFileSize(\n          this.maxFileSize\n        )}`\n      );\n    }\n\n    // Validate file type\n    if (this.allowedTypes.indexOf(file.type) === -1) {\n      throw new Error(\n        `File type not allowed. Allowed types: ${this.allowedTypes.join(\", \")}`\n      );\n    }\n\n    try {\n      const base64 = await this.fileToBase64(file);\n\n      return {\n        id: this.generateId(),\n        filename: file.name,\n        url: base64,\n        type: file.type.startsWith(\"image/\") ? \"image\" : \"file\",\n        size: file.size,\n        uploadedAt: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error(\"Base64 conversion failed:\", error);\n      throw new Error(`Failed to process file: ${file.name}`);\n    }\n  }\n\n  /**\n   * Convert file to base64 string\n   */\n  private fileToBase64(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result as string);\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  }\n\n  /**\n   * Upload multiple files\n   */\n  async uploadFiles(files: File[]): Promise<CommentAttachment[]> {\n    const uploadPromises = files.map((file) => this.uploadFile(file));\n    return Promise.all(uploadPromises);\n  }\n\n  /**\n   * Check if file is an image\n   */\n  isImage(file: File): boolean {\n    return file.type.startsWith(\"image/\");\n  }\n\n  /**\n   * Get file size in human readable format\n   */\n  private formatFileSize(bytes: number): string {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n  }\n\n  /**\n   * Generate unique ID\n   */\n  private generateId(): string {\n    return Date.now().toString() + Math.random().toString(36).substr(2, 9);\n  }\n}\n\n// Create default instance\nexport const base64UploadManager = new Base64UploadManager();\n","export class ImageModal {\n  private element: HTMLElement;\n  private imageUrl: string;\n  private isVisible = false;\n  private keydownHandler: ((e: KeyboardEvent) => void) | null = null;\n  private imageElement: HTMLImageElement | null = null;\n  private currentScale = 1;\n  private minScale = 0.5;\n  private maxScale = 3;\n\n  constructor(imageUrl: string) {\n    this.imageUrl = imageUrl;\n    this.element = this.createElement();\n    this.setupEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const modal = document.createElement(\"div\");\n    modal.className = \"uicm-image-modal\";\n    modal.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0, 0, 0, 0.9);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 999999;\n      opacity: 0;\n      visibility: hidden;\n      transition: opacity 0.3s ease, visibility 0.3s ease;\n      pointer-events: auto;\n    `;\n\n    const imageContainer = document.createElement(\"div\");\n    imageContainer.className = \"uicm-image-container\";\n    imageContainer.style.cssText = `\n      position: relative;\n      max-width: 80vw;\n      max-height: 80vh;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      pointer-events: auto;\n    `;\n\n    const image = document.createElement(\"img\");\n    image.src = this.imageUrl;\n    image.style.cssText = `\n      max-width: 100%;\n      max-height: 100%;\n      object-fit: contain;\n      border-radius: 8px;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n      transition: transform 0.3s ease;\n      cursor: zoom-in;\n    `;\n\n    // Store reference to image element\n    this.imageElement = image;\n\n    const closeButton = document.createElement(\"button\");\n    closeButton.className = \"uicm-image-close\";\n    closeButton.innerHTML = \"×\";\n    closeButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 0;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 32px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    closeButton.addEventListener(\"mouseenter\", () => {\n      closeButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    closeButton.addEventListener(\"mouseleave\", () => {\n      closeButton.style.backgroundColor = \"transparent\";\n    });\n\n    const downloadButton = document.createElement(\"button\");\n    downloadButton.className = \"uicm-image-download\";\n    downloadButton.innerHTML = \"⬇\";\n    downloadButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 50px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 20px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    downloadButton.addEventListener(\"mouseenter\", () => {\n      downloadButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    downloadButton.addEventListener(\"mouseleave\", () => {\n      downloadButton.style.backgroundColor = \"transparent\";\n    });\n\n    downloadButton.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      this.downloadImage();\n    });\n\n    // Zoom controls\n    const zoomInButton = document.createElement(\"button\");\n    zoomInButton.className = \"uicm-image-zoom-in\";\n    zoomInButton.innerHTML = \"🔍+\";\n    zoomInButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 100px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 16px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    zoomInButton.addEventListener(\"mouseenter\", () => {\n      zoomInButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    zoomInButton.addEventListener(\"mouseleave\", () => {\n      zoomInButton.style.backgroundColor = \"transparent\";\n    });\n\n    zoomInButton.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      this.zoomIn();\n    });\n\n    const zoomOutButton = document.createElement(\"button\");\n    zoomOutButton.className = \"uicm-image-zoom-out\";\n    zoomOutButton.innerHTML = \"🔍-\";\n    zoomOutButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 140px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 16px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    zoomOutButton.addEventListener(\"mouseenter\", () => {\n      zoomOutButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    zoomOutButton.addEventListener(\"mouseleave\", () => {\n      zoomOutButton.style.backgroundColor = \"transparent\";\n    });\n\n    zoomOutButton.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      this.zoomOut();\n    });\n\n    const resetButton = document.createElement(\"button\");\n    resetButton.className = \"uicm-image-reset\";\n    resetButton.innerHTML = \"🔄\";\n    resetButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 180px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 16px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    resetButton.addEventListener(\"mouseenter\", () => {\n      resetButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    resetButton.addEventListener(\"mouseleave\", () => {\n      resetButton.style.backgroundColor = \"transparent\";\n    });\n\n    resetButton.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      this.resetZoom();\n    });\n\n    imageContainer.appendChild(image);\n    imageContainer.appendChild(closeButton);\n    imageContainer.appendChild(downloadButton);\n    imageContainer.appendChild(zoomInButton);\n    imageContainer.appendChild(zoomOutButton);\n    imageContainer.appendChild(resetButton);\n    modal.appendChild(imageContainer);\n\n    return modal;\n  }\n\n  private setupEventListeners(): void {\n    // Close on background click (outside image)\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      if (e.target === this.element) {\n        this.hide();\n      }\n    });\n\n    // Close button click\n    const closeButton = this.element.querySelector(\n      \".uicm-image-close\"\n    ) as HTMLElement;\n    if (closeButton) {\n      closeButton.addEventListener(\"click\", (e) => {\n        e.stopPropagation(); // Prevent event from bubbling up\n        this.hide();\n      });\n    }\n\n    // Image click to zoom in/out\n    if (this.imageElement) {\n      this.imageElement.addEventListener(\"click\", (e) => {\n        e.stopPropagation(); // Prevent modal from closing\n        this.toggleZoom();\n      });\n\n      // Mouse wheel zoom\n      this.imageElement.addEventListener(\"wheel\", (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (e.deltaY < 0) {\n          this.zoomIn();\n        } else {\n          this.zoomOut();\n        }\n      });\n    }\n  }\n\n  private downloadImage(): void {\n    const link = document.createElement(\"a\");\n    link.href = this.imageUrl;\n    link.download = `image-${Date.now()}.png`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  private zoomIn(): void {\n    if (this.imageElement && this.currentScale < this.maxScale) {\n      this.currentScale = Math.min(this.maxScale, this.currentScale + 0.25);\n      this.updateImageTransform();\n      this.updateCursor();\n    }\n  }\n\n  private zoomOut(): void {\n    if (this.imageElement && this.currentScale > this.minScale) {\n      this.currentScale = Math.max(this.minScale, this.currentScale - 0.25);\n      this.updateImageTransform();\n      this.updateCursor();\n    }\n  }\n\n  private resetZoom(): void {\n    if (this.imageElement) {\n      this.currentScale = 1;\n      this.updateImageTransform();\n      this.updateCursor();\n    }\n  }\n\n  private toggleZoom(): void {\n    if (this.currentScale === 1) {\n      this.zoomIn();\n    } else {\n      this.resetZoom();\n    }\n  }\n\n  private updateImageTransform(): void {\n    if (this.imageElement) {\n      this.imageElement.style.transform = `scale(${this.currentScale})`;\n    }\n  }\n\n  private updateCursor(): void {\n    if (this.imageElement) {\n      if (this.currentScale === 1) {\n        this.imageElement.style.cursor = \"zoom-in\";\n      } else {\n        this.imageElement.style.cursor = \"zoom-out\";\n      }\n    }\n  }\n\n  public show(): void {\n    if (!this.isVisible) {\n      document.body.appendChild(this.element);\n      this.isVisible = true;\n\n      // Add escape key handler only when modal is visible\n      this.keydownHandler = (e: KeyboardEvent) => {\n        if (e.key === \"Escape\" && this.isVisible) {\n          this.hide();\n        }\n      };\n      document.addEventListener(\"keydown\", this.keydownHandler);\n\n      // Prevent body scroll when modal is open\n      document.body.style.overflow = \"hidden\";\n\n      // Trigger animation\n      requestAnimationFrame(() => {\n        this.element.style.opacity = \"1\";\n        this.element.style.visibility = \"visible\";\n        this.element.style.pointerEvents = \"auto\"; // Re-enable pointer events\n      });\n    }\n  }\n\n  public hide(): void {\n    if (this.isVisible) {\n      // Immediately prevent any further interactions\n      this.isVisible = false;\n\n      this.element.style.opacity = \"0\";\n      this.element.style.visibility = \"hidden\";\n      this.element.style.pointerEvents = \"none\"; // Prevent any clicks during fade out\n\n      // Remove escape key handler\n      if (this.keydownHandler) {\n        document.removeEventListener(\"keydown\", this.keydownHandler);\n        this.keydownHandler = null;\n      }\n\n      // Restore body scroll\n      document.body.style.overflow = \"\";\n\n      setTimeout(() => {\n        if (this.element.parentNode) {\n          this.element.parentNode.removeChild(this.element);\n        }\n      }, 300);\n    }\n  }\n\n  public destroy(): void {\n    this.hide();\n    // Ensure keydown handler is removed\n    if (this.keydownHandler) {\n      document.removeEventListener(\"keydown\", this.keydownHandler);\n      this.keydownHandler = null;\n    }\n  }\n}\n","import { Comment, User, CommentStatus, CommentAttachment } from \"../types\";\nimport { base64UploadManager } from \"../utils/base64Upload\";\nimport { ImageModal } from \"./ImageModal\";\nimport { constrainToViewport, repositionInViewport } from \"../utils/dom\";\nimport { getRoleColor, getRoleDisplayName } from \"../utils/roleColors\";\n\nexport interface CommentModalProps {\n  comments: Comment[];\n  currentUser: User;\n  position: { x: number; y: number };\n  onClose: () => void;\n  onAddReply: (\n    commentId: string,\n    content: string,\n    user?: User,\n    attachments?: CommentAttachment[]\n  ) => Promise<void>;\n  onStatusChange: (commentId: string, status: CommentStatus) => Promise<void>;\n  onDeleteComment?: (commentId: string) => Promise<void>;\n}\n\nexport class CommentModal {\n  private element: HTMLElement;\n  private props: CommentModalProps;\n  private imageModal: ImageModal | null = null;\n\n  constructor(props: CommentModalProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private detectAndFormatUrls(text: string): string {\n    // URL regex pattern\n    const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n\n    return text.replace(urlRegex, (url) => {\n      return `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"uicm-url-link\">${url}</a>`;\n    });\n  }\n\n  private formatFileSize(bytes: number): string {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n  }\n\n  private addFilePreview(\n    attachment: CommentAttachment,\n    container: HTMLElement,\n    onRemove: () => void\n  ): void {\n    // Limit to 5 images\n    if (container.childElementCount >= 5) return;\n\n    const previewItem = document.createElement(\"div\");\n    previewItem.className = \"uicm-file-preview-item\";\n    previewItem.style.position = \"relative\";\n\n    if (attachment.type === \"image\") {\n      const imagePreview = document.createElement(\"img\");\n      imagePreview.className = \"uicm-file-preview-image\";\n      imagePreview.src = attachment.url;\n      imagePreview.alt = attachment.filename;\n      imagePreview.style.cursor = \"pointer\";\n\n      // Add click handler to open image modal\n      imagePreview.addEventListener(\"click\", () => {\n        if (this.imageModal) {\n          this.imageModal.destroy();\n        }\n        this.imageModal = new ImageModal(attachment.url);\n        this.imageModal.show();\n      });\n\n      previewItem.appendChild(imagePreview);\n    } else {\n      const fileIcon = document.createElement(\"span\");\n      fileIcon.className = \"uicm-file-preview-icon\";\n      fileIcon.innerHTML = \"📎\";\n      previewItem.appendChild(fileIcon);\n    }\n\n    // Only show file size (not name or url)\n    const fileSize = document.createElement(\"span\");\n    fileSize.className = \"uicm-file-preview-size\";\n    fileSize.textContent = this.formatFileSize(attachment.size);\n    previewItem.appendChild(fileSize);\n\n    // Remove button absolutely positioned top right\n    const removeButton = document.createElement(\"button\");\n    removeButton.className = \"uicm-file-preview-remove\";\n    removeButton.innerHTML = \"×\";\n    removeButton.type = \"button\";\n    removeButton.style.position = \"absolute\";\n    removeButton.style.top = \"2px\";\n    removeButton.style.right = \"2px\";\n    removeButton.style.zIndex = \"2\";\n    removeButton.onclick = () => {\n      previewItem.remove();\n      onRemove();\n    };\n    previewItem.appendChild(removeButton);\n\n    container.appendChild(previewItem);\n  }\n\n  private createElement(): HTMLElement {\n    const modal = document.createElement(\"div\");\n    modal.className = \"uicm-comment-modal\";\n    modal.style.position = \"absolute\";\n    modal.style.zIndex = \"10000\";\n\n    // Temporarily add to DOM to get accurate dimensions\n    document.body.appendChild(modal);\n\n    // Constrain position to viewport\n    const constrainedPosition = constrainToViewport(\n      modal,\n      this.props.position,\n      {\n        padding: 20,\n        preferredSide: \"bottom\",\n      }\n    );\n\n    // Set constrained position\n    modal.style.left = `${constrainedPosition.x}px`;\n    modal.style.top = `${constrainedPosition.y}px`;\n\n    // Remove from DOM temporarily\n    document.body.removeChild(modal);\n\n    // Gradient header bar (similar to comment form)\n    const headerBar = document.createElement(\"div\");\n    headerBar.className = \"uicm-modal-header-bar\";\n\n    // Header\n    const header = document.createElement(\"div\");\n    header.className = \"uicm-modal-header\";\n\n    const headerContent = document.createElement(\"div\");\n    headerContent.className = \"uicm-modal-header-content\";\n\n    const title = document.createElement(\"h3\");\n    title.className = \"uicm-modal-title\";\n    title.textContent = \"Comment\";\n\n    const commentCount = document.createElement(\"span\");\n    commentCount.className = \"uicm-comment-count\";\n    commentCount.textContent = `${this.props.comments.length} comment${\n      this.props.comments.length !== 1 ? \"s\" : \"\"\n    }`;\n\n    // Status display\n    const statusDisplay = document.createElement(\"div\");\n    statusDisplay.className = \"uicm-status-display\";\n\n    const mainComment = this.props.comments[0];\n    const statusBadge = document.createElement(\"span\");\n    statusBadge.className = `uicm-status-badge status-${mainComment.status}`;\n    statusBadge.textContent = mainComment.status.toUpperCase();\n\n    statusDisplay.appendChild(statusBadge);\n\n    headerContent.appendChild(title);\n    headerContent.appendChild(commentCount);\n    headerContent.appendChild(statusDisplay);\n\n    const actionButtons = document.createElement(\"div\");\n    actionButtons.className = \"uicm-modal-actions\";\n\n    // Status change dropdown\n    const statusControl = document.createElement(\"div\");\n    statusControl.className = \"uicm-status-control\";\n\n    const statusDropdown = document.createElement(\"select\");\n    statusDropdown.className = \"uicm-status-dropdown\";\n    statusDropdown.value = mainComment.status;\n\n    // Add the 3 main status options (exclude ARCHIVED from dropdown)\n    const mainStatuses = [\n      CommentStatus.BUG,\n      CommentStatus.DEV_COMPLETED,\n      CommentStatus.DONE,\n    ];\n\n    mainStatuses.forEach((status) => {\n      const option = document.createElement(\"option\");\n      option.value = status;\n      option.textContent = status.toUpperCase();\n      option.selected = status === mainComment.status;\n      statusDropdown.appendChild(option);\n    });\n\n    // If current status is ARCHIVED, add it as selected option\n    if (mainComment.status === CommentStatus.ARCHIVED) {\n      const option = document.createElement(\"option\");\n      option.value = CommentStatus.ARCHIVED;\n      option.textContent = \"ARCHIVED\";\n      option.selected = true;\n      statusDropdown.appendChild(option);\n    }\n\n    // Status change handler\n    statusDropdown.addEventListener(\"change\", async (e) => {\n      const newStatus = (e.target as HTMLSelectElement).value as CommentStatus;\n      if (newStatus !== mainComment.status) {\n        await this.props.onStatusChange(mainComment.id, newStatus);\n        // Update the status badge\n        statusBadge.textContent = newStatus.toUpperCase();\n        statusBadge.className = `uicm-status-badge status-${newStatus}`;\n\n        // Update archive button visibility\n        archiveButton.style.display =\n          newStatus === CommentStatus.DONE ? \"inline-block\" : \"none\";\n      }\n    });\n\n    statusControl.appendChild(statusDropdown);\n\n    // Archive button (show for DONE status or if already archived)\n    const archiveButton = document.createElement(\"button\");\n    archiveButton.className = \"uicm-archive-button\";\n    archiveButton.innerHTML = \"📦 Archive\";\n    archiveButton.title = \"Archive Comment\";\n    archiveButton.style.display =\n      mainComment.status === CommentStatus.DONE ||\n      mainComment.status === CommentStatus.ARCHIVED\n        ? \"inline-block\"\n        : \"none\";\n    archiveButton.onclick = async () => {\n      await this.props.onStatusChange(mainComment.id, CommentStatus.ARCHIVED);\n      statusBadge.textContent = CommentStatus.ARCHIVED.toUpperCase();\n      statusBadge.className = `uicm-status-badge status-${CommentStatus.ARCHIVED}`;\n\n      // Update dropdown to show archived status\n      statusDropdown.value = CommentStatus.ARCHIVED;\n\n      // Hide archive button since it's now archived\n      archiveButton.style.display = \"none\";\n    };\n\n    const closeButton = document.createElement(\"button\");\n    closeButton.className = \"uicm-close-button\";\n    closeButton.innerHTML = \"×\";\n    closeButton.title = \"Close\";\n    closeButton.onclick = () => this.props.onClose();\n\n    actionButtons.appendChild(statusControl);\n    actionButtons.appendChild(archiveButton);\n    actionButtons.appendChild(closeButton);\n\n    header.appendChild(headerContent);\n    header.appendChild(actionButtons);\n\n    // Comments list\n    const commentsList = document.createElement(\"div\");\n    commentsList.className = \"uicm-comments-list\";\n\n    this.props.comments.forEach((comment) => {\n      const commentItem = this.createCommentItem(comment);\n      commentsList.appendChild(commentItem);\n    });\n\n    // Reply form\n    const replyForm = this.createReplyForm();\n\n    modal.appendChild(headerBar);\n    modal.appendChild(header);\n    modal.appendChild(commentsList);\n    modal.appendChild(replyForm);\n\n    return modal;\n  }\n\n  private createCommentItem(comment: Comment): HTMLElement {\n    const item = document.createElement(\"div\");\n    item.className = \"uicm-comment-item\";\n\n    // Avatar with gradient background\n    const avatar = document.createElement(\"div\");\n    avatar.className = \"uicm-comment-avatar\";\n    if (comment.createdBy.avatar) {\n      avatar.innerHTML = `<img src=\"${comment.createdBy.avatar}\" alt=\"${comment.createdBy.name}\" style=\"width: 100%; height: 100%; border-radius: 50%; object-fit: cover;\">`;\n    } else {\n      avatar.textContent = comment.createdBy.name.charAt(0).toUpperCase();\n    }\n\n    // Content\n    const content = document.createElement(\"div\");\n    content.className = \"uicm-comment-content\";\n\n    const commentHeader = document.createElement(\"div\");\n    commentHeader.className = \"uicm-comment-header\";\n\n    const authorName = document.createElement(\"span\");\n    authorName.className = \"uicm-author-name\";\n    authorName.textContent = comment.createdBy.name;\n\n    // Add role badge\n    const roleBadge = document.createElement(\"span\");\n    roleBadge.className = \"uicm-role-badge\";\n    roleBadge.textContent = getRoleDisplayName(comment.role);\n\n    // Apply role colors\n    const roleColors = getRoleColor(comment.role);\n    roleBadge.style.backgroundColor = roleColors.bg;\n    roleBadge.style.color = roleColors.text;\n    roleBadge.style.borderColor = roleColors.border;\n\n    const timeAgo = document.createElement(\"span\");\n    timeAgo.className = \"uicm-comment-time\";\n    timeAgo.textContent = this.formatTimeAgo(comment.createdAt);\n\n    // Add delete button for comments (only show if onDeleteComment callback is provided)\n    if (this.props.onDeleteComment) {\n      const deleteButton = document.createElement(\"button\");\n      deleteButton.className = \"uicm-comment-delete-btn\";\n      deleteButton.innerHTML = \"🗑️\";\n      deleteButton.title = \"Delete comment\";\n      deleteButton.style.cssText = `\n        background: none;\n        border: none;\n        cursor: pointer;\n        padding: 4px;\n        border-radius: 4px;\n        color: #6b7280;\n        font-size: 14px;\n        margin-left: 8px;\n        transition: all 0.2s ease;\n      `;\n\n      // Hover effects\n      deleteButton.addEventListener(\"mouseenter\", () => {\n        deleteButton.style.backgroundColor = \"#fee2e2\";\n        deleteButton.style.color = \"#dc2626\";\n      });\n\n      deleteButton.addEventListener(\"mouseleave\", () => {\n        deleteButton.style.backgroundColor = \"transparent\";\n        deleteButton.style.color = \"#6b7280\";\n      });\n\n      // Delete functionality\n      deleteButton.addEventListener(\"click\", async (e) => {\n        e.stopPropagation();\n\n        if (\n          confirm(\n            \"Are you sure you want to delete this comment? This action cannot be undone.\"\n          )\n        ) {\n          try {\n            deleteButton.disabled = true;\n            deleteButton.innerHTML = \"⏳\";\n            deleteButton.title = \"Deleting...\";\n\n            await this.props.onDeleteComment!(comment.id);\n\n            // Remove the comment item from DOM\n            item.style.opacity = \"0.5\";\n            item.style.transform = \"translateX(-100%)\";\n            item.style.transition = \"all 0.3s ease\";\n\n            setTimeout(() => {\n              item.remove();\n\n              // Update comment count\n              const commentCount = this.element.querySelector(\n                \".uicm-comment-count\"\n              );\n              if (commentCount) {\n                const remainingComments = this.props.comments.filter(\n                  (c) => c.id !== comment.id\n                ).length;\n                commentCount.textContent = `${remainingComments} comment${\n                  remainingComments !== 1 ? \"s\" : \"\"\n                }`;\n\n                // If no comments left, close modal\n                if (remainingComments === 0) {\n                  this.props.onClose();\n                }\n              }\n            }, 300);\n          } catch (error) {\n            console.error(\"Failed to delete comment:\", error);\n            deleteButton.disabled = false;\n            deleteButton.innerHTML = \"🗑️\";\n            deleteButton.title = \"Delete comment\";\n            alert(\"Failed to delete comment. Please try again.\");\n          }\n        }\n      });\n\n      commentHeader.appendChild(deleteButton);\n    }\n\n    commentHeader.appendChild(authorName);\n    commentHeader.appendChild(roleBadge);\n    commentHeader.appendChild(timeAgo);\n\n    const commentText = document.createElement(\"p\");\n    commentText.className = \"uicm-comment-text\";\n    commentText.innerHTML = this.detectAndFormatUrls(comment.content);\n\n    content.appendChild(commentHeader);\n    content.appendChild(commentText);\n\n    // Add attachments if any\n    console.log(\n      \"🔍 Checking attachments for comment:\",\n      comment.id,\n      comment.attachments\n    );\n    if (comment.attachments && comment.attachments.length > 0) {\n      console.log(\"📎 Found attachments:\", comment.attachments.length);\n      const attachmentsContainer = document.createElement(\"div\");\n      attachmentsContainer.className = \"uicm-comment-attachments\";\n\n      // Add class for multiple images layout\n      const imageAttachments = comment.attachments.filter(\n        (a) => a.type === \"image\"\n      );\n      if (imageAttachments.length > 1) {\n        attachmentsContainer.classList.add(\"has-multiple-images\");\n      }\n\n      comment.attachments.forEach((attachment, index) => {\n        console.log(`📎 Processing attachment ${index}:`, attachment);\n        const attachmentItem = document.createElement(\"div\");\n        attachmentItem.className = \"uicm-attachment-item\";\n\n        if (attachment.type === \"image\") {\n          const imagePreview = document.createElement(\"img\");\n          imagePreview.className = \"uicm-attachment-image\";\n          imagePreview.src = attachment.url;\n          imagePreview.alt = attachment.filename;\n          imagePreview.style.cursor = \"pointer\";\n\n          // Add click handler to open image modal\n          imagePreview.addEventListener(\"click\", () => {\n            if (this.imageModal) {\n              this.imageModal.destroy();\n            }\n            this.imageModal = new ImageModal(attachment.url);\n            this.imageModal.show();\n          });\n\n          attachmentItem.appendChild(imagePreview);\n        } else {\n          const fileIcon = document.createElement(\"span\");\n          fileIcon.className = \"uicm-attachment-icon\";\n          fileIcon.innerHTML = \"📎\";\n\n          const fileInfo = document.createElement(\"div\");\n          fileInfo.className = \"uicm-attachment-info\";\n\n          const fileName = document.createElement(\"span\");\n          fileName.className = \"uicm-attachment-name\";\n          fileName.textContent = attachment.filename;\n\n          const fileSize = document.createElement(\"span\");\n          fileSize.className = \"uicm-attachment-size\";\n          fileSize.textContent = this.formatFileSize(attachment.size);\n\n          fileInfo.appendChild(fileName);\n          fileInfo.appendChild(fileSize);\n\n          attachmentItem.appendChild(fileIcon);\n          attachmentItem.appendChild(fileInfo);\n\n          attachmentItem.style.cursor = \"pointer\";\n          attachmentItem.addEventListener(\"click\", () => {\n            window.open(attachment.url, \"_blank\");\n          });\n        }\n\n        attachmentsContainer.appendChild(attachmentItem);\n        console.log(`✅ Attachment ${index} added to container`);\n      });\n\n      content.appendChild(attachmentsContainer);\n      console.log(\"✅ Attachments container added to comment item\");\n    }\n\n    item.appendChild(avatar);\n    item.appendChild(content);\n\n    return item;\n  }\n\n  private createReplyForm(): HTMLElement {\n    const form = document.createElement(\"div\");\n    form.className = \"uicm-reply-form\";\n\n    const replyHeader = document.createElement(\"div\");\n    replyHeader.className = \"uicm-reply-header\";\n\n    // Avatar for current user\n    const avatar = document.createElement(\"div\");\n    avatar.className = \"uicm-reply-avatar\";\n    if (this.props.currentUser.avatar) {\n      avatar.innerHTML = `<img src=\"${this.props.currentUser.avatar}\" alt=\"${this.props.currentUser.name}\" style=\"width: 100%; height: 100%; border-radius: 50%; object-fit: cover;\">`;\n    } else {\n      avatar.textContent = this.props.currentUser.name.charAt(0).toUpperCase();\n    }\n\n    // Editable user name\n    const nameInput = document.createElement(\"input\");\n    nameInput.className = \"uicm-reply-user-name-input\";\n    nameInput.type = \"text\";\n    nameInput.value = this.props.currentUser.name;\n    nameInput.placeholder = \"Your name\";\n\n    // Update avatar when name changes\n    nameInput.addEventListener(\"input\", () => {\n      if (nameInput.value.trim()) {\n        avatar.textContent = nameInput.value.trim().charAt(0).toUpperCase();\n      } else {\n        avatar.textContent = this.props.currentUser.name\n          .charAt(0)\n          .toUpperCase();\n      }\n    });\n\n    replyHeader.appendChild(avatar);\n    replyHeader.appendChild(nameInput);\n\n    // Input container\n    const inputContainer = document.createElement(\"div\");\n    inputContainer.className = \"uicm-reply-input-container\";\n\n    const input = document.createElement(\"textarea\");\n    input.className = \"uicm-reply-input\";\n    input.placeholder = \"Write a reply...\";\n    input.rows = 2;\n\n    // File upload section\n    const fileUploadSection = document.createElement(\"div\");\n    fileUploadSection.className = \"uicm-file-upload-section\";\n\n    const fileInput = document.createElement(\"input\");\n    fileInput.type = \"file\";\n    fileInput.className = \"uicm-file-input\";\n    fileInput.style.display = \"none\";\n    fileInput.accept = \"image/*,application/pdf,.doc,.docx,.txt,.zip,.rar\";\n    fileInput.multiple = true;\n\n    const fileUploadButton = document.createElement(\"button\");\n    fileUploadButton.className = \"uicm-file-upload-button\";\n    fileUploadButton.type = \"button\";\n    fileUploadButton.innerHTML = \"📎 Attach Files\";\n    fileUploadButton.onclick = () => fileInput.click();\n\n    const filePreviewContainer = document.createElement(\"div\");\n    filePreviewContainer.className = \"uicm-file-preview-container\";\n\n    let selectedAttachments: CommentAttachment[] = [];\n\n    // Handle file selection\n    fileInput.addEventListener(\"change\", async (e) => {\n      const files = (e.target as HTMLInputElement).files;\n      if (files) {\n        for (const file of Array.from(files)) {\n          try {\n            // Upload file using Base64UploadManager\n            const attachment = await base64UploadManager.uploadFile(file);\n            selectedAttachments.push(attachment);\n            this.addFilePreview(attachment, filePreviewContainer, () => {\n              selectedAttachments = selectedAttachments.filter(\n                (a) => a.id !== attachment.id\n              );\n              updateSendButtonState();\n            });\n          } catch (error) {\n            console.error(\"Failed to upload file:\", error);\n            const errorMessage =\n              error instanceof Error ? error.message : \"Unknown error\";\n            alert(`Failed to upload ${file.name}: ${errorMessage}`);\n          }\n        }\n\n        updateSendButtonState();\n      }\n    });\n\n    const updateSendButtonState = () => {\n      const hasContent = input.value.trim().length > 0;\n      const hasName = nameInput.value.trim().length > 0;\n      const hasAttachments = selectedAttachments.length > 0;\n      sendButton.disabled =\n        (!hasContent && !hasAttachments) ||\n        !hasName ||\n        input.value.length > 500;\n    };\n\n    fileUploadSection.appendChild(fileInput);\n    fileUploadSection.appendChild(fileUploadButton);\n    fileUploadSection.appendChild(filePreviewContainer);\n\n    // Character counter\n    const charCounter = document.createElement(\"div\");\n    charCounter.className = \"uicm-reply-char-counter\";\n\n    // Action buttons\n    const actions = document.createElement(\"div\");\n    actions.className = \"uicm-reply-actions\";\n\n    const sendButton = document.createElement(\"button\");\n    sendButton.className = \"uicm-reply-send\";\n    sendButton.textContent = \"Reply\";\n    sendButton.disabled = true;\n\n    actions.appendChild(sendButton);\n\n    inputContainer.appendChild(input);\n    inputContainer.appendChild(fileUploadSection);\n    inputContainer.appendChild(charCounter);\n    inputContainer.appendChild(actions);\n\n    // Input event handlers\n    input.addEventListener(\"input\", () => {\n      const length = input.value.length;\n      const maxLength = 500;\n\n      charCounter.textContent = `${length} / ${maxLength}`;\n\n      // Update send button state\n      updateSendButtonState();\n\n      if (length > maxLength * 0.8) {\n        charCounter.classList.add(\"uicm-warning\");\n      } else {\n        charCounter.classList.remove(\"uicm-warning\");\n      }\n\n      if (length > maxLength) {\n        charCounter.classList.add(\"uicm-error\");\n      } else {\n        charCounter.classList.remove(\"uicm-error\");\n      }\n\n      // Auto-resize textarea\n      input.style.height = \"auto\";\n      input.style.height = Math.min(input.scrollHeight, 120) + \"px\";\n    });\n\n    // Handle paste events for images\n    input.addEventListener(\"paste\", async (e) => {\n      const items = e.clipboardData?.items;\n      if (items) {\n        for (let i = 0; i < items.length; i++) {\n          const item = items[i];\n          if (item.type.indexOf(\"image\") !== -1) {\n            e.preventDefault();\n            const file = item.getAsFile();\n            if (file) {\n              // Show loading state\n              const originalPlaceholder = input.placeholder;\n              input.placeholder = \"🔄 Processing image...\";\n              input.disabled = true;\n\n              // Show loading indicator\n              const loadingIndicator = document.createElement(\"div\");\n              loadingIndicator.className = \"uicm-paste-loading\";\n              loadingIndicator.innerHTML = `\n                <div class=\"uicm-loading-spinner\"></div>\n                <span>Processing image: ${file.name}</span>\n              `;\n              loadingIndicator.style.cssText = `\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background: rgba(255, 255, 255, 0.95);\n                backdrop-filter: blur(10px);\n                border: 1px solid rgba(59, 130, 246, 0.2);\n                border-radius: 12px;\n                padding: 16px 24px;\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                font-size: 14px;\n                color: #1e293b;\n                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n                z-index: 1000;\n              `;\n\n              const spinner = loadingIndicator.querySelector(\n                \".uicm-loading-spinner\"\n              ) as HTMLElement;\n              spinner.style.cssText = `\n                width: 20px;\n                height: 20px;\n                border: 2px solid #e2e8f0;\n                border-top: 2px solid #3b82f6;\n                border-radius: 50%;\n                animation: uicm-spin 1s linear infinite;\n              `;\n\n              this.element.appendChild(loadingIndicator);\n\n              try {\n                const attachment = await base64UploadManager.uploadFile(file);\n                selectedAttachments.push(attachment);\n\n                this.addFilePreview(attachment, filePreviewContainer, () => {\n                  selectedAttachments = selectedAttachments.filter(\n                    (a) => a.id !== attachment.id\n                  );\n                  updateSendButtonState();\n                });\n\n                updateSendButtonState();\n                console.log(\n                  \"📸 Image pasted and uploaded in reply:\",\n                  attachment.filename\n                );\n\n                // Show success message briefly\n                loadingIndicator.innerHTML = `\n                  <span style=\"color: #10b981;\">✅</span>\n                  <span>Image uploaded successfully!</span>\n                `;\n                setTimeout(() => {\n                  if (loadingIndicator.parentNode) {\n                    loadingIndicator.parentNode.removeChild(loadingIndicator);\n                  }\n                }, 1000);\n              } catch (error) {\n                console.error(\"Failed to paste image in reply:\", error);\n                const errorMessage =\n                  error instanceof Error ? error.message : \"Unknown error\";\n\n                // Show error message\n                loadingIndicator.innerHTML = `\n                  <span style=\"color: #ef4444;\">❌</span>\n                  <span>Failed to upload: ${errorMessage}</span>\n                `;\n                setTimeout(() => {\n                  if (loadingIndicator.parentNode) {\n                    loadingIndicator.parentNode.removeChild(loadingIndicator);\n                  }\n                }, 3000);\n              } finally {\n                // Restore input state\n                input.placeholder = originalPlaceholder;\n                input.disabled = false;\n                input.focus();\n              }\n            }\n          }\n        }\n      }\n    });\n\n    // Name input validation\n    nameInput.addEventListener(\"input\", () => {\n      updateSendButtonState();\n    });\n\n    // Send reply\n    const sendReply = async () => {\n      const content = input.value.trim();\n      const userName = nameInput.value.trim();\n      const hasContent = content.length > 0;\n      const hasAttachments = selectedAttachments.length > 0;\n\n      if (\n        (!hasContent && !hasAttachments) ||\n        !userName ||\n        this.props.comments.length === 0\n      )\n        return;\n\n      try {\n        sendButton.disabled = true;\n        sendButton.textContent = \"Sending...\";\n\n        // Use custom name if provided, otherwise use current user\n        const userForReply =\n          userName !== this.props.currentUser.name\n            ? { ...this.props.currentUser, name: userName }\n            : this.props.currentUser;\n\n        console.log(\n          \"📤 Sending reply with attachments:\",\n          selectedAttachments.length\n        );\n\n        await this.props.onAddReply(\n          this.props.comments[0].id,\n          content,\n          userForReply,\n          selectedAttachments.length > 0 ? selectedAttachments : undefined\n        );\n\n        // Clear form after successful send\n        input.value = \"\";\n        charCounter.textContent = \"0 / 500\";\n        charCounter.classList.remove(\"uicm-warning\", \"uicm-error\");\n\n        input.style.height = \"auto\";\n\n        // Clear attachments\n        selectedAttachments = [];\n        filePreviewContainer.innerHTML = \"\";\n        fileInput.value = \"\";\n\n        // Force refresh the modal to show the new reply with attachments\n        console.log(\"🔄 Force refreshing modal after reply\");\n        setTimeout(() => {\n          // This will trigger a refresh of the modal content\n          const event = new CustomEvent(\"uicm-reply-added\", {\n            detail: { commentId: this.props.comments[0].id },\n          });\n          document.dispatchEvent(event);\n        }, 100);\n\n        console.log(\"✅ Reply sent successfully\");\n      } catch (error) {\n        console.error(\"Failed to send reply:\", error);\n      } finally {\n        sendButton.disabled = false;\n        sendButton.textContent = \"Reply\";\n      }\n    };\n\n    sendButton.onclick = sendReply;\n    input.addEventListener(\"keydown\", (e) => {\n      if (\n        (e.ctrlKey || e.metaKey) &&\n        e.key === \"Enter\" &&\n        !sendButton.disabled\n      ) {\n        e.preventDefault();\n        sendReply();\n      }\n    });\n\n    form.appendChild(replyHeader);\n    form.appendChild(inputContainer);\n\n    return form;\n  }\n\n  public updateComments(comments: Comment[]): void {\n    console.log(\"🔄 Updating modal comments:\", comments.length);\n    comments.forEach((comment, index) => {\n      console.log(`📝 Comment ${index}:`, {\n        id: comment.id,\n        content: comment.content.substring(0, 50) + \"...\",\n        attachments: comment.attachments?.length || 0,\n        attachmentDetails:\n          comment.attachments?.map((a) => ({\n            type: a.type,\n            filename: a.filename,\n            size: a.size,\n          })) || [],\n      });\n    });\n\n    const previousCount = this.props.comments.length;\n    this.props.comments = comments;\n    this.refreshCommentsList();\n\n    // Update comment count in header\n    const commentCount = this.element.querySelector(\".uicm-comment-count\");\n    if (commentCount) {\n      commentCount.textContent = `${comments.length} comment${\n        comments.length !== 1 ? \"s\" : \"\"\n      }`;\n    }\n\n    // Scroll to bottom to show newest reply\n    const commentsList = this.element.querySelector(\".uicm-comments-list\");\n    if (commentsList) {\n      commentsList.scrollTop = commentsList.scrollHeight;\n\n      // Highlight newest reply if a new one was added\n      if (comments.length > previousCount) {\n        const commentItems =\n          commentsList.querySelectorAll(\".uicm-comment-item\");\n        const newestItem = commentItems[commentItems.length - 1] as HTMLElement;\n        if (newestItem) {\n          newestItem.style.backgroundColor = \"rgba(34, 197, 94, 0.1)\";\n          newestItem.style.transition = \"background-color 0.3s ease\";\n\n          // Remove highlight after animation\n          setTimeout(() => {\n            newestItem.style.backgroundColor = \"\";\n          }, 1000);\n        }\n      }\n    }\n\n    console.log(\"✅ Modal updated with new comments:\", comments.length);\n  }\n\n  private refreshCommentsList(): void {\n    console.log(\"🔄 Refreshing comments list\");\n    const commentsList = this.element.querySelector(\".uicm-comments-list\");\n    if (commentsList) {\n      commentsList.innerHTML = \"\";\n      this.props.comments.forEach((comment) => {\n        console.log(\"📝 Creating comment item for:\", comment.id);\n        const commentItem = this.createCommentItem(comment);\n        commentsList.appendChild(commentItem);\n      });\n      console.log(\"✅ Comments list refreshed\");\n    }\n  }\n\n  private formatTimeAgo(dateString: string): string {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n    if (diffInSeconds < 60) return \"just now\";\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;\n    if (diffInSeconds < 86400)\n      return `${Math.floor(diffInSeconds / 3600)}h ago`;\n    return `${Math.floor(diffInSeconds / 86400)}d ago`;\n  }\n\n  private attachEventListeners(): void {\n    // Prevent modal from closing when clicking inside modal\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      console.log(\"🔒 Modal internal click - prevented propagation\");\n    });\n\n    // Prevent modal from closing when interacting with form elements\n    this.element.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"mouseup\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keydown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keyup\", (e) => {\n      e.stopPropagation();\n    });\n\n    // Close modal when clicking outside\n    setTimeout(() => {\n      document.addEventListener(\"click\", this.handleOutsideClick);\n    }, 0);\n  }\n\n  private handleOutsideClick = (e: Event): void => {\n    if (!this.element.contains(e.target as Node)) {\n      this.props.onClose();\n    }\n  };\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public reposition(): void {\n    // Reposition modal to ensure it stays within viewport\n    repositionInViewport(this.element, {\n      padding: 20,\n      preferredSide: \"bottom\",\n    });\n  }\n\n  public destroy(): void {\n    if (this.imageModal) {\n      this.imageModal.destroy();\n      this.imageModal = null;\n    }\n    document.removeEventListener(\"click\", this.handleOutsideClick);\n    this.element.remove();\n  }\n}\n","import { Comment, User, CommentStatus, CommentAttachment } from \"../types\";\nimport { CommentModal } from \"./CommentModal\";\nimport { constrainToViewport } from \"../utils/dom\";\nimport { ImageModal } from \"./ImageModal\";\nimport { getRoleColor } from \"../utils/roleColors\";\n\nexport interface CommentBubbleProps {\n  comment: Comment;\n  position: { x: number; y: number };\n  currentUser: User;\n  onReply: (\n    commentId: string,\n    content: string,\n    user?: User,\n    attachments?: CommentAttachment[]\n  ) => Promise<void>;\n  onResolve: (commentId: string) => Promise<void>;\n  onDelete: (commentId: string) => Promise<void>;\n  onStatusChange: (commentId: string, status: CommentStatus) => Promise<void>;\n  onShowModal: (modal: any) => void; // Callback to CommentManager for centralized modal management\n}\n\nexport class CommentBubble {\n  private element: HTMLElement;\n  private props: CommentBubbleProps;\n  private modal: CommentModal | null = null;\n  private imageModal: ImageModal | null = null;\n\n  constructor(props: CommentBubbleProps) {\n    console.log(\"🔧 Creating CommentBubble:\", props.comment.id);\n    this.props = props;\n    this.element = this.createElement();\n    console.log(\"📦 Element created:\", this.element);\n    this.attachEventListeners();\n    console.log(\"🎯 Event listeners attached\");\n\n    // Add global click listener to test if bubble receives clicks\n    document.addEventListener(\"click\", (e) => {\n      if (\n        e.target === this.element ||\n        this.element.contains(e.target as Node)\n      ) {\n        console.log(\n          \"🎯 Global click detected on bubble:\",\n          this.props.comment.id\n        );\n        console.log(\"🎯 Click target:\", e.target);\n        console.log(\"🎯 Bubble element:\", this.element);\n      }\n    });\n  }\n\n  private checkBubbleVisibility(): void {\n    const rect = this.element.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n\n    // Check what element is at the bubble's center point\n    const elementAtPoint = document.elementFromPoint(centerX, centerY);\n\n    console.log(\"👁️ Bubble visibility check:\", {\n      commentId: this.props.comment.id,\n      rect: rect,\n      centerPoint: { x: centerX, y: centerY },\n      elementAtPoint: elementAtPoint,\n      isOwnElement: elementAtPoint === this.element,\n      isVisible: rect.width > 0 && rect.height > 0,\n      computedStyle: {\n        display: getComputedStyle(this.element).display,\n        visibility: getComputedStyle(this.element).visibility,\n        opacity: getComputedStyle(this.element).opacity,\n        pointerEvents: getComputedStyle(this.element).pointerEvents,\n        zIndex: getComputedStyle(this.element).zIndex,\n      },\n    });\n  }\n\n  private testBubbleClickability(): void {\n    const rect = this.element.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n\n    // Check what element is at the bubble's center point\n    const elementAtPoint = document.elementFromPoint(centerX, centerY);\n\n    console.log(\"🧪 BUBBLE CLICKABILITY TEST:\", {\n      commentId: this.props.comment.id,\n      bubbleElement: this.element,\n      elementRect: rect,\n      elementAtCenter: elementAtPoint,\n      isClickable: elementAtPoint === this.element,\n      parentElement: this.element.parentElement,\n      parentDisplay: this.element.parentElement?.style.display,\n      parentComputedDisplay: this.element.parentElement\n        ? getComputedStyle(this.element.parentElement).display\n        : null,\n      bubbleStyles: {\n        display: getComputedStyle(this.element).display,\n        visibility: getComputedStyle(this.element).visibility,\n        opacity: getComputedStyle(this.element).opacity,\n        pointerEvents: getComputedStyle(this.element).pointerEvents,\n        zIndex: getComputedStyle(this.element).zIndex,\n        position: getComputedStyle(this.element).position,\n      },\n    });\n\n    // Try to trigger a click programmatically to test\n    console.log(\"🔄 Attempting programmatic click...\");\n    this.element.click();\n  }\n\n  private getStatusColor(): { bg: string; border: string; text: string } {\n    switch (this.props.comment.status) {\n      case CommentStatus.BUG:\n        return { bg: \"#dc3545\", border: \"#c82333\", text: \"white\" }; // Red\n      case CommentStatus.DEV_COMPLETED:\n        return { bg: \"#ffc107\", border: \"#e0a800\", text: \"black\" }; // Yellow\n      case CommentStatus.DONE:\n        return { bg: \"#28a745\", border: \"#1e7e34\", text: \"white\" }; // Green\n      case CommentStatus.ARCHIVED:\n        return { bg: \"#6c757d\", border: \"#545b62\", text: \"white\" }; // Gray\n      default:\n        return { bg: \"#007bff\", border: \"#0056b3\", text: \"white\" }; // Default blue\n    }\n  }\n\n  private createElement(): HTMLElement {\n    const bubble = document.createElement(\"div\");\n    bubble.className = \"uicm-comment-bubble\";\n    bubble.style.position = \"absolute\";\n    bubble.style.left = `${this.props.position.x}px`;\n    bubble.style.top = `${this.props.position.y}px`;\n    bubble.style.width = \"32px\";\n    bubble.style.height = \"32px\";\n    bubble.style.borderRadius = \"50%\";\n\n    const colors = this.getStatusColor();\n    bubble.style.backgroundColor = colors.bg;\n    bubble.style.border = `2px solid ${colors.border}`;\n    bubble.style.color = colors.text;\n\n    bubble.style.cursor = \"pointer\";\n    bubble.style.display = \"flex\";\n    bubble.style.alignItems = \"center\";\n    bubble.style.justifyContent = \"center\";\n    bubble.style.fontSize = \"16px\";\n    bubble.style.fontWeight = \"bold\";\n    bubble.style.zIndex = \"100\"; // Relative to interaction layer which has z-index 2\n    bubble.style.boxShadow = \"0 2px 8px rgba(0, 0, 0, 0.2)\";\n    bubble.style.transition = \"all 0.2s ease\";\n    bubble.style.position = \"relative\";\n\n    // Show chat icon instead of number\n    bubble.innerHTML = \"💬\";\n\n    // Create comment count badge\n    const commentCount = 1 + (this.props.comment.replies?.length || 0);\n    const countBadge = document.createElement(\"div\");\n    countBadge.className = \"uicm-comment-count-badge\";\n    countBadge.textContent = commentCount.toString();\n    countBadge.style.cssText = `\n      position: absolute;\n      top: -6px;\n      right: -6px;\n      background: ${colors.bg};\n      color: ${colors.text};\n      border: 2px solid ${colors.border};\n      border-radius: 50%;\n      width: 18px;\n      height: 18px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 10px;\n      font-weight: bold;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n      z-index: 101;\n    `;\n\n    bubble.appendChild(countBadge);\n\n    // Add status and role tooltip\n    const roleColors = getRoleColor(this.props.comment.role);\n    bubble.title = `Status: ${this.props.comment.status.toUpperCase()} | Role: ${this.props.comment.role.toUpperCase()} | Comments: ${commentCount}`;\n\n    // Add role indicator with color\n    const roleIndicator = document.createElement(\"div\");\n    roleIndicator.className = \"uicm-role-indicator\";\n    roleIndicator.style.cssText = `\n      position: absolute;\n      bottom: -2px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 8px;\n      height: 8px;\n      border-radius: 50%;\n      background: ${roleColors.border};\n      border: 1px solid white;\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n      z-index: 102;\n    `;\n\n    bubble.appendChild(roleIndicator);\n\n    console.log(\"💬 Chat bubble element created:\", {\n      className: bubble.className,\n      position: { x: this.props.position.x, y: this.props.position.y },\n      status: this.props.comment.status,\n      colors: colors,\n      commentCount: commentCount,\n    });\n\n    return bubble;\n  }\n\n  private attachEventListeners(): void {\n    console.log(\"🔗 Attaching event listeners to bubble\");\n\n    this.element.addEventListener(\"click\", this.handleClick);\n    console.log(\"✅ Click listener attached\");\n\n    this.element.addEventListener(\"mouseenter\", () => {\n      console.log(\"🐭 Mouse enter bubble\");\n      this.element.style.transform = \"scale(1.1)\";\n    });\n\n    this.element.addEventListener(\"mouseleave\", () => {\n      console.log(\"🐭 Mouse leave bubble\");\n      this.element.style.transform = \"scale(1)\";\n    });\n\n    // Listen for reply added events to refresh modal\n    document.addEventListener(\"uicm-reply-added\", (e: Event) => {\n      const customEvent = e as CustomEvent;\n      if (\n        customEvent.detail.commentId === this.props.comment.id &&\n        this.modal\n      ) {\n        console.log(\"🔄 Reply added event received, refreshing modal\");\n        const updatedComments = [\n          this.props.comment,\n          ...this.props.comment.replies,\n        ];\n        this.modal.updateComments(updatedComments);\n      }\n    });\n  }\n\n  private handleClick = (e: Event): void => {\n    console.log(\"🔵 CommentBubble clicked!\", this.props.comment.id);\n    console.log(\"🔵 Click event details:\", {\n      target: e.target,\n      currentTarget: e.currentTarget,\n      type: e.type,\n      bubbles: e.bubbles,\n      cancelable: e.cancelable,\n      eventPhase: e.eventPhase,\n      isTrusted: e.isTrusted,\n    });\n\n    console.log(\"🔵 Bubble element state:\", {\n      element: this.element,\n      parent: this.element.parentElement,\n      parentDisplay: this.element.parentElement?.style.display,\n      rect: this.element.getBoundingClientRect(),\n    });\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    // Get click position from mouse event\n    const mouseEvent = e as MouseEvent;\n    const clickPosition = {\n      x: mouseEvent.clientX || this.props.position.x,\n      y: mouseEvent.clientY || this.props.position.y,\n    };\n\n    console.log(\"🔄 About to show modal at click position:\", clickPosition);\n    this.showModal(clickPosition);\n  };\n\n  private showModal(position: { x: number; y: number }): void {\n    console.log(\"🔄 Creating modal for comment:\", this.props.comment.id);\n\n    // Destroy existing modal if any\n    if (this.modal) {\n      console.log(\"🗑️ Destroying existing modal\");\n      this.modal.destroy();\n      this.modal = null;\n    }\n\n    // Get all comments for this element (main comment + replies)\n    const allComments = [this.props.comment, ...this.props.comment.replies];\n    console.log(\"📝 Modal comments:\", allComments.length);\n\n    // Calculate initial modal position\n    const initialPosition = {\n      x: position.x + 30,\n      y: position.y,\n    };\n\n    // Create modal with initial position\n    this.modal = new CommentModal({\n      comments: allComments,\n      currentUser: this.props.currentUser,\n      position: initialPosition,\n      onClose: () => {\n        console.log(\"❌ Modal closed\");\n        if (this.modal) {\n          this.modal.destroy();\n          this.modal = null;\n        }\n      },\n      onAddReply: async (\n        commentId: string,\n        content: string,\n        user?: User,\n        attachments?: CommentAttachment[]\n      ) => {\n        console.log(\n          \"💬 Adding reply:\",\n          commentId,\n          content,\n          user?.name,\n          \"attachments:\",\n          attachments?.length || 0\n        );\n        await this.props.onReply(commentId, content, user, attachments);\n\n        // Update modal with refreshed comment data (including new reply)\n        if (this.modal) {\n          const updatedComments = [\n            this.props.comment,\n            ...this.props.comment.replies,\n          ];\n          this.modal.updateComments(updatedComments);\n        }\n\n        // Update comment count display\n        const commentCount = 1 + (this.props.comment.replies?.length || 0);\n        const countBadge = this.element.querySelector(\n          \".uicm-comment-count-badge\"\n        ) as HTMLElement;\n        if (countBadge) {\n          countBadge.textContent = commentCount.toString();\n        }\n        this.element.title = `Status: ${this.props.comment.status.toUpperCase()} | Comments: ${commentCount}`;\n      },\n      onStatusChange: async (commentId: string, status: CommentStatus) => {\n        console.log(\"🔄 Changing status:\", commentId, status);\n        await this.props.onStatusChange(commentId, status);\n        // Update bubble appearance\n        this.updateBubbleAppearance();\n      },\n      onDeleteComment: async (commentId: string) => {\n        console.log(\"🗑️ Deleting comment:\", commentId);\n        await this.props.onDelete(commentId);\n\n        // Update bubble appearance after deletion\n        this.updateBubbleAppearance();\n\n        // If this was the main comment being deleted, close modal\n        if (commentId === this.props.comment.id) {\n          if (this.modal) {\n            this.modal.destroy();\n            this.modal = null;\n          }\n        }\n      },\n    });\n\n    console.log(\"✅ Modal created, using CommentManager to show\");\n\n    // Use CommentManager for centralized modal management\n    this.props.onShowModal(this.modal);\n\n    // Add modal to interaction layer\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    if (interactionLayer) {\n      interactionLayer.appendChild(this.modal.getElement());\n      // Reposition modal to ensure it stays within viewport\n      this.modal.reposition();\n      console.log(\"🎯 Modal appended to interaction layer\");\n    }\n  }\n\n  public updateComment(comment: Comment): void {\n    console.log(\"🔄 CommentBubble.updateComment called:\", {\n      commentId: comment.id,\n      oldRepliesCount: this.props.comment.replies?.length || 0,\n      newRepliesCount: comment.replies?.length || 0,\n      modalExists: !!this.modal,\n    });\n\n    this.props.comment = comment;\n    this.updateBubbleAppearance();\n\n    // Update modal if it exists and is open\n    if (this.modal) {\n      console.log(\"🔄 Updating modal with new comment data\");\n      const updatedComments = [\n        this.props.comment,\n        ...this.props.comment.replies,\n      ];\n      this.modal.updateComments(updatedComments);\n    }\n  }\n\n  private updateBubbleAppearance(): void {\n    const colors = this.getStatusColor();\n    this.element.style.backgroundColor = colors.bg;\n    this.element.style.border = `2px solid ${colors.border}`;\n    this.element.style.color = colors.text;\n\n    const commentCount = 1 + (this.props.comment.replies?.length || 0);\n\n    // Update count badge\n    const countBadge = this.element.querySelector(\n      \".uicm-comment-count-badge\"\n    ) as HTMLElement;\n    if (countBadge) {\n      countBadge.textContent = commentCount.toString();\n      countBadge.style.background = colors.bg;\n      countBadge.style.color = colors.text;\n      countBadge.style.borderColor = colors.border;\n    }\n\n    // Update role indicator\n    const roleIndicator = this.element.querySelector(\n      \".uicm-role-indicator\"\n    ) as HTMLElement;\n    if (roleIndicator) {\n      const roleColors = getRoleColor(this.props.comment.role);\n      roleIndicator.style.background = roleColors.border;\n    }\n\n    this.element.title = `Status: ${this.props.comment.status.toUpperCase()} | Role: ${this.props.comment.role.toUpperCase()} | Comments: ${commentCount}`;\n\n    console.log(\"💬 Chat bubble appearance updated:\", {\n      status: this.props.comment.status,\n      role: this.props.comment.role,\n      colors: colors,\n      commentCount: commentCount,\n    });\n  }\n\n  public updatePosition(position: { x: number; y: number }): void {\n    this.props.position = position;\n    this.element.style.left = `${position.x}px`;\n    this.element.style.top = `${position.y}px`;\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public destroy(): void {\n    if (this.modal) {\n      this.modal.destroy();\n    }\n    this.element.removeEventListener(\"click\", this.handleClick);\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }\n\n  public testClickability(): void {\n    console.log(\"🧪 TESTING BUBBLE CLICKABILITY for:\", this.props.comment.id);\n    this.testBubbleClickability();\n  }\n}\n","import { User, CommentAttachment } from \"../types\";\nimport {\n  generateId,\n  constrainToViewport,\n  repositionInViewport,\n} from \"../utils/dom\";\nimport { base64UploadManager } from \"../utils/base64Upload\";\nimport { ImageModal } from \"./ImageModal\";\n\nexport interface CommentFormProps {\n  onSubmit: (\n    content: string,\n    userName?: string,\n    attachments?: CommentAttachment[]\n  ) => Promise<void>;\n  onCancel: () => void;\n  position: { x: number; y: number };\n  element: Element;\n  currentUser: User;\n}\n\nexport class CommentForm {\n  private element: HTMLElement;\n  private props: CommentFormProps;\n  private textarea!: HTMLTextAreaElement;\n  private nameInput!: HTMLInputElement;\n  private submitButton!: HTMLButtonElement;\n  private isSubmitting = false;\n  private selectedAttachments: CommentAttachment[] = [];\n\n  // Cache DOM elements to avoid repeated queries\n  private charCounter!: HTMLElement;\n  private avatar!: HTMLElement;\n  private imageModal: ImageModal | null = null;\n\n  constructor(props: CommentFormProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.setupEventListeners();\n  }\n\n  private addFilePreview(\n    attachment: CommentAttachment,\n    container: HTMLElement,\n    onRemove: () => void\n  ): void {\n    // Limit to 5 images\n    if (container.childElementCount >= 5) return;\n\n    const previewItem = document.createElement(\"div\");\n    previewItem.className = \"uicm-file-preview-item\";\n    previewItem.style.position = \"relative\";\n\n    if (attachment.type === \"image\") {\n      const imagePreview = document.createElement(\"img\");\n      imagePreview.className = \"uicm-file-preview-image\";\n      imagePreview.src = attachment.url;\n      imagePreview.alt = attachment.filename;\n      imagePreview.style.cursor = \"pointer\";\n\n      // Add click handler to open image modal\n      imagePreview.addEventListener(\"click\", () => {\n        if (this.imageModal) {\n          this.imageModal.destroy();\n        }\n        this.imageModal = new ImageModal(attachment.url);\n        this.imageModal.show();\n      });\n\n      previewItem.appendChild(imagePreview);\n    } else {\n      const fileIcon = document.createElement(\"span\");\n      fileIcon.className = \"uicm-file-preview-icon\";\n      fileIcon.innerHTML = \"📎\";\n      previewItem.appendChild(fileIcon);\n    }\n\n    // Only show file size (not name or url)\n    const fileSize = document.createElement(\"span\");\n    fileSize.className = \"uicm-file-preview-size\";\n    fileSize.textContent = this.formatFileSize(attachment.size);\n    previewItem.appendChild(fileSize);\n\n    // Remove button absolutely positioned top right\n    const removeButton = document.createElement(\"button\");\n    removeButton.className = \"uicm-file-preview-remove\";\n    removeButton.innerHTML = \"×\";\n    removeButton.type = \"button\";\n    removeButton.style.position = \"absolute\";\n    removeButton.style.top = \"2px\";\n    removeButton.style.right = \"2px\";\n    removeButton.style.zIndex = \"2\";\n    removeButton.onclick = () => {\n      previewItem.remove();\n      onRemove();\n    };\n    previewItem.appendChild(removeButton);\n\n    container.appendChild(previewItem);\n  }\n\n  private formatFileSize(bytes: number): string {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n  }\n\n  private createElement(): HTMLElement {\n    const form = document.createElement(\"div\");\n    form.className = \"uicm-comment-form\";\n    form.style.position = \"absolute\";\n    form.style.zIndex = \"10000\";\n\n    // Temporarily add to DOM to get accurate dimensions\n    document.body.appendChild(form);\n\n    // Constrain position to viewport\n    const constrainedPosition = constrainToViewport(form, this.props.position, {\n      padding: 20,\n      preferredSide: \"bottom\",\n    });\n\n    // Set constrained position\n    form.style.left = `${constrainedPosition.x}px`;\n    form.style.top = `${constrainedPosition.y}px`;\n\n    // Remove from DOM temporarily\n    document.body.removeChild(form);\n\n    // Header\n    const header = document.createElement(\"div\");\n    header.className = \"uicm-form-header\";\n\n    const title = document.createElement(\"h2\");\n    title.className = \"uicm-form-title\";\n    title.textContent = \"Add Comment\";\n\n    const closeButton = document.createElement(\"button\");\n    closeButton.className = \"uicm-close-button\";\n    closeButton.innerHTML = `\n      <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n      </svg>\n    `;\n    closeButton.setAttribute(\"aria-label\", \"Close\");\n    closeButton.onclick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.onCancel();\n    };\n\n    header.appendChild(title);\n    header.appendChild(closeButton);\n\n    // Content area\n    const content = document.createElement(\"div\");\n    content.className = \"uicm-form-content\";\n\n    // User info section\n    const userInfo = document.createElement(\"div\");\n    userInfo.className = \"uicm-user-info\";\n\n    const avatar = document.createElement(\"div\");\n    avatar.className = \"uicm-user-avatar\";\n    avatar.textContent = this.props.currentUser.name.charAt(0).toUpperCase();\n    if (this.props.currentUser.avatar) {\n      avatar.style.backgroundImage = `url(${this.props.currentUser.avatar})`;\n      avatar.style.backgroundSize = \"cover\";\n      avatar.textContent = \"\";\n    }\n\n    // Cache avatar element\n    this.avatar = avatar;\n\n    const userDetails = document.createElement(\"div\");\n    userDetails.className = \"uicm-user-details\";\n\n    // Editable name input\n    this.nameInput = document.createElement(\"input\");\n    this.nameInput.type = \"text\";\n    this.nameInput.className = \"uicm-user-name-input\";\n    this.nameInput.value = this.props.currentUser.name;\n    this.nameInput.placeholder = \"Your name\";\n    this.nameInput.maxLength = 50;\n\n    userDetails.appendChild(this.nameInput);\n\n    userInfo.appendChild(avatar);\n    userInfo.appendChild(userDetails);\n\n    // Textarea with enhanced features\n    this.textarea = document.createElement(\"textarea\");\n    this.textarea.placeholder = \"Write a comment...\";\n    this.textarea.className = \"uicm-comment-textarea\";\n    this.textarea.rows = 3;\n\n    // File upload section\n    const fileUploadSection = document.createElement(\"div\");\n    fileUploadSection.className = \"uicm-file-upload-section\";\n\n    const fileInput = document.createElement(\"input\");\n    fileInput.type = \"file\";\n    fileInput.className = \"uicm-file-input\";\n    fileInput.style.display = \"none\";\n    fileInput.accept = \"image/*,application/pdf,.doc,.docx,.txt,.zip,.rar\";\n    fileInput.multiple = true;\n\n    const fileUploadButton = document.createElement(\"button\");\n    fileUploadButton.className = \"uicm-file-upload-button\";\n    fileUploadButton.type = \"button\";\n    fileUploadButton.innerHTML = \"📎 Attach Files\";\n    fileUploadButton.onclick = () => fileInput.click();\n\n    const filePreviewContainer = document.createElement(\"div\");\n    filePreviewContainer.className = \"uicm-file-preview-container\";\n\n    // Handle file selection\n    fileInput.addEventListener(\"change\", async (e) => {\n      const files = (e.target as HTMLInputElement).files;\n      if (files) {\n        for (const file of Array.from(files)) {\n          try {\n            // Upload file using Base64UploadManager\n            const attachment = await base64UploadManager.uploadFile(file);\n            this.selectedAttachments.push(attachment);\n            this.addFilePreview(attachment, filePreviewContainer, () => {\n              this.selectedAttachments = this.selectedAttachments.filter(\n                (a) => a.id !== attachment.id\n              );\n              this.updateSubmitButton();\n            });\n          } catch (error) {\n            console.error(\"Failed to upload file:\", error);\n            const errorMessage =\n              error instanceof Error ? error.message : \"Unknown error\";\n            alert(`Failed to upload ${file.name}: ${errorMessage}`);\n          }\n        }\n\n        this.updateSubmitButton();\n      }\n    });\n\n    fileUploadSection.appendChild(fileInput);\n    fileUploadSection.appendChild(fileUploadButton);\n    fileUploadSection.appendChild(filePreviewContainer);\n\n    // Character counter\n    this.charCounter = document.createElement(\"div\");\n    this.charCounter.className = \"uicm-char-counter\";\n    this.charCounter.textContent = \"0 / 1000\";\n\n    // Action buttons\n    const actions = document.createElement(\"div\");\n    actions.className = \"uicm-form-actions\";\n\n    // Secondary actions\n    const secondaryActions = document.createElement(\"div\");\n    secondaryActions.className = \"uicm-secondary-actions\";\n\n    const emojiButton = document.createElement(\"button\");\n    emojiButton.className = \"uicm-emoji-button\";\n    emojiButton.innerHTML = \"😊\";\n    emojiButton.setAttribute(\"aria-label\", \"Add emoji\");\n    emojiButton.type = \"button\";\n\n    const mentionButton = document.createElement(\"button\");\n    mentionButton.className = \"uicm-mention-button\";\n    mentionButton.innerHTML = \"@\";\n    mentionButton.setAttribute(\"aria-label\", \"Mention someone\");\n    mentionButton.type = \"button\";\n\n    secondaryActions.appendChild(emojiButton);\n    secondaryActions.appendChild(mentionButton);\n\n    // Primary actions\n    const primaryActions = document.createElement(\"div\");\n    primaryActions.className = \"uicm-primary-actions\";\n\n    this.submitButton = document.createElement(\"button\");\n    this.submitButton.className = \"uicm-submit-button\";\n    this.submitButton.type = \"button\";\n    this.updateSubmitButton();\n\n    primaryActions.appendChild(this.submitButton);\n\n    actions.appendChild(secondaryActions);\n    actions.appendChild(primaryActions);\n\n    // Assemble form\n    content.appendChild(userInfo);\n    content.appendChild(this.textarea);\n    content.appendChild(this.charCounter); // move char counter right below textarea\n    content.appendChild(fileUploadSection);\n    content.appendChild(actions);\n\n    form.appendChild(header);\n    form.appendChild(content);\n\n    return form;\n  }\n\n  private setupEventListeners(): void {\n    // Prevent form from closing when clicking inside form\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      console.log(\"🔒 Form internal click - prevented propagation\");\n    });\n\n    // Prevent form from closing when interacting with form elements\n    this.element.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"mouseup\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keydown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keyup\", (e) => {\n      e.stopPropagation();\n    });\n\n    // Auto-resize textarea\n    this.textarea.addEventListener(\"input\", () => {\n      this.textarea.style.height = \"auto\";\n      this.textarea.style.height =\n        Math.min(this.textarea.scrollHeight, 200) + \"px\";\n      this.updateCharCounter();\n      this.updateSubmitButton();\n    });\n\n    // Handle paste events for images\n    this.textarea.addEventListener(\"paste\", async (e) => {\n      const items = e.clipboardData?.items;\n      if (items) {\n        for (let i = 0; i < items.length; i++) {\n          const item = items[i];\n          if (item.type.indexOf(\"image\") !== -1) {\n            e.preventDefault();\n            const file = item.getAsFile();\n            if (file) {\n              // Show loading state\n              const originalPlaceholder = this.textarea.placeholder;\n              this.textarea.placeholder = \"🔄 Processing image...\";\n              this.textarea.disabled = true;\n\n              // Show loading indicator\n              const loadingIndicator = document.createElement(\"div\");\n              loadingIndicator.className = \"uicm-paste-loading\";\n              loadingIndicator.innerHTML = `\n                <div class=\"uicm-loading-spinner\"></div>\n                <span>Processing image: ${file.name}</span>\n              `;\n              loadingIndicator.style.cssText = `\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background: rgba(255, 255, 255, 0.95);\n                backdrop-filter: blur(10px);\n                border: 1px solid rgba(59, 130, 246, 0.2);\n                border-radius: 12px;\n                padding: 16px 24px;\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                font-size: 14px;\n                color: #1e293b;\n                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n                z-index: 1000;\n              `;\n\n              const spinner = loadingIndicator.querySelector(\n                \".uicm-loading-spinner\"\n              ) as HTMLElement;\n              spinner.style.cssText = `\n                width: 20px;\n                height: 20px;\n                border: 2px solid #e2e8f0;\n                border-top: 2px solid #3b82f6;\n                border-radius: 50%;\n                animation: uicm-spin 1s linear infinite;\n              `;\n\n              this.element.appendChild(loadingIndicator);\n\n              try {\n                const attachment = await base64UploadManager.uploadFile(file);\n                this.selectedAttachments.push(attachment);\n\n                // Find file preview container\n                const filePreviewContainer = this.element.querySelector(\n                  \".uicm-file-preview-container\"\n                );\n                if (filePreviewContainer) {\n                  this.addFilePreview(\n                    attachment,\n                    filePreviewContainer as HTMLElement,\n                    () => {\n                      this.selectedAttachments =\n                        this.selectedAttachments.filter(\n                          (a) => a.id !== attachment.id\n                        );\n                      this.updateSubmitButton();\n                    }\n                  );\n                }\n\n                this.updateSubmitButton();\n                console.log(\n                  \"📸 Image pasted and uploaded:\",\n                  attachment.filename\n                );\n\n                // Show success message briefly\n                loadingIndicator.innerHTML = `\n                  <span style=\"color: #10b981;\">✅</span>\n                  <span>Image uploaded successfully!</span>\n                `;\n                setTimeout(() => {\n                  if (loadingIndicator.parentNode) {\n                    loadingIndicator.parentNode.removeChild(loadingIndicator);\n                  }\n                }, 1000);\n              } catch (error) {\n                console.error(\"Failed to paste image:\", error);\n                const errorMessage =\n                  error instanceof Error ? error.message : \"Unknown error\";\n\n                // Show error message\n                loadingIndicator.innerHTML = `\n                  <span style=\"color: #ef4444;\">❌</span>\n                  <span>Failed to upload: ${errorMessage}</span>\n                `;\n                setTimeout(() => {\n                  if (loadingIndicator.parentNode) {\n                    loadingIndicator.parentNode.removeChild(loadingIndicator);\n                  }\n                }, 3000);\n              } finally {\n                // Restore input state\n                this.textarea.placeholder = originalPlaceholder;\n                this.textarea.disabled = false;\n                this.textarea.focus();\n              }\n            }\n          }\n        }\n      }\n    });\n\n    // Update avatar when name changes\n    this.nameInput.addEventListener(\"input\", () => {\n      if (this.avatar && this.nameInput.value.trim()) {\n        this.avatar.textContent = this.nameInput.value\n          .trim()\n          .charAt(0)\n          .toUpperCase();\n      }\n      this.updateSubmitButton();\n    });\n\n    // Submit on Ctrl/Cmd + Enter\n    this.textarea.addEventListener(\"keydown\", (e) => {\n      if ((e.ctrlKey || e.metaKey) && e.key === \"Enter\") {\n        e.preventDefault();\n        this.handleSubmit();\n      }\n    });\n\n    // Focus textarea on mount - use requestAnimationFrame for better performance\n    requestAnimationFrame(() => {\n      this.textarea.focus();\n    });\n\n    // Submit button click\n    this.submitButton.onclick = async (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      await this.handleSubmit();\n    };\n  }\n\n  private updateCharCounter(): void {\n    const length = this.textarea.value.length;\n    const maxLength = 1000;\n\n    this.charCounter.textContent = `${length} / ${maxLength}`;\n\n    if (length > maxLength * 0.8) {\n      this.charCounter.classList.add(\"uicm-warning\");\n    } else {\n      this.charCounter.classList.remove(\"uicm-warning\");\n    }\n\n    if (length > maxLength) {\n      this.charCounter.classList.add(\"uicm-error\");\n    } else {\n      this.charCounter.classList.remove(\"uicm-error\");\n    }\n  }\n\n  private updateSubmitButton(): void {\n    const content = this.textarea.value.trim();\n    const userName = this.nameInput.value.trim();\n    const hasContent = content.length > 0;\n    const hasAttachments = this.selectedAttachments.length > 0;\n    const isValid =\n      (hasContent || hasAttachments) &&\n      userName.length > 0 &&\n      content.length <= 1000;\n\n    this.submitButton.disabled = !isValid || this.isSubmitting;\n\n    if (this.isSubmitting) {\n      this.submitButton.innerHTML = `\n        <div class=\"uicm-spinner\"></div>\n        <span>Posting...</span>\n      `;\n    } else {\n      const shortcut = navigator.platform.includes(\"Mac\") ? \"⌘\" : \"Ctrl\";\n      this.submitButton.innerHTML = `\n        <span>Post Comment</span>\n        <kbd>${shortcut} + Enter</kbd>\n      `;\n    }\n  }\n\n  private async handleSubmit(): Promise<void> {\n    const content = this.textarea.value.trim();\n    const userName = this.nameInput.value.trim();\n    const hasContent = content.length > 0;\n    const hasAttachments = this.selectedAttachments.length > 0;\n\n    if ((!hasContent && !hasAttachments) || !userName || content.length > 1000)\n      return;\n\n    this.isSubmitting = true;\n    this.updateSubmitButton();\n\n    try {\n      await this.props.onSubmit(\n        content,\n        userName,\n        this.selectedAttachments.length > 0\n          ? this.selectedAttachments\n          : undefined\n      );\n\n      // Clear form after successful submission\n      this.textarea.value = \"\";\n      this.selectedAttachments = [];\n\n      // Clear file preview container\n      const filePreviewContainer = this.element.querySelector(\n        \".uicm-file-preview-container\"\n      );\n      if (filePreviewContainer) {\n        filePreviewContainer.innerHTML = \"\";\n      }\n\n      // Clear file input\n      const fileInput = this.element.querySelector(\n        \".uicm-file-input\"\n      ) as HTMLInputElement;\n      if (fileInput) {\n        fileInput.value = \"\";\n      }\n\n      this.updateCharCounter();\n      this.updateSubmitButton();\n    } catch (error) {\n      console.error(\"Failed to submit comment:\", error);\n      this.showError(\"Failed to post comment. Please try again.\");\n    } finally {\n      this.isSubmitting = false;\n      this.updateSubmitButton();\n    }\n  }\n\n  private showError(message: string): void {\n    // Remove existing error\n    const existingError = this.element.querySelector(\".uicm-error-message\");\n    if (existingError) {\n      existingError.remove();\n    }\n\n    // Create new error message\n    const errorDiv = document.createElement(\"div\");\n    errorDiv.className = \"uicm-error-message\";\n    errorDiv.textContent = message;\n\n    // Insert before actions\n    const actions = this.element.querySelector(\".uicm-form-actions\");\n    if (actions) {\n      actions.parentNode?.insertBefore(errorDiv, actions);\n    }\n\n    // Auto-remove after 5 seconds\n    setTimeout(() => {\n      errorDiv.remove();\n    }, 5000);\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public reposition(): void {\n    // Reposition form to ensure it stays within viewport\n    repositionInViewport(this.element, {\n      padding: 20,\n      preferredSide: \"bottom\",\n    });\n  }\n\n  public destroy(): void {\n    if (this.imageModal) {\n      this.imageModal.destroy();\n      this.imageModal = null;\n    }\n    this.element.remove();\n  }\n}\n","/**\n * Mobile utilities for touch interactions and responsive design\n */\n\nexport interface TouchEventData {\n  x: number;\n  y: number;\n  timestamp: number;\n  target: Element;\n}\n\nexport interface SwipeGesture {\n  direction: \"left\" | \"right\" | \"up\" | \"down\";\n  distance: number;\n  duration: number;\n  startPoint: TouchEventData;\n  endPoint: TouchEventData;\n}\n\nexport interface PinchGesture {\n  scale: number;\n  center: { x: number; y: number };\n  startDistance: number;\n  currentDistance: number;\n}\n\n/**\n * Detects if the device supports touch\n */\nexport function isTouchDevice(): boolean {\n  return \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n}\n\n/**\n * Detects if the device is mobile based on screen size and user agent\n */\nexport function isMobileDevice(): boolean {\n  const userAgent = navigator.userAgent.toLowerCase();\n  const mobileKeywords = [\"android\", \"iphone\", \"ipad\", \"mobile\", \"tablet\"];\n  const hasKeyword = mobileKeywords.some((keyword) =>\n    userAgent.includes(keyword)\n  );\n  const hasSmallScreen = window.innerWidth <= 768;\n\n  return hasKeyword || hasSmallScreen;\n}\n\n/**\n * Gets the current viewport size\n */\nexport function getViewportSize(): { width: number; height: number } {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  };\n}\n\n/**\n * Checks if the device is in landscape mode\n */\nexport function isLandscape(): boolean {\n  return window.innerWidth > window.innerHeight;\n}\n\n/**\n * Touch gesture recognizer\n */\nexport class TouchGestureRecognizer {\n  private element: HTMLElement;\n  private isTracking: boolean = false;\n  private startTouch: TouchEventData | null = null;\n  private lastTouch: TouchEventData | null = null;\n  private onSwipe?: (gesture: SwipeGesture) => void;\n  private onTap?: (event: TouchEventData) => void;\n  private onLongPress?: (event: TouchEventData) => void;\n  private onPinch?: (gesture: PinchGesture) => void;\n\n  private readonly SWIPE_THRESHOLD = 50; // minimum distance for swipe\n  private readonly SWIPE_TIMEOUT = 500; // maximum time for swipe\n  private readonly TAP_TIMEOUT = 300; // maximum time for tap\n  private readonly LONG_PRESS_TIMEOUT = 500; // minimum time for long press\n\n  private longPressTimer: number | null = null;\n  private tapTimer: number | null = null;\n\n  constructor(\n    element: HTMLElement,\n    options: {\n      onSwipe?: (gesture: SwipeGesture) => void;\n      onTap?: (event: TouchEventData) => void;\n      onLongPress?: (event: TouchEventData) => void;\n      onPinch?: (gesture: PinchGesture) => void;\n    } = {}\n  ) {\n    this.element = element;\n    this.onSwipe = options.onSwipe;\n    this.onTap = options.onTap;\n    this.onLongPress = options.onLongPress;\n    this.onPinch = options.onPinch;\n\n    this.attachEventListeners();\n  }\n\n  private attachEventListeners(): void {\n    this.element.addEventListener(\"touchstart\", this.handleTouchStart, {\n      passive: false,\n    });\n    this.element.addEventListener(\"touchmove\", this.handleTouchMove, {\n      passive: false,\n    });\n    this.element.addEventListener(\"touchend\", this.handleTouchEnd, {\n      passive: false,\n    });\n    this.element.addEventListener(\"touchcancel\", this.handleTouchCancel, {\n      passive: false,\n    });\n  }\n\n  private handleTouchStart = (e: TouchEvent): void => {\n    if (e.touches.length === 1) {\n      // Single touch\n      const touch = e.touches[0];\n      this.startTouch = this.createTouchEventData(touch, e.target as Element);\n      this.lastTouch = this.startTouch;\n      this.isTracking = true;\n\n      // Start long press timer\n      this.longPressTimer = window.setTimeout(() => {\n        if (this.isTracking && this.startTouch && this.onLongPress) {\n          this.onLongPress(this.startTouch);\n        }\n      }, this.LONG_PRESS_TIMEOUT);\n    } else if (e.touches.length === 2 && this.onPinch) {\n      // Multi-touch for pinch\n      this.handlePinchStart(e);\n    }\n  };\n\n  private handleTouchMove = (e: TouchEvent): void => {\n    if (!this.isTracking) return;\n\n    if (e.touches.length === 1) {\n      const touch = e.touches[0];\n      this.lastTouch = this.createTouchEventData(touch, e.target as Element);\n\n      // Cancel long press on move\n      if (this.longPressTimer) {\n        clearTimeout(this.longPressTimer);\n        this.longPressTimer = null;\n      }\n\n      // Prevent default to avoid scrolling during gesture\n      e.preventDefault();\n    } else if (e.touches.length === 2 && this.onPinch) {\n      this.handlePinchMove(e);\n    }\n  };\n\n  private handleTouchEnd = (e: TouchEvent): void => {\n    if (!this.isTracking || !this.startTouch || !this.lastTouch) return;\n\n    this.isTracking = false;\n\n    // Clear timers\n    if (this.longPressTimer) {\n      clearTimeout(this.longPressTimer);\n      this.longPressTimer = null;\n    }\n\n    const duration = this.lastTouch.timestamp - this.startTouch.timestamp;\n    const distance = this.getDistance(this.startTouch, this.lastTouch);\n\n    if (distance < this.SWIPE_THRESHOLD && duration < this.TAP_TIMEOUT) {\n      // Tap gesture\n      if (this.onTap) {\n        this.onTap(this.startTouch);\n      }\n    } else if (\n      distance >= this.SWIPE_THRESHOLD &&\n      duration < this.SWIPE_TIMEOUT\n    ) {\n      // Swipe gesture\n      if (this.onSwipe) {\n        const direction = this.getSwipeDirection(\n          this.startTouch,\n          this.lastTouch\n        );\n        const gesture: SwipeGesture = {\n          direction,\n          distance,\n          duration,\n          startPoint: this.startTouch,\n          endPoint: this.lastTouch,\n        };\n        this.onSwipe(gesture);\n      }\n    }\n\n    this.startTouch = null;\n    this.lastTouch = null;\n  };\n\n  private handleTouchCancel = (): void => {\n    this.isTracking = false;\n    this.startTouch = null;\n    this.lastTouch = null;\n\n    if (this.longPressTimer) {\n      clearTimeout(this.longPressTimer);\n      this.longPressTimer = null;\n    }\n  };\n\n  private handlePinchStart(e: TouchEvent): void {\n    // Implement pinch gesture logic if needed\n    // For now, just prevent default\n    e.preventDefault();\n  }\n\n  private handlePinchMove(e: TouchEvent): void {\n    // Implement pinch gesture logic if needed\n    e.preventDefault();\n  }\n\n  private createTouchEventData(touch: Touch, target: Element): TouchEventData {\n    return {\n      x: touch.clientX,\n      y: touch.clientY,\n      timestamp: Date.now(),\n      target,\n    };\n  }\n\n  private getDistance(start: TouchEventData, end: TouchEventData): number {\n    const dx = end.x - start.x;\n    const dy = end.y - start.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  private getSwipeDirection(\n    start: TouchEventData,\n    end: TouchEventData\n  ): SwipeGesture[\"direction\"] {\n    const dx = end.x - start.x;\n    const dy = end.y - start.y;\n\n    if (Math.abs(dx) > Math.abs(dy)) {\n      return dx > 0 ? \"right\" : \"left\";\n    } else {\n      return dy > 0 ? \"down\" : \"up\";\n    }\n  }\n\n  public destroy(): void {\n    this.element.removeEventListener(\"touchstart\", this.handleTouchStart);\n    this.element.removeEventListener(\"touchmove\", this.handleTouchMove);\n    this.element.removeEventListener(\"touchend\", this.handleTouchEnd);\n    this.element.removeEventListener(\"touchcancel\", this.handleTouchCancel);\n\n    if (this.longPressTimer) {\n      clearTimeout(this.longPressTimer);\n    }\n    if (this.tapTimer) {\n      clearTimeout(this.tapTimer);\n    }\n  }\n}\n\n/**\n * Responsive breakpoints utility\n */\nexport class ResponsiveBreakpoints {\n  private static readonly BREAKPOINTS = {\n    xs: 0,\n    sm: 576,\n    md: 768,\n    lg: 992,\n    xl: 1200,\n    xxl: 1400,\n  };\n\n  static getCurrentBreakpoint(): string {\n    const width = window.innerWidth;\n\n    if (width >= this.BREAKPOINTS.xxl) return \"xxl\";\n    if (width >= this.BREAKPOINTS.xl) return \"xl\";\n    if (width >= this.BREAKPOINTS.lg) return \"lg\";\n    if (width >= this.BREAKPOINTS.md) return \"md\";\n    if (width >= this.BREAKPOINTS.sm) return \"sm\";\n    return \"xs\";\n  }\n\n  static isMobile(): boolean {\n    return window.innerWidth < this.BREAKPOINTS.md;\n  }\n\n  static isTablet(): boolean {\n    return (\n      window.innerWidth >= this.BREAKPOINTS.md &&\n      window.innerWidth < this.BREAKPOINTS.lg\n    );\n  }\n\n  static isDesktop(): boolean {\n    return window.innerWidth >= this.BREAKPOINTS.lg;\n  }\n}\n\n/**\n * Viewport positioning utility for mobile\n */\nexport class ViewportPositioning {\n  static adjustPositionForMobile(\n    element: HTMLElement,\n    targetPosition: { x: number; y: number },\n    options: {\n      padding?: number;\n      preferredSide?: \"top\" | \"bottom\" | \"left\" | \"right\";\n      allowOverflow?: boolean;\n    } = {}\n  ): { x: number; y: number } {\n    const {\n      padding = 16,\n      preferredSide = \"bottom\",\n      allowOverflow = false,\n    } = options;\n    const viewport = getViewportSize();\n    const elementRect = element.getBoundingClientRect();\n\n    let { x, y } = targetPosition;\n\n    // Adjust horizontal position\n    if (x + elementRect.width > viewport.width - padding) {\n      x = viewport.width - elementRect.width - padding;\n    }\n    if (x < padding) {\n      x = padding;\n    }\n\n    // Adjust vertical position\n    if (y + elementRect.height > viewport.height - padding) {\n      if (preferredSide === \"top\") {\n        y = targetPosition.y - elementRect.height - padding;\n      } else {\n        y = viewport.height - elementRect.height - padding;\n      }\n    }\n    if (y < padding) {\n      y = padding;\n    }\n\n    return { x, y };\n  }\n\n  static centerInViewport(element: HTMLElement): { x: number; y: number } {\n    const viewport = getViewportSize();\n    const elementRect = element.getBoundingClientRect();\n\n    return {\n      x: (viewport.width - elementRect.width) / 2,\n      y: (viewport.height - elementRect.height) / 2,\n    };\n  }\n\n  static getOptimalPosition(\n    element: HTMLElement,\n    targetElement: HTMLElement,\n    options: {\n      placement?: \"top\" | \"bottom\" | \"left\" | \"right\" | \"auto\";\n      offset?: number;\n      padding?: number;\n    } = {}\n  ): { x: number; y: number; placement: string } {\n    const { placement = \"auto\", offset = 8, padding = 16 } = options;\n    const viewport = getViewportSize();\n    const targetRect = targetElement.getBoundingClientRect();\n    const elementRect = element.getBoundingClientRect();\n\n    const positions = {\n      top: {\n        x: targetRect.left + (targetRect.width - elementRect.width) / 2,\n        y: targetRect.top - elementRect.height - offset,\n      },\n      bottom: {\n        x: targetRect.left + (targetRect.width - elementRect.width) / 2,\n        y: targetRect.bottom + offset,\n      },\n      left: {\n        x: targetRect.left - elementRect.width - offset,\n        y: targetRect.top + (targetRect.height - elementRect.height) / 2,\n      },\n      right: {\n        x: targetRect.right + offset,\n        y: targetRect.top + (targetRect.height - elementRect.height) / 2,\n      },\n    };\n\n    if (placement !== \"auto\") {\n      const pos = positions[placement];\n      return { ...pos, placement };\n    }\n\n    // Auto placement - find the best position\n    const placements = [\"bottom\", \"top\", \"right\", \"left\"] as const;\n\n    for (const p of placements) {\n      const pos = positions[p];\n      const fitsHorizontally =\n        pos.x >= padding &&\n        pos.x + elementRect.width <= viewport.width - padding;\n      const fitsVertically =\n        pos.y >= padding &&\n        pos.y + elementRect.height <= viewport.height - padding;\n\n      if (fitsHorizontally && fitsVertically) {\n        return { ...pos, placement: p };\n      }\n    }\n\n    // If no position fits perfectly, use bottom with adjustments\n    const pos = positions.bottom;\n    return {\n      x: Math.max(\n        padding,\n        Math.min(pos.x, viewport.width - elementRect.width - padding)\n      ),\n      y: Math.max(\n        padding,\n        Math.min(pos.y, viewport.height - elementRect.height - padding)\n      ),\n      placement: \"bottom\",\n    };\n  }\n}\n\n/**\n * Mobile-specific CSS utilities\n */\nexport function addMobileCSS(): void {\n  if (document.getElementById(\"uicm-mobile-styles\")) return;\n\n  const style = document.createElement(\"style\");\n  style.id = \"uicm-mobile-styles\";\n  style.textContent = `\n    @media (max-width: 768px) {\n      .uicm-comment-form {\n        width: calc(100vw - 32px) !important;\n        max-width: none !important;\n        min-width: 280px !important;\n      }\n      \n      .uicm-comment-bubble {\n        min-width: 40px !important;\n        min-height: 40px !important;\n        font-size: 14px !important;\n      }\n      \n      .uicm-comment-popup {\n        width: calc(100vw - 32px) !important;\n        max-width: none !important;\n        max-height: calc(100vh - 64px) !important;\n        overflow-y: auto !important;\n      }\n      \n      .uicm-textarea {\n        font-size: 16px !important; /* Prevents zoom on iOS */\n        min-height: 80px !important;\n      }\n      \n      .uicm-btn {\n        min-height: 44px !important; /* iOS touch target size */\n        padding: 12px 20px !important;\n        font-size: 16px !important;\n      }\n      \n      .uicm-form-actions {\n        gap: 12px !important;\n      }\n      \n      .uicm-form-help {\n        font-size: 14px !important;\n        padding: 8px !important;\n      }\n    }\n    \n    @media (max-width: 480px) {\n      .uicm-comment-form {\n        width: calc(100vw - 16px) !important;\n      }\n      \n      .uicm-comment-popup {\n        width: calc(100vw - 16px) !important;\n        max-height: calc(100vh - 32px) !important;\n      }\n      \n      .uicm-form-actions {\n        flex-direction: column !important;\n      }\n      \n      .uicm-btn {\n        width: 100% !important;\n      }\n    }\n    \n    /* Touch-friendly improvements */\n    .uicm-comment-bubble {\n      -webkit-tap-highlight-color: transparent !important;\n      touch-action: manipulation !important;\n    }\n    \n    .uicm-btn {\n      -webkit-tap-highlight-color: transparent !important;\n      touch-action: manipulation !important;\n    }\n    \n    .uicm-textarea {\n      -webkit-tap-highlight-color: transparent !important;\n      touch-action: manipulation !important;\n    }\n    \n    /* Prevent zooming on inputs */\n    .uicm-textarea,\n    .uicm-input {\n      font-size: 16px !important;\n    }\n  `;\n\n  document.head.appendChild(style);\n}\n\n/**\n * Removes mobile-specific CSS\n */\nexport function removeMobileCSS(): void {\n  const style = document.getElementById(\"uicm-mobile-styles\");\n  if (style) {\n    style.remove();\n  }\n}\n","/**\n * Throttle function - limits function execution to once per specified interval\n */\nexport function throttle<T extends (...args: any[]) => void>(\n  func: T,\n  delay: number\n): T {\n  let lastCall = 0;\n  let timeout: number | null = null;\n\n  return ((...args: Parameters<T>) => {\n    const now = Date.now();\n\n    if (now - lastCall >= delay) {\n      lastCall = now;\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      func(...args);\n    } else if (!timeout) {\n      timeout = window.setTimeout(() => {\n        lastCall = Date.now();\n        timeout = null;\n        func(...args);\n      }, delay - (now - lastCall));\n    }\n  }) as T;\n}\n\n/**\n * Debounce function - delays function execution until after specified delay\n */\nexport function debounce<T extends (...args: any[]) => void>(\n  func: T,\n  delay: number\n): T {\n  let timeout: number | null = null;\n\n  return ((...args: Parameters<T>) => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    timeout = window.setTimeout(() => {\n      timeout = null;\n      func(...args);\n    }, delay);\n  }) as T;\n}\n\n/**\n * Request animation frame throttle for smooth animations\n */\nexport function rafThrottle<T extends (...args: any[]) => void>(func: T): T {\n  let rafId: number | null = null;\n\n  return ((...args: Parameters<T>) => {\n    if (rafId) {\n      return;\n    }\n\n    rafId = requestAnimationFrame(() => {\n      rafId = null;\n      func(...args);\n    });\n  }) as T;\n}\n\n/**\n * Intersection Observer utility for efficient element visibility tracking\n */\nexport class VisibilityObserver {\n  private observer: IntersectionObserver;\n  private callbacks: Map<Element, (isVisible: boolean) => void> = new Map();\n\n  constructor(options: IntersectionObserverInit = {}) {\n    this.observer = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        const callback = this.callbacks.get(entry.target);\n        if (callback) {\n          callback(entry.isIntersecting);\n        }\n      });\n    }, options);\n  }\n\n  observe(element: Element, callback: (isVisible: boolean) => void): void {\n    this.callbacks.set(element, callback);\n    this.observer.observe(element);\n  }\n\n  unobserve(element: Element): void {\n    this.callbacks.delete(element);\n    this.observer.unobserve(element);\n  }\n\n  disconnect(): void {\n    this.callbacks.clear();\n    this.observer.disconnect();\n  }\n}\n\n/**\n * Efficient event batching for high-frequency events\n */\nexport class EventBatcher {\n  private queue: Array<() => void> = [];\n  private isProcessing = false;\n\n  add(callback: () => void): void {\n    this.queue.push(callback);\n    if (!this.isProcessing) {\n      this.process();\n    }\n  }\n\n  private process(): void {\n    if (this.queue.length === 0) {\n      this.isProcessing = false;\n      return;\n    }\n\n    this.isProcessing = true;\n    requestAnimationFrame(() => {\n      const callbacks = this.queue.splice(0);\n      callbacks.forEach((callback) => callback());\n      this.process();\n    });\n  }\n}\n\n/**\n * Memory-efficient cache with LRU eviction\n */\nexport class LRUCache<K, V> {\n  private cache: Map<K, V> = new Map();\n  private maxSize: number;\n\n  constructor(maxSize: number = 100) {\n    this.maxSize = maxSize;\n  }\n\n  get(key: K): V | undefined {\n    const value = this.cache.get(key);\n    if (value !== undefined) {\n      // Move to end (most recently used)\n      this.cache.delete(key);\n      this.cache.set(key, value);\n    }\n    return value;\n  }\n\n  set(key: K, value: V): void {\n    if (this.cache.has(key)) {\n      this.cache.delete(key);\n    } else if (this.cache.size >= this.maxSize) {\n      // Remove least recently used (first item)\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey !== undefined) {\n        this.cache.delete(firstKey);\n      }\n    }\n    this.cache.set(key, value);\n  }\n\n  clear(): void {\n    this.cache.clear();\n  }\n}\n","/**\n * Generate a stable XPath for a DOM element\n */\nexport function getElementXPath(element: Element): string {\n  if (element.id !== \"\") {\n    return `//*[@id=\"${element.id}\"]`;\n  }\n\n  if (element === document.body) {\n    return \"/html/body\";\n  }\n\n  let ix = 0;\n  const siblings = element.parentNode?.childNodes || [];\n\n  for (let i = 0; i < siblings.length; i++) {\n    const sibling = siblings[i];\n    if (sibling === element) {\n      const tagName = element.tagName.toLowerCase();\n      const parent = element.parentElement;\n      if (parent) {\n        const parentXPath = getElementXPath(parent);\n        return `${parentXPath}/${tagName}[${ix + 1}]`;\n      }\n      return `/${tagName}[${ix + 1}]`;\n    }\n    if (\n      sibling.nodeType === 1 &&\n      (sibling as Element).tagName === element.tagName\n    ) {\n      ix++;\n    }\n  }\n\n  throw new Error(\"Unable to generate XPath for element\");\n}\n\n/**\n * Get element by XPath\n */\nexport function getElementByXPath(xpath: string): Element | null {\n  try {\n    const result = document.evaluate(\n      xpath,\n      document,\n      null,\n      XPathResult.FIRST_ORDERED_NODE_TYPE,\n      null\n    );\n    return result.singleNodeValue as Element;\n  } catch (error) {\n    console.warn(\"Failed to resolve XPath:\", xpath, error);\n    return null;\n  }\n}\n\n/**\n * Generate a more robust CSS selector for fallback\n */\nexport function getElementSelector(element: Element): string {\n  if (element.id) {\n    return `#${element.id}`;\n  }\n\n  let selector = element.tagName.toLowerCase();\n\n  if (element.className) {\n    const classes = Array.from(element.classList)\n      .filter((cls) => !cls.startsWith(\"uicm-\")) // Exclude our SDK classes\n      .slice(0, 3) // Limit to first 3 classes\n      .join(\".\");\n    if (classes) {\n      selector += `.${classes}`;\n    }\n  }\n\n  // Add nth-child if needed for uniqueness\n  const parent = element.parentElement;\n  if (parent) {\n    const siblings = Array.from(parent.children).filter(\n      (child) => child.tagName === element.tagName\n    );\n    if (siblings.length > 1) {\n      const index = siblings.indexOf(element) + 1;\n      selector += `:nth-of-type(${index})`;\n    }\n  }\n\n  return selector;\n}\n\n/**\n * Validate if an element still exists and is visible\n */\nexport function isElementValid(element: Element): boolean {\n  const htmlElement = element as HTMLElement;\n  return (\n    element.isConnected &&\n    htmlElement.offsetParent !== null &&\n    getComputedStyle(element).display !== \"none\" &&\n    getComputedStyle(element).visibility !== \"hidden\"\n  );\n}\n","import {\n  Comment,\n  CommentMode,\n  CommentSDKConfig,\n  CommentStatus,\n  User,\n  CommentAttachment,\n} from \"../types\";\nimport { CommentBubble } from \"../components/CommentBubble\";\nimport { CommentForm } from \"../components/CommentForm\";\nimport { DebugIcon } from \"../components/DebugIcon\";\nimport {\n  debounce,\n  generateId,\n  getCommentPositionFromClick,\n  getXPath,\n} from \"../utils/dom\";\nimport {\n  addMobileCSS,\n  isMobileDevice,\n  isTouchDevice,\n  removeMobileCSS,\n  TouchGestureRecognizer,\n} from \"../utils/mobile\";\nimport {\n  EventBatcher,\n  LRUCache,\n  rafThrottle,\n  throttle,\n  VisibilityObserver,\n} from \"../utils/performance\";\nimport {\n  getElementByXPath,\n  getElementXPath,\n  isElementValid,\n} from \"../utils/xpath\";\n\nexport class CommentManager {\n  private config: CommentSDKConfig;\n  private comments: Comment[] = [];\n  private commentBubbles: Map<string, CommentBubble> = new Map();\n  private activeForm: CommentForm | null = null;\n  private activeModal: any | null = null; // For comment modals\n  private activeOverlay: HTMLElement | null = null; // For event blocking\n  private mode: CommentMode = \"normal\";\n  private root: HTMLElement;\n  private mutationTimeout: number | undefined = undefined;\n  private escKeyHandler: ((e: KeyboardEvent) => void) | null = null;\n\n  // Performance optimizations\n  private visibilityObserver: VisibilityObserver;\n  private eventBatcher: EventBatcher;\n  private positionCache: LRUCache<string, { x: number; y: number }>;\n  private throttledUpdatePositions = throttle(() => {\n    this.updateBubblePositions();\n  }, 100);\n  private rafUpdatePositions = rafThrottle(() => {\n    this.updateBubblePositions();\n  });\n\n  // Mobile support\n  private isMobile: boolean;\n  private touchGestureRecognizer: TouchGestureRecognizer | null = null;\n\n  private debouncedUpdatePositions = debounce(() => {\n    this.updateBubblePositions();\n  }, 100);\n\n  constructor(config: CommentSDKConfig, root: HTMLElement) {\n    this.config = config;\n    this.root = root;\n\n    // Initialize performance optimizations\n    this.visibilityObserver = new VisibilityObserver({\n      threshold: 0.1,\n      rootMargin: \"50px\",\n    });\n    this.eventBatcher = new EventBatcher();\n    this.positionCache = new LRUCache(50);\n\n    // Initialize mobile support\n    this.isMobile = isMobileDevice();\n    if (this.isMobile) {\n      addMobileCSS();\n    }\n\n    this.attachEventListeners();\n  }\n\n  private attachEventListeners(): void {\n    // ESC key handler to exit comment mode and close components\n    this.escKeyHandler = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        console.log(\"🔑 ESC pressed\");\n\n        // If modal or form is active, close them first\n        if (this.activeModal || this.activeForm) {\n          this.closeActiveComponents();\n          e.preventDefault();\n          e.stopPropagation();\n        }\n        // If in comment mode with no active components, exit comment mode\n        else if (this.mode === \"comment\") {\n          this.setMode(\"normal\");\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", this.escKeyHandler);\n\n    // Throttle scroll for better performance - only when in comment mode\n    const handleScroll = throttle(() => {\n      // Only update if we have bubbles and are in comment mode\n      if (this.commentBubbles.size > 0 && this.mode === \"comment\") {\n        this.updateBubblePositions();\n      }\n    }, 16); // ~60fps\n\n    const handleResize = debounce(() => {\n      // Only update if we have bubbles and are in comment mode\n      if (this.commentBubbles.size > 0 && this.mode === \"comment\") {\n        // Clear cache on resize\n        this.positionCache.clear();\n        this.updateBubblePositions();\n      }\n    }, 100);\n\n    window.addEventListener(\"scroll\", handleScroll, {\n      passive: true,\n    });\n    window.addEventListener(\"resize\", handleResize);\n\n    // Also listen for orientation change on mobile\n    window.addEventListener(\"orientationchange\", () => {\n      // Only update if we have bubbles and are in comment mode\n      if (this.commentBubbles.size > 0 && this.mode === \"comment\") {\n        // Clear cache on orientation change\n        this.positionCache.clear();\n        // Add delay for orientation change to complete\n        setTimeout(() => {\n          this.updateBubblePositions();\n        }, 100);\n      }\n    });\n\n    // Listen for DOM changes that might affect element positions\n    if (typeof MutationObserver !== \"undefined\") {\n      const observer = new MutationObserver((mutations) => {\n        // Skip if no bubbles to update or not in comment mode\n        if (this.commentBubbles.size === 0 || this.mode !== \"comment\") {\n          return;\n        }\n\n        let shouldUpdate = false;\n\n        // Filter out SDK-related mutations to avoid infinite loops\n        for (const mutation of mutations) {\n          const target = mutation.target as Element;\n\n          // Skip if mutation is on SDK elements\n          if (\n            target.closest(\"[data-uicm-element]\") ||\n            target.classList?.contains(\"uicm-highlight\") ||\n            target.id?.startsWith(\"uicm-\")\n          ) {\n            continue;\n          }\n\n          // Only update for meaningful changes\n          if (\n            mutation.type === \"childList\" ||\n            (mutation.type === \"attributes\" &&\n              [\"style\", \"class\"].indexOf(mutation.attributeName!) !== -1)\n          ) {\n            shouldUpdate = true;\n            break;\n          }\n        }\n\n        if (shouldUpdate) {\n          // Debounce DOM mutation updates\n          clearTimeout(this.mutationTimeout);\n          this.mutationTimeout = setTimeout(() => {\n            this.updateBubblePositions();\n          }, 100); // Increased debounce time\n        }\n      });\n\n      observer.observe(document.body, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        attributeFilter: [\"style\", \"class\"],\n      });\n    }\n\n    // Add event listeners\n    document.addEventListener(\"click\", this.handleElementClick);\n    document.addEventListener(\"mouseenter\", this.handleElementMouseEnter, true);\n    document.addEventListener(\"mouseleave\", this.handleElementMouseLeave, true);\n\n    // Add touch gesture support for mobile\n    if (this.isMobile && isTouchDevice()) {\n      this.touchGestureRecognizer = new TouchGestureRecognizer(document.body, {\n        onTap: (event) => {\n          if (this.mode === \"comment\") {\n            // Convert touch event to mouse event-like object\n            const mouseEvent = new MouseEvent(\"click\", {\n              clientX: event.x,\n              clientY: event.y,\n              bubbles: true,\n              cancelable: true,\n            });\n            Object.defineProperty(mouseEvent, \"target\", {\n              value: event.target,\n              writable: false,\n            });\n            this.handleElementClick(mouseEvent);\n          }\n        },\n        onLongPress: (event) => {\n          if (this.mode === \"normal\") {\n            // Enable comment mode on long press\n            this.setMode(\"comment\");\n          }\n        },\n      });\n    }\n\n    // Initial position update only if needed\n    setTimeout(() => {\n      if (this.commentBubbles.size > 0) {\n        this.forceUpdateBubblePositions();\n      }\n    }, 100);\n  }\n\n  private handleElementClick = (e: Event): void => {\n    console.log(\"🔍 handleElementClick called\", {\n      mode: this.mode,\n      target: e.target,\n      currentTarget: e.currentTarget,\n      targetElement: (e.target as HTMLElement)?.tagName,\n      targetClass: (e.target as HTMLElement)?.className,\n    });\n\n    if (this.mode !== \"comment\") {\n      console.log(\"❌ Not in comment mode, ignoring click\");\n      return;\n    }\n\n    // Check if we're navigating from sidebar (prevent form opening)\n    if ((window as any).uicmIsNavigatingFromSidebar) {\n      console.log(\"🔒 Navigating from sidebar, preventing form opening\");\n      return;\n    }\n\n    const mouseEvent = e as MouseEvent;\n    const clickTarget = e.target as HTMLElement;\n\n    // Check if click is on a comment bubble - let bubble handle it\n    if (\n      clickTarget.classList.contains(\"uicm-comment-bubble\") ||\n      clickTarget.closest(\".uicm-comment-bubble\")\n    ) {\n      console.log(\"🔵 Click on bubble, letting bubble handle it\");\n      return;\n    }\n\n    // Check if click is inside form layer or any SDK element\n    const formLayer = document.querySelector(\".uicm-comment-form\");\n    if (formLayer && formLayer.contains(clickTarget)) {\n      console.log(\"❌ Click inside form layer, ignoring\");\n      return;\n    }\n\n    console.log(\"🎯 Processing element click for new comment...\");\n\n    // Temporarily hide all SDK elements\n    const sdkElements = document.querySelectorAll(\"[data-uicm-element]\");\n    const originalDisplay: string[] = [];\n    sdkElements.forEach((el, index) => {\n      const htmlEl = el as HTMLElement;\n      originalDisplay[index] = htmlEl.style.display;\n      htmlEl.style.display = \"none\";\n    });\n\n    // Get the actual element under the click point\n    const target = document.elementFromPoint(\n      mouseEvent.clientX,\n      mouseEvent.clientY\n    ) as Element;\n\n    // Restore SDK elements\n    sdkElements.forEach((el, index) => {\n      const htmlEl = el as HTMLElement;\n      htmlEl.style.display = originalDisplay[index];\n    });\n\n    console.log(\"🎯 Click target:\", {\n      element: target,\n      tagName: target?.tagName,\n      id: target?.id,\n      className: target?.className,\n      xpath: target ? getElementXPath(target) : null,\n    });\n\n    // Ignore if no target found or if it's an SDK element\n    if (!target || target.closest(\"[data-uicm-element]\")) {\n      console.log(\"❌ Invalid target or SDK element, ignoring\");\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { position, relativePosition } = getCommentPositionFromClick(target, {\n      clientX: mouseEvent.clientX,\n      clientY: mouseEvent.clientY,\n    });\n\n    this.showCommentForm(target, position, relativePosition);\n  };\n\n  private handleElementMouseEnter = (e: MouseEvent): void => {\n    // Only process highlights in comment mode\n    if (this.mode !== \"comment\") {\n      return;\n    }\n\n    const target = e.target as HTMLElement;\n    if (target.hasAttribute(\"data-uicm-element\")) return;\n\n    const highlightLayer = document.getElementById(\"uicm-highlight-layer\");\n    if (!highlightLayer) return;\n\n    const rect = target.getBoundingClientRect();\n    const highlight = document.createElement(\"div\");\n    highlight.className = \"uicm-highlight\";\n    highlight.style.position = \"absolute\";\n    highlight.style.top = `${rect.top}px`;\n    highlight.style.left = `${rect.left}px`;\n    highlight.style.width = `${rect.width}px`;\n    highlight.style.height = `${rect.height}px`;\n    // highlight.style.border = \"2px solid rgba(255, 0, 0, 0.5)\";\n    // highlight.style.backgroundColor = \"rgba(255, 0, 0, 0.1)\";\n    highlight.style.pointerEvents = \"none\";\n\n    highlightLayer.appendChild(highlight);\n\n    // Store the highlight element for removal\n    target.dataset.uicmHighlight = highlight.id = generateId();\n  };\n\n  private handleElementMouseLeave = (e: MouseEvent): void => {\n    // Only process highlights in comment mode\n    if (this.mode !== \"comment\") {\n      return;\n    }\n\n    const target = e.target as HTMLElement;\n    if (target.hasAttribute(\"data-uicm-element\")) return;\n\n    const highlightId = target.dataset.uicmHighlight;\n    if (highlightId) {\n      const highlight = document.getElementById(highlightId);\n      if (highlight) {\n        highlight.remove();\n      }\n      delete target.dataset.uicmHighlight;\n    }\n  };\n\n  private handleCommentSubmit = async (\n    content: string,\n    element: Element,\n    position: { x: number; y: number },\n    userName?: string\n  ) => {\n    if (!element || !content.trim()) return;\n\n    const xpath = getXPath(element);\n    if (!xpath) return;\n\n    // Create user object with updated name if provided\n    const user = userName\n      ? { ...this.config.currentUser, name: userName }\n      : this.config.currentUser;\n\n    // Create new comment\n    const comment: Comment = {\n      id: generateId(),\n      content: content.trim(),\n      xpath,\n      url: this.getCurrentUrl(),\n      position,\n      relativePosition: { x: 0, y: 0 }, // Calculate relative position if needed\n      createdAt: new Date().toISOString(),\n      createdBy: user,\n      role: user.role || \"other\", // Add role from user\n      replies: [],\n      status: CommentStatus.BUG, // Replies start as BUG\n    };\n\n    // Add comment to list\n    this.comments.push(comment);\n\n    // Create bubble for the comment\n    this.createCommentBubble(comment);\n\n    // Close the form\n    this.closeActiveComponents();\n\n    // Save to backend if configured\n    if (this.config.onSaveComment) {\n      try {\n        const savedComment = await this.config.onSaveComment(comment);\n        // Update local comment with saved data\n        Object.assign(comment, savedComment);\n      } catch (error) {\n        console.error(\"Failed to save comment:\", error);\n      }\n    }\n  };\n\n  private closeActiveComponents(): void {\n    // Close active form\n    if (this.activeForm) {\n      const formElement = this.activeForm.getElement();\n      if (formElement && formElement.parentNode) {\n        formElement.parentNode.removeChild(formElement);\n      }\n      this.activeForm = null;\n    }\n\n    // Close active modal\n    if (this.activeModal) {\n      this.activeModal.destroy();\n      this.activeModal = null;\n    }\n\n    // Remove overlay\n    this.removeOverlay();\n  }\n\n  private createOverlay(): HTMLElement {\n    // Remove existing overlay first\n    this.removeOverlay();\n\n    const overlay = document.createElement(\"div\");\n    overlay.className = \"uicm-overlay\";\n    overlay.style.position = \"fixed\";\n    overlay.style.top = \"0\";\n    overlay.style.left = \"0\";\n    overlay.style.width = \"100vw\";\n    overlay.style.height = \"100vh\";\n    overlay.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n    overlay.style.zIndex = \"999997\"; // Below interaction layer but above page content\n    overlay.style.cursor = \"pointer\";\n\n    // Close on overlay click (only if click target is overlay itself)\n    overlay.addEventListener(\"click\", (e) => {\n      // Only close if the click target is the overlay itself (not modal/form inside)\n      if (e.target === overlay) {\n        e.stopPropagation();\n        console.log(\"🔒 Overlay direct click, closing active components\");\n        this.closeActiveComponents();\n      }\n    });\n\n    // Add global document click listener for outside clicks\n    const globalClickHandler = (e: Event) => {\n      // Check if click is outside modal/form\n      const target = e.target as Node;\n      const isInsideModal =\n        target &&\n        this.activeModal &&\n        this.activeModal.getElement &&\n        this.activeModal.getElement().contains(target);\n      const isInsideForm =\n        target &&\n        this.activeForm &&\n        this.activeForm.getElement().contains(target);\n\n      // If not inside modal or form, close components\n      if (!isInsideModal && !isInsideForm) {\n        console.log(\n          \"🔒 Global click outside modal/form, closing active components\"\n        );\n        this.closeActiveComponents();\n        document.removeEventListener(\"click\", globalClickHandler);\n      }\n    };\n\n    // Add global click listener with slight delay to avoid immediate closure\n    setTimeout(() => {\n      document.addEventListener(\"click\", globalClickHandler);\n    }, 100);\n\n    // Add to root\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    if (interactionLayer) {\n      interactionLayer.appendChild(overlay);\n    }\n\n    this.activeOverlay = overlay;\n    console.log(\"✅ Overlay created with global click handler\");\n    return overlay;\n  }\n\n  private removeOverlay(): void {\n    if (this.activeOverlay) {\n      if (this.activeOverlay.parentNode) {\n        this.activeOverlay.parentNode.removeChild(this.activeOverlay);\n      }\n      this.activeOverlay = null;\n      console.log(\"✅ Overlay removed\");\n    }\n  }\n\n  public showModal(modal: any): void {\n    console.log(\"🔄 CommentManager: Showing modal\");\n\n    // Close any existing components\n    this.closeActiveComponents();\n\n    // Create overlay for event blocking\n    this.createOverlay();\n\n    // Set active modal\n    this.activeModal = modal;\n\n    console.log(\"✅ Modal shown with overlay\");\n  }\n\n  private showCommentForm(\n    element: Element,\n    position: { x: number; y: number },\n    relativePosition: { x: number; y: number }\n  ): void {\n    // Close any existing components first\n    this.closeActiveComponents();\n\n    // Create overlay for event blocking\n    this.createOverlay();\n\n    // Use requestAnimationFrame to avoid blocking the UI\n    requestAnimationFrame(() => {\n      const form = new CommentForm({\n        onSubmit: async (\n          content: string,\n          userName?: string,\n          attachments?: CommentAttachment[]\n        ) => {\n          // Calculate more accurate relative position\n          const rect = element.getBoundingClientRect();\n\n          // Calculate relative position based on click position within element\n          // Note: position parameter is already in viewport coordinates\n          const relativeX = Math.max(\n            0,\n            Math.min(1, (position.x - rect.left) / rect.width)\n          );\n          const relativeY = Math.max(\n            0,\n            Math.min(1, (position.y - rect.top) / rect.height)\n          );\n\n          // Create user object with updated name if provided\n          const user = userName\n            ? { ...this.config.currentUser, name: userName }\n            : this.config.currentUser;\n\n          const commentData = {\n            content,\n            xpath: getXPath(element) || \"\",\n            url: this.getCurrentUrl(),\n            position: {\n              x: rect.left + rect.width * relativeX,\n              y: rect.top + rect.height * relativeY,\n            },\n            relativePosition: { x: relativeX, y: relativeY },\n            createdBy: user,\n            role: user.role || \"other\", // Add role from user\n            status: CommentStatus.BUG, // New comments start as BUG\n            replies: [] as Comment[],\n            attachments: attachments || [], // Add attachments to new comment\n          };\n\n          const newComment = await this.config.onSaveComment(commentData);\n          this.comments.push(newComment);\n          this.createCommentBubble(newComment);\n          this.closeActiveComponents();\n        },\n        onCancel: () => this.closeActiveComponents(),\n        position,\n        element,\n        currentUser: this.config.currentUser,\n      });\n\n      const interactionLayer = document.getElementById(\n        \"uicm-interaction-layer\"\n      );\n      if (interactionLayer) {\n        interactionLayer.appendChild(form.getElement());\n        // Reposition form to ensure it stays within viewport\n        form.reposition();\n      }\n\n      this.activeForm = form;\n      console.log(\"✅ Comment form shown with overlay\");\n    });\n  }\n\n  private hideCommentForm(): void {\n    if (this.activeForm) {\n      this.activeForm.destroy();\n      this.activeForm = null;\n    }\n  }\n\n  private addBubbleToLayer(bubble: CommentBubble): void {\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    if (!interactionLayer) {\n      console.error(\"❌ Interaction layer not found\");\n      return;\n    }\n\n    interactionLayer.appendChild(bubble.getElement());\n    console.log(\"✅ Bubble added to interaction layer\");\n  }\n\n  private async createComment(\n    element: Element,\n    content: string,\n    position: { x: number; y: number },\n    relativePosition: { x: number; y: number }\n  ): Promise<void> {\n    const xpath = getXPath(element);\n    if (!xpath) return;\n\n    const commentData = {\n      content: content.trim(),\n      xpath,\n      url: this.getCurrentUrl(),\n      position,\n      relativePosition,\n      createdBy: this.config.currentUser,\n      role: this.config.currentUser.role || \"other\", // Add role from current user\n      status: CommentStatus.BUG, // New comments start as BUG\n      replies: [] as Comment[],\n    };\n\n    try {\n      const newComment = await this.config.onSaveComment(commentData);\n      this.comments.push(newComment);\n      this.createCommentBubble(newComment);\n    } catch (error) {\n      console.error(\"Failed to create comment:\", error);\n    }\n  }\n\n  private createCommentBubble(comment: Comment): void {\n    const element = getElementByXPath(comment.xpath);\n    if (!element || !isElementValid(element)) {\n      console.warn(\"Element not found for comment:\", comment.xpath);\n      return;\n    }\n\n    // Calculate current viewport position from element and relative position\n    const rect = element.getBoundingClientRect();\n\n    const absoluteX = rect.left + rect.width * comment.relativePosition.x;\n    const absoluteY = rect.top + rect.height * comment.relativePosition.y;\n\n    const bubble = new CommentBubble({\n      comment,\n      position: { x: absoluteX, y: absoluteY },\n      currentUser: this.config.currentUser,\n      onReply: (\n        commentId: string,\n        content: string,\n        user?: User,\n        attachments?: CommentAttachment[]\n      ) => this.addReply(commentId, content, user, attachments),\n      onResolve: (commentId: string) => this.resolveComment(commentId),\n      onDelete: (commentId: string) => this.deleteComment(commentId),\n      onShowModal: (modal: any) => this.showModal(modal), // Pass callback for centralized modal management\n      onStatusChange: (commentId: string, status: CommentStatus) =>\n        this.changeCommentStatus(commentId, status),\n    });\n\n    this.addBubbleToLayer(bubble);\n    this.commentBubbles.set(comment.id, bubble);\n\n    // Add to visibility observer for performance\n    this.visibilityObserver.observe(\n      bubble.getElement(),\n      (isVisible: boolean) => {\n        // Bubble visibility changed\n      }\n    );\n\n    // Cache the position\n    this.positionCache.set(comment.id, { x: absoluteX, y: absoluteY });\n  }\n\n  private async addReply(\n    commentId: string,\n    content: string,\n    user?: User,\n    attachments?: CommentAttachment[]\n  ): Promise<void> {\n    const comment = this.comments.find((c) => c.id === commentId);\n    if (!comment) return;\n\n    // Use provided user or fallback to current user\n    const replyUser = user || this.config.currentUser;\n\n    const reply: Comment = {\n      id: generateId(),\n      content,\n      xpath: comment.xpath,\n      url: comment.url,\n      position: comment.position,\n      relativePosition: comment.relativePosition,\n      createdAt: new Date().toISOString(),\n      createdBy: replyUser,\n      role: replyUser.role || \"other\", // Add role from reply user\n      replies: [],\n      status: CommentStatus.BUG, // Replies start as BUG\n      attachments: attachments || [], // Add attachments to reply\n    };\n\n    comment.replies.push(reply);\n\n    // Update comment via API if configured\n    if (this.config.onUpdateComment) {\n      await this.config.onUpdateComment(comment);\n    }\n\n    // Update bubble\n    const bubble = this.commentBubbles.get(commentId);\n    if (bubble) {\n      bubble.updateComment(comment);\n    }\n  }\n\n  private async resolveComment(commentId: string): Promise<void> {\n    const comment = this.comments.find((c) => c.id === commentId);\n    if (!comment) return;\n\n    comment.status = CommentStatus.DONE;\n    comment.resolvedAt = new Date().toISOString();\n\n    // Update comment via API if configured\n    if (this.config.onUpdateComment) {\n      await this.config.onUpdateComment(comment);\n    }\n\n    // Update bubble\n    const bubble = this.commentBubbles.get(commentId);\n    if (bubble) {\n      bubble.updateComment(comment);\n    }\n  }\n\n  private async changeCommentStatus(\n    commentId: string,\n    status: CommentStatus\n  ): Promise<void> {\n    const comment = this.comments.find((c) => c.id === commentId);\n    if (!comment) return;\n\n    const previousStatus = comment.status;\n    comment.status = status;\n\n    // Update timestamps based on status\n    if (\n      status === CommentStatus.DONE &&\n      previousStatus !== CommentStatus.DONE\n    ) {\n      comment.resolvedAt = new Date().toISOString();\n    } else if (\n      status === CommentStatus.ARCHIVED &&\n      previousStatus !== CommentStatus.ARCHIVED\n    ) {\n      comment.archivedAt = new Date().toISOString();\n    }\n\n    console.log(\"📝 Comment status changed:\", {\n      commentId,\n      previousStatus,\n      newStatus: status,\n      timestamp: new Date().toISOString(),\n    });\n\n    // Update comment via API if configured\n    if (this.config.onUpdateComment) {\n      await this.config.onUpdateComment(comment);\n    }\n\n    // Update bubble\n    const bubble = this.commentBubbles.get(commentId);\n    if (bubble) {\n      bubble.updateComment(comment);\n    }\n\n    // Emit status change event\n    // this.emit(\"comment-updated\", { comment });\n  }\n\n  private async deleteComment(commentId: string): Promise<void> {\n    const comment = this.comments.find((c) => c.id === commentId);\n    if (!comment) return;\n\n    // Update resolved status\n    comment.status = CommentStatus.ARCHIVED;\n\n    if (this.config.onDeleteComment) {\n      try {\n        await this.config.onDeleteComment(commentId);\n      } catch (error) {\n        console.error(\"Failed to delete comment:\", error);\n        return;\n      }\n    }\n\n    // Remove from local array\n    this.comments = this.comments.filter((c) => c.id !== commentId);\n\n    // Remove bubble\n    const bubble = this.commentBubbles.get(commentId);\n    if (bubble) {\n      bubble.destroy();\n      this.commentBubbles.delete(commentId);\n    }\n  }\n\n  private updateBubblePositions(): void {\n    // Only update if we have bubbles AND are in comment mode\n    if (this.commentBubbles.size === 0) {\n      return;\n    }\n\n    // In normal mode, bubbles should be static - no need to update positions\n    if (this.mode === \"normal\") {\n      return;\n    }\n\n    console.log(\n      \"🔄 Updating bubble positions, total bubbles:\",\n      this.commentBubbles.size,\n      \"mode:\",\n      this.mode\n    );\n\n    this.commentBubbles.forEach((bubble, commentId) => {\n      const comment = this.comments.find((c) => c.id === commentId);\n      if (!comment) {\n        console.warn(\"❌ Comment not found for bubble:\", commentId);\n        return;\n      }\n\n      // Hide archived bubbles\n      if (comment.status === CommentStatus.ARCHIVED) {\n        bubble.getElement().style.display = \"none\";\n        console.log(\"📦 Hiding archived bubble:\", commentId);\n        return;\n      }\n\n      const element = getElementByXPath(comment.xpath);\n      if (!element || !isElementValid(element)) {\n        // Element not found, hide bubble\n        console.log(\"❌ Element not found, hiding bubble:\", comment.xpath);\n        bubble.getElement().style.display = \"none\";\n        return;\n      }\n\n      // Show bubble if it was hidden (and not archived)\n      bubble.getElement().style.display = \"flex\";\n\n      // Get current element position\n      const rect = element.getBoundingClientRect();\n\n      // Calculate viewport position from relative position\n      // Note: Root container uses position:fixed, so we need viewport coordinates, not document coordinates\n      const absoluteX = rect.left + rect.width * comment.relativePosition.x;\n      const absoluteY = rect.top + rect.height * comment.relativePosition.y;\n\n      console.log(\"📍 Updating bubble position:\", {\n        commentId,\n        xpath: comment.xpath,\n        elementRect: {\n          left: rect.left,\n          top: rect.top,\n          width: rect.width,\n          height: rect.height,\n        },\n        relativePosition: comment.relativePosition,\n        newPosition: { x: absoluteX, y: absoluteY },\n        status: comment.status,\n      });\n\n      // Update bubble position\n      bubble.updatePosition({ x: absoluteX, y: absoluteY });\n\n      // Update cache\n      this.positionCache.set(commentId, { x: absoluteX, y: absoluteY });\n    });\n  }\n\n  private forceUpdateBubblePositions(): void {\n    // Force update positions regardless of mode - used for initial load and new comments\n    if (this.commentBubbles.size === 0) {\n      return;\n    }\n\n    console.log(\n      \"🔄 Force updating bubble positions:\",\n      this.commentBubbles.size\n    );\n\n    this.commentBubbles.forEach((bubble, commentId) => {\n      const comment = this.comments.find((c) => c.id === commentId);\n      if (!comment) {\n        console.warn(\"❌ Comment not found for bubble:\", commentId);\n        return;\n      }\n\n      const element = getElementByXPath(comment.xpath);\n      if (!element || !isElementValid(element)) {\n        // Element not found, hide bubble\n        bubble.getElement().style.display = \"none\";\n        return;\n      }\n\n      // Show bubble if it was hidden\n      bubble.getElement().style.display = \"flex\";\n\n      // Get current element position\n      const rect = element.getBoundingClientRect();\n\n      // Calculate viewport position from relative position\n      const absoluteX = rect.left + rect.width * comment.relativePosition.x;\n      const absoluteY = rect.top + rect.height * comment.relativePosition.y;\n\n      // Update bubble position\n      bubble.updatePosition({ x: absoluteX, y: absoluteY });\n\n      // Update cache\n      this.positionCache.set(commentId, { x: absoluteX, y: absoluteY });\n    });\n  }\n\n  private getCurrentUrl(): string {\n    return window.location.href;\n  }\n\n  public async loadComments(): Promise<void> {\n    try {\n      const allComments = await this.config.onLoadComments();\n      const currentUrl = this.getCurrentUrl();\n\n      // Filter comments to only show those from the current URL\n      this.comments = allComments.filter(\n        (comment) => comment.url === currentUrl\n      );\n\n      // Create bubbles for all comments\n      this.comments.forEach((comment) => {\n        this.createCommentBubble(comment);\n      });\n\n      // Force update positions after loading comments\n      if (this.comments.length > 0) {\n        setTimeout(() => {\n          this.forceUpdateBubblePositions();\n        }, 100);\n      }\n    } catch (error) {\n      console.error(\"Failed to load comments:\", error);\n    }\n  }\n\n  private updateLayerVisibility(): void {\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    const highlightLayer = document.getElementById(\"uicm-highlight-layer\");\n\n    if (this.mode === \"comment\") {\n      // Show layers\n      if (interactionLayer) {\n        interactionLayer.style.display = \"block\";\n\n        // Update visibility of individual bubbles based on status\n        this.commentBubbles.forEach((bubble, commentId) => {\n          const comment = this.comments.find((c) => c.id === commentId);\n          if (comment && comment.status === CommentStatus.ARCHIVED) {\n            bubble.getElement().style.display = \"none\";\n          } else {\n            bubble.getElement().style.display = \"flex\";\n          }\n        });\n      }\n      if (highlightLayer) {\n        highlightLayer.style.display = \"block\";\n      }\n\n      // Force position update with slight delay\n      setTimeout(() => {\n        this.forceUpdateBubblePositions();\n      }, 50);\n    } else {\n      // Hide layers completely in normal mode\n      if (interactionLayer) {\n        interactionLayer.style.display = \"none\";\n      }\n      if (highlightLayer) {\n        highlightLayer.style.display = \"none\";\n      }\n    }\n  }\n\n  public setMode(mode: CommentMode): void {\n    this.mode = mode;\n    this.updateLayerVisibility();\n\n    // Force update bubble positions when switching to comment mode\n    if (mode === \"comment\" && this.commentBubbles.size > 0) {\n      console.log(\"🔄 Switching to comment mode, updating bubble positions\");\n\n      // Update positions immediately (synchronous)\n      this.forceUpdateBubblePositions();\n\n      // Also update after a short delay to ensure proper positioning\n      setTimeout(() => {\n        this.forceUpdateBubblePositions();\n      }, 100);\n    }\n  }\n\n  public getMode(): CommentMode {\n    return this.mode;\n  }\n\n  public getComments(): Comment[] {\n    return [...this.comments];\n  }\n\n  public getCommentsForElement(element: Element): Comment[] {\n    const xpath = getElementXPath(element);\n    return this.comments.filter((comment) => comment.xpath === xpath);\n  }\n\n  public getCommentBubble(commentId: string): any | null {\n    return this.commentBubbles.get(commentId) || null;\n  }\n\n  public updateCurrentUser(user: User): void {\n    this.config.currentUser = user;\n    console.log(\"🔄 CommentManager: Current user updated:\", user);\n  }\n\n  public highlightElement(element: Element): void {\n    // Remove existing highlights\n    const existingHighlights = this.root.querySelectorAll(\n      \".uicm-element-highlight\"\n    );\n    existingHighlights.forEach((highlight) => highlight.remove());\n\n    // Create new highlight\n    const highlight = document.createElement(\"div\");\n    highlight.className = \"uicm-element-highlight\";\n    highlight.setAttribute(\"data-uicm-element\", \"true\");\n\n    const rect = element.getBoundingClientRect();\n    highlight.style.left = `${rect.left}px`;\n    highlight.style.top = `${rect.top}px`;\n    highlight.style.width = `${rect.width}px`;\n    highlight.style.height = `${rect.height}px`;\n\n    this.root.appendChild(highlight);\n\n    // Auto-remove highlight after 3 seconds\n    setTimeout(() => {\n      if (highlight.parentNode) {\n        highlight.remove();\n      }\n    }, 3000);\n  }\n\n  public testBubbleClicks(): void {\n    console.log(\"🧪 TESTING ALL BUBBLE CLICKS\");\n    console.log(\"Mode:\", this.mode);\n    console.log(\"Bubble count:\", this.commentBubbles.size);\n\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    console.log(\"Interaction layer:\", {\n      found: !!interactionLayer,\n      display: interactionLayer?.style.display,\n      computedDisplay: interactionLayer\n        ? getComputedStyle(interactionLayer).display\n        : null,\n      children: interactionLayer?.children.length,\n    });\n\n    this.commentBubbles.forEach((bubble, commentId) => {\n      console.log(`🔍 Testing bubble ${commentId}:`);\n      bubble.testClickability();\n    });\n  }\n\n  public destroy(): void {\n    // Clean up active components and overlay\n    this.closeActiveComponents();\n\n    // Remove event listeners\n    window.removeEventListener(\"scroll\", this.rafUpdatePositions);\n    window.removeEventListener(\"resize\", this.throttledUpdatePositions);\n    document.removeEventListener(\"click\", this.handleElementClick);\n    document.removeEventListener(\n      \"mouseenter\",\n      this.handleElementMouseEnter,\n      true\n    );\n    document.removeEventListener(\n      \"mouseleave\",\n      this.handleElementMouseLeave,\n      true\n    );\n    if (this.escKeyHandler) {\n      document.removeEventListener(\"keydown\", this.escKeyHandler);\n    }\n\n    // Clean up performance optimizations\n    this.visibilityObserver.disconnect();\n    this.positionCache.clear();\n\n    // Clean up mobile support\n    if (this.touchGestureRecognizer) {\n      this.touchGestureRecognizer.destroy();\n    }\n    if (this.isMobile) {\n      removeMobileCSS();\n    }\n\n    // Clean up all bubbles\n    this.commentBubbles.forEach((bubble) => bubble.destroy());\n    this.commentBubbles.clear();\n\n    console.log(\"CommentManager destroyed\");\n  }\n}\n","import { DebugIcon } from \"../components/DebugIcon\";\nimport { SettingsButton } from \"../components/SettingsButton\";\nimport { SidebarButton } from \"../components/SidebarButton\";\nimport { CommentSidebar } from \"../components/CommentSidebar\";\nimport {\n  CommentMode,\n  CommentSDKConfig,\n  EventCallback,\n  SDKEvents,\n  User,\n  Comment,\n  CommentStatus,\n} from \"../types\";\nimport { ensureSDKRoot, removeGlobalStyles, removeSDKRoot } from \"../utils/dom\";\nimport { CommentManager } from \"./CommentManager\";\nimport { userProfileStorage } from \"../utils/userProfileStorage\";\n\nexport class CommentSDK {\n  private config: CommentSDKConfig;\n  private commentManager!: CommentManager;\n  private debugIcon!: DebugIcon;\n  private settingsButton!: SettingsButton;\n  private sidebarButton!: SidebarButton;\n  private sidebar: CommentSidebar | null = null;\n  private root!: HTMLElement;\n  private isInitialized: boolean = false;\n  private isNavigatingFromSidebar: boolean = false;\n  private eventListeners: Map<keyof SDKEvents, Set<EventCallback<any>>> =\n    new Map();\n\n  constructor(config: CommentSDKConfig) {\n    // Try to load user profile from localStorage first\n    const savedUser = userProfileStorage.loadUserProfile();\n\n    this.config = {\n      theme: \"light\",\n      autoInject: true,\n      debugMode: false,\n      ...config,\n      // Use saved user profile if available, otherwise use provided config\n      currentUser: savedUser || config.currentUser,\n    };\n\n    this.validateConfig();\n\n    // Save initial user profile to localStorage if not exists\n    if (!savedUser) {\n      userProfileStorage.saveUserProfile(this.config.currentUser);\n      console.log(\"💾 Initial user profile saved to localStorage\");\n    }\n  }\n\n  private validateConfig(): void {\n    if (!this.config.projectId) {\n      throw new Error(\"CommentSDK: projectId is required\");\n    }\n    if (!this.config.currentUser) {\n      throw new Error(\"CommentSDK: currentUser is required\");\n    }\n    if (!this.config.onLoadComments) {\n      throw new Error(\"CommentSDK: onLoadComments callback is required\");\n    }\n    if (!this.config.onSaveComment) {\n      throw new Error(\"CommentSDK: onSaveComment callback is required\");\n    }\n  }\n\n  public async init(): Promise<void> {\n    if (this.isInitialized) {\n      console.warn(\"CommentSDK: Already initialized\");\n      return;\n    }\n\n    try {\n      // Setup DOM structure (KHÔNG phụ thuộc bất kỳ phần tử ngoài nào)\n      this.setupDOM();\n\n      // Initialize comment manager (render toàn bộ UI vào root)\n      this.commentManager = new CommentManager(this.config, this.root);\n\n      // Initialize debug icon\n      this.debugIcon = new DebugIcon({\n        isActive: false,\n        onClick: () => this.toggleMode(),\n        theme: this.config.theme!,\n      });\n\n      // Initialize settings button (hidden by default)\n      this.settingsButton = new SettingsButton({\n        currentUser: this.config.currentUser,\n        onUserUpdate: async (updatedUser: User) => {\n          this.config.currentUser = updatedUser;\n          // Update user in comment manager\n          this.commentManager.updateCurrentUser(updatedUser);\n          // Save to localStorage\n          userProfileStorage.saveUserProfile(updatedUser);\n          console.log(\n            \"✅ User profile updated in SDK and localStorage:\",\n            updatedUser\n          );\n        },\n        isVisible: false, // Hidden by default\n      });\n\n      // Initialize sidebar button (hidden by default)\n      this.sidebarButton = new SidebarButton({\n        currentUser: this.config.currentUser,\n        onClick: () => this.openSidebar(),\n        isVisible: false, // Hidden by default - chỉ hiện khi ở comment mode\n      });\n\n      // Add debug icon to root\n      this.root.appendChild(this.debugIcon.getElement());\n\n      // Add settings button to body (fixed position)\n      document.body.appendChild(this.settingsButton.getElement());\n\n      // Add sidebar button to body (fixed position)\n      document.body.appendChild(this.sidebarButton.getElement());\n\n      // Setup keyboard shortcuts\n      this.setupKeyboardShortcuts();\n\n      // Load existing comments\n      await this.commentManager.loadComments();\n\n      // Check if there's a comment to highlight after navigation\n      this.checkForHighlightComment();\n\n      this.isInitialized = true;\n\n      console.log(\"CommentSDK: Initialized successfully\");\n    } catch (error) {\n      console.error(\"CommentSDK: Failed to initialize\", error);\n      throw error;\n    }\n  }\n\n  private setupDOM(): void {\n    // Create root container (SDK tự động tạo nếu chưa có)\n    this.root = ensureSDKRoot();\n\n    // Apply theme class to root\n    this.root.className = `uicm-theme-${this.config.theme}`;\n  }\n\n  private setupKeyboardShortcuts(): void {\n    document.addEventListener(\"keydown\", this.handleKeyboardShortcut);\n  }\n\n  private handleKeyboardShortcut = (e: KeyboardEvent): void => {\n    // Toggle comment mode with Alt+E\n    if (e.key === \"e\" && e.ctrlKey && !e.metaKey) {\n      e.preventDefault();\n      this.toggleMode();\n    }\n  };\n\n  private toggleMode(): void {\n    const currentMode = this.commentManager.getMode();\n    const newMode: CommentMode =\n      currentMode === \"normal\" ? \"comment\" : \"normal\";\n\n    this.setMode(newMode);\n  }\n\n  public setMode(mode: CommentMode): void {\n    if (!this.isInitialized) {\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n\n    const previousMode = this.commentManager.getMode();\n\n    this.commentManager.setMode(mode);\n    this.debugIcon.updateState(mode === \"comment\");\n\n    // Update settings button visibility based on mode\n    if (this.settingsButton) {\n      this.settingsButton.setVisible(mode === \"comment\");\n    }\n\n    // Update sidebar button visibility based on mode\n    if (this.sidebarButton) {\n      this.sidebarButton.setVisible(mode === \"comment\");\n    }\n\n    // Update cursor style for the entire page\n    if (mode === \"comment\") {\n      document.body.style.cursor = \"crosshair\";\n    } else {\n      document.body.style.cursor = \"\";\n    }\n\n    // Emit mode change event\n    this.emit(\"mode-changed\", { mode });\n\n    console.log(`CommentSDK: Mode changed from ${previousMode} to ${mode}`);\n  }\n\n  public getMode(): CommentMode {\n    if (!this.isInitialized) {\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n    return this.commentManager.getMode();\n  }\n\n  public async reload(): Promise<void> {\n    if (!this.isInitialized) {\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n\n    try {\n      await this.commentManager.loadComments();\n      console.log(\"CommentSDK: Comments reloaded successfully\");\n    } catch (error) {\n      console.error(\"CommentSDK: Failed to reload comments\", error);\n      throw error;\n    }\n  }\n\n  public getComments() {\n    if (!this.isInitialized) {\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n    return this.commentManager.getComments();\n  }\n\n  private openSidebar(): void {\n    console.log(\"🔧 CommentSDK: openSidebar called\");\n\n    if (!this.isInitialized) {\n      console.error(\"CommentSDK: Not initialized. Call init() first.\");\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n\n    // Close existing sidebar if open\n    if (this.sidebar) {\n      console.log(\"🔧 CommentSDK: Closing existing sidebar\");\n      this.sidebar.destroy();\n      this.sidebar = null;\n      return;\n    }\n\n    // Get all comments\n    const allComments = this.commentManager.getComments();\n    console.log(\"🔧 CommentSDK: Found comments:\", allComments.length);\n\n    // Create and show sidebar\n    console.log(\"🔧 CommentSDK: Creating new sidebar\");\n    this.sidebar = new CommentSidebar({\n      comments: allComments,\n      currentUser: this.config.currentUser,\n      onNavigateToComment: (comment: Comment) => {\n        console.log(\"🔧 CommentSDK: Navigating to comment:\", comment.id);\n        this.navigateToComment(comment);\n      },\n      onClose: () => {\n        console.log(\"🔧 CommentSDK: Sidebar closed\");\n        if (this.sidebar) {\n          this.sidebar.destroy();\n          this.sidebar = null;\n        }\n      },\n      onStatusChange: async (commentId: string, status: CommentStatus) => {\n        console.log(\"🔧 CommentSDK: Status change:\", commentId, status);\n        // Find comment and update status\n        const comment = allComments.find((c) => c.id === commentId);\n        if (comment) {\n          comment.status = status;\n          // Update in comment manager\n          const bubble = this.commentManager.getCommentBubble(commentId);\n          if (bubble) {\n            bubble.updateComment(comment);\n          }\n        }\n      },\n    });\n\n    console.log(\"🔧 CommentSDK: Showing sidebar\");\n    this.sidebar.show();\n  }\n\n  private navigateToComment(comment: Comment): void {\n    console.log(\n      \"🔧 CommentSDK: navigateToComment called for comment:\",\n      comment.id\n    );\n\n    // Set flag to prevent form comment from opening\n    this.isNavigatingFromSidebar = true;\n    (window as any).uicmIsNavigatingFromSidebar = true;\n\n    // Close sidebar first\n    if (this.sidebar) {\n      console.log(\"🔧 CommentSDK: Closing sidebar before navigation\");\n      this.sidebar.destroy();\n      this.sidebar = null;\n    }\n\n    // Check if we're on the same page\n    const currentUrl = window.location.href;\n    const commentUrl = comment.url;\n\n    if (currentUrl !== commentUrl) {\n      console.log(\"🔧 CommentSDK: Navigating to different page:\", commentUrl);\n      // Navigate to the comment's page\n      window.location.href = commentUrl;\n\n      // Store comment to highlight after navigation\n      sessionStorage.setItem(\"uicm-highlight-comment\", comment.id);\n    } else {\n      console.log(\"🔧 CommentSDK: Same page, highlighting comment\");\n      // We're on the same page, just highlight the comment\n      this.highlightCommentOnPage(comment);\n    }\n\n    // Reset flag after a delay\n    setTimeout(() => {\n      this.isNavigatingFromSidebar = false;\n      (window as any).uicmIsNavigatingFromSidebar = false;\n      console.log(\"🔧 CommentSDK: Navigation flag reset\");\n    }, 2000);\n  }\n\n  private highlightCommentOnPage(comment: Comment): void {\n    console.log(\n      \"🔧 CommentSDK: highlightCommentOnPage called for comment:\",\n      comment.id\n    );\n\n    // Switch to comment mode\n    this.setMode(\"comment\");\n\n    // Find the element by XPath\n    const element = this.findElementByXPath(comment.xpath);\n    if (element) {\n      console.log(\n        \"🔧 CommentSDK: Element found, highlighting and scrolling to it\"\n      );\n\n      // Scroll to element smoothly\n      element.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"center\",\n        inline: \"center\",\n      });\n\n      // Highlight the element\n      this.commentManager.highlightElement(element);\n\n      // Wait a bit for scroll to complete, then show modal\n      setTimeout(() => {\n        // Show the comment modal\n        const bubble = this.commentManager.getCommentBubble(comment.id);\n        if (bubble) {\n          console.log(\"🔧 CommentSDK: Found bubble, clicking to show modal\");\n          // Trigger click on bubble to show modal\n          bubble.getElement().click();\n        } else {\n          console.warn(\n            \"🔧 CommentSDK: Bubble not found for comment:\",\n            comment.id\n          );\n          // Try to find and click the element directly\n          (element as HTMLElement).click();\n        }\n      }, 800); // Wait for scroll animation\n    } else {\n      console.warn(\n        \"🔧 CommentSDK: Element not found for comment:\",\n        comment.xpath\n      );\n    }\n  }\n\n  private findElementByXPath(xpath: string): Element | null {\n    try {\n      const result = document.evaluate(\n        xpath,\n        document,\n        null,\n        XPathResult.FIRST_ORDERED_NODE_TYPE,\n        null\n      );\n      return result.singleNodeValue as Element;\n    } catch (error) {\n      console.error(\"Error finding element by XPath:\", error);\n      return null;\n    }\n  }\n\n  private checkForHighlightComment(): void {\n    const commentId = sessionStorage.getItem(\"uicm-highlight-comment\");\n    if (commentId) {\n      // Clear the session storage\n      sessionStorage.removeItem(\"uicm-highlight-comment\");\n\n      // Find the comment\n      const comment = this.commentManager\n        .getComments()\n        .find((c) => c.id === commentId);\n      if (comment) {\n        // Wait a bit for the page to fully load, then highlight\n        setTimeout(() => {\n          this.highlightCommentOnPage(comment);\n        }, 500);\n      }\n    }\n  }\n\n  public getCommentsForElement(element: Element) {\n    if (!this.isInitialized) {\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n    return this.commentManager.getCommentsForElement(element);\n  }\n\n  public highlightElement(element: Element): void {\n    if (!this.isInitialized) {\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n    this.commentManager.highlightElement(element);\n  }\n\n  public setTheme(theme: \"light\" | \"dark\"): void {\n    this.config.theme = theme;\n\n    if (this.isInitialized) {\n      this.root.className = `uicm-theme-${theme}`;\n      this.debugIcon.updateTheme(theme);\n    }\n  }\n\n  public getTheme(): \"light\" | \"dark\" {\n    return this.config.theme!;\n  }\n\n  // Event system\n  public on<T extends keyof SDKEvents>(\n    event: T,\n    callback: EventCallback<T>\n  ): void {\n    if (!this.eventListeners.has(event)) {\n      this.eventListeners.set(event, new Set());\n    }\n    this.eventListeners.get(event)!.add(callback);\n  }\n\n  public off<T extends keyof SDKEvents>(\n    event: T,\n    callback: EventCallback<T>\n  ): void {\n    const listeners = this.eventListeners.get(event);\n    if (listeners) {\n      listeners.delete(callback);\n    }\n  }\n\n  private emit<T extends keyof SDKEvents>(event: T, data: SDKEvents[T]): void {\n    const listeners = this.eventListeners.get(event);\n    if (listeners) {\n      listeners.forEach((callback) => {\n        try {\n          callback(data);\n        } catch (error) {\n          console.error(\n            `CommentSDK: Error in event listener for ${event}:`,\n            error\n          );\n        }\n      });\n    }\n  }\n\n  public destroy(): void {\n    if (!this.isInitialized) {\n      console.warn(\"CommentSDK: Not initialized, nothing to destroy\");\n      return;\n    }\n\n    try {\n      // Reset cursor\n      document.body.style.cursor = \"\";\n\n      // Clean up comment manager\n      if (this.commentManager) {\n        this.commentManager.destroy();\n      }\n\n      // Clean up debug icon\n      if (this.debugIcon) {\n        this.debugIcon.destroy();\n      }\n\n      // Clean up settings button\n      if (this.settingsButton) {\n        this.settingsButton.destroy();\n      }\n\n      // Clean up sidebar button\n      if (this.sidebarButton) {\n        this.sidebarButton.destroy();\n      }\n\n      // Clean up sidebar\n      if (this.sidebar) {\n        this.sidebar.destroy();\n      }\n\n      // Remove keyboard shortcuts\n      document.removeEventListener(\"keydown\", this.handleKeyboardShortcut);\n\n      // Remove DOM elements\n      removeSDKRoot();\n      removeGlobalStyles();\n\n      // Clear event listeners\n      this.eventListeners.clear();\n\n      this.isInitialized = false;\n\n      console.log(\"CommentSDK: Destroyed successfully\");\n    } catch (error) {\n      console.error(\"CommentSDK: Error during destruction\", error);\n    }\n  }\n\n  public isReady(): boolean {\n    return this.isInitialized;\n  }\n\n  public getVersion(): string {\n    return \"1.0.0\";\n  }\n\n  public getConfig(): Readonly<CommentSDKConfig> {\n    return { ...this.config };\n  }\n\n  public testBubbleClicks(): void {\n    if (!this.isInitialized) {\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n\n    console.log(\"🧪 CommentSDK: Testing bubble clicks...\");\n    this.commentManager.testBubbleClicks();\n  }\n\n  public testSidebar(): void {\n    if (!this.isInitialized) {\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n    console.log(\"🧪 Testing sidebar...\");\n    this.openSidebar();\n  }\n}\n\n// Global initialization function\n// Chỉ cần nhúng script và gọi initCommentSDK, không cần tạo div hay gọi hàm prompt nào khác. SDK sẽ tự động inject toàn bộ UI.\nexport function initCommentSDK(config: CommentSDKConfig): CommentSDK {\n  const sdk = new CommentSDK(config);\n\n  // Auto-initialize if autoInject is true (default)\n  if (config.autoInject !== false) {\n    // Initialize when DOM is ready\n    if (document.readyState === \"loading\") {\n      document.addEventListener(\"DOMContentLoaded\", () => {\n        sdk.init().catch((error) => {\n          console.error(\"CommentSDK: Auto-initialization failed\", error);\n        });\n      });\n    } else {\n      // DOM is already ready\n      sdk.init().catch((error) => {\n        console.error(\"CommentSDK: Auto-initialization failed\", error);\n      });\n    }\n  }\n\n  return sdk;\n}\n","import { Comment } from \"../types\";\n\nexport class CommentStorage {\n  private static readonly STORAGE_KEY = \"uicm-comments\";\n\n  // Load comments from localStorage\n  public static loadComments(): Comment[] {\n    try {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      if (stored) {\n        const data = JSON.parse(stored);\n        return data.comments || [];\n      }\n    } catch (error) {\n      console.error(\"Failed to load comments from storage:\", error);\n    }\n    return [];\n  }\n\n  // Save comments to localStorage\n  public static saveComments(comments: Comment[]): void {\n    try {\n      const data = {\n        comments,\n        lastUpdated: new Date().toISOString(),\n      };\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n    } catch (error) {\n      console.error(\"Failed to save comments to storage:\", error);\n    }\n  }\n\n  // Add a new comment\n  public static addComment(comment: Comment): Comment {\n    const comments = this.loadComments();\n    const newComment = {\n      ...comment,\n      id: this.generateId(),\n      createdAt: new Date().toISOString(),\n    };\n    comments.push(newComment);\n    this.saveComments(comments);\n    return newComment;\n  }\n\n  // Update an existing comment\n  public static updateComment(updatedComment: Comment): Comment {\n    const comments = this.loadComments();\n    const index = comments.findIndex((c) => c.id === updatedComment.id);\n    if (index !== -1) {\n      comments[index] = updatedComment;\n      this.saveComments(comments);\n    }\n    return updatedComment;\n  }\n\n  // Delete a comment\n  public static deleteComment(commentId: string): void {\n    const comments = this.loadComments();\n    const filteredComments = comments.filter((c) => c.id !== commentId);\n    this.saveComments(filteredComments);\n  }\n\n  // Get comments for specific URL\n  public static getCommentsForUrl(url: string): Comment[] {\n    const allComments = this.loadComments();\n    return allComments.filter((comment) => comment.url === url);\n  }\n\n  // Get comments for specific element XPath\n  public static getCommentsForXPath(xpath: string, url: string): Comment[] {\n    const allComments = this.loadComments();\n    return allComments.filter(\n      (comment) => comment.xpath === xpath && comment.url === url\n    );\n  }\n\n  // Clear all comments (for development/testing)\n  public static clearAllComments(): void {\n    localStorage.removeItem(this.STORAGE_KEY);\n  }\n\n  // Export comments to JSON file (for backup)\n  public static exportComments(): string {\n    const comments = this.loadComments();\n    return JSON.stringify(\n      {\n        comments,\n        exportedAt: new Date().toISOString(),\n        version: \"1.0.0\",\n      },\n      null,\n      2\n    );\n  }\n\n  // Import comments from JSON string\n  public static importComments(jsonString: string): void {\n    try {\n      const data = JSON.parse(jsonString);\n      if (data.comments && Array.isArray(data.comments)) {\n        this.saveComments(data.comments);\n      }\n    } catch (error) {\n      console.error(\"Failed to import comments:\", error);\n    }\n  }\n\n  // Generate unique ID\n  private static generateId(): string {\n    return (\n      \"comment_\" + Date.now() + \"_\" + Math.random().toString(36).substr(2, 9)\n    );\n  }\n\n  // Get storage info\n  public static getStorageInfo(): {\n    totalComments: number;\n    storageSize: number;\n    lastUpdated: string | null;\n  } {\n    const comments = this.loadComments();\n    const stored = localStorage.getItem(this.STORAGE_KEY);\n    const storageSize = stored ? new Blob([stored]).size : 0;\n\n    let lastUpdated = null;\n    try {\n      const data = JSON.parse(stored || \"{}\");\n      lastUpdated = data.lastUpdated || null;\n    } catch (error) {\n      // Ignore parse errors\n    }\n\n    return {\n      totalComments: comments.length,\n      storageSize,\n      lastUpdated,\n    };\n  }\n}\n","import { Comment } from \"../types\";\n\nexport class HybridCommentStorage {\n  private static readonly STORAGE_KEY = \"uicm-comments\";\n  private static readonly JSON_FILE_PATH = \"/src/storage/comments.json\";\n\n  // Load comments từ cả localStorage và file JSON\n  public static async loadComments(): Promise<Comment[]> {\n    try {\n      // Load từ localStorage trước\n      const localComments = this.loadFromLocalStorage();\n\n      // Load từ file JSON\n      const fileComments = await this.loadFromJsonFile();\n\n      // Merge comments (localStorage có priority)\n      const mergedComments = this.mergeComments(localComments, fileComments);\n\n      return mergedComments;\n    } catch (error) {\n      console.error(\"Failed to load comments:\", error);\n      return [];\n    }\n  }\n\n  // Load từ localStorage\n  private static loadFromLocalStorage(): Comment[] {\n    try {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      if (stored) {\n        const data = JSON.parse(stored);\n        return data.comments || [];\n      }\n    } catch (error) {\n      console.error(\"Failed to load from localStorage:\", error);\n    }\n    return [];\n  }\n\n  // Load từ file JSON\n  private static async loadFromJsonFile(): Promise<Comment[]> {\n    try {\n      // Trong environment development, có thể load từ file\n      const isDevelopment =\n        typeof window !== \"undefined\" &&\n        window.location.hostname === \"localhost\";\n      if (isDevelopment) {\n        const response = await fetch(this.JSON_FILE_PATH);\n        if (response.ok) {\n          const data = await response.json();\n          return data.comments || [];\n        }\n      }\n    } catch (error: any) {\n      console.log(\n        \"Could not load from JSON file (this is normal in production):\",\n        error.message\n      );\n    }\n    return [];\n  }\n\n  // Merge comments từ hai nguồn\n  private static mergeComments(\n    localComments: Comment[],\n    fileComments: Comment[]\n  ): Comment[] {\n    const commentMap = new Map<string, Comment>();\n\n    // Add file comments first\n    fileComments.forEach((comment) => {\n      commentMap.set(comment.id, comment);\n    });\n\n    // Override with local comments (có priority cao hơn)\n    localComments.forEach((comment) => {\n      commentMap.set(comment.id, comment);\n    });\n\n    return Array.from(commentMap.values());\n  }\n\n  // Save comments vào cả localStorage và file JSON\n  public static async saveComments(comments: Comment[]): Promise<void> {\n    try {\n      // Save vào localStorage\n      this.saveToLocalStorage(comments);\n\n      // Save vào file JSON (development only)\n      await this.saveToJsonFile(comments);\n    } catch (error) {\n      console.error(\"Failed to save comments:\", error);\n    }\n  }\n\n  // Save vào localStorage\n  private static saveToLocalStorage(comments: Comment[]): void {\n    try {\n      const data = {\n        comments,\n        lastUpdated: new Date().toISOString(),\n        source: \"hybrid-storage\",\n      };\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n    } catch (error) {\n      console.error(\"Failed to save to localStorage:\", error);\n    }\n  }\n\n  // Save vào file JSON (development only)\n  private static async saveToJsonFile(comments: Comment[]): Promise<void> {\n    try {\n      const isDevelopment =\n        typeof window !== \"undefined\" &&\n        window.location.hostname === \"localhost\";\n      if (isDevelopment) {\n        const data = {\n          comments,\n          lastUpdated: new Date().toISOString(),\n          version: \"1.0.0\",\n          source: \"hybrid-storage\",\n        };\n\n        // Tạo JSON string\n        const jsonString = JSON.stringify(data, null, 2);\n\n        // Log để copy vào file manually\n        console.log(\"📝 Copy this JSON to src/storage/comments.json:\");\n        console.log(jsonString);\n\n        // Tự động download file\n        this.downloadJsonFile(jsonString);\n      }\n    } catch (error) {\n      console.error(\"Failed to save to JSON file:\", error);\n    }\n  }\n\n  // Download JSON file\n  private static downloadJsonFile(jsonString: string): void {\n    try {\n      const blob = new Blob([jsonString], { type: \"application/json\" });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = \"comments.json\";\n      a.style.display = \"none\";\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n\n      console.log(\n        \"💾 Downloaded comments.json - Please replace src/storage/comments.json with this file\"\n      );\n    } catch (error) {\n      console.error(\"Failed to download JSON file:\", error);\n    }\n  }\n\n  // Add new comment\n  public static async addComment(\n    comment: Omit<Comment, \"id\" | \"createdAt\">\n  ): Promise<Comment> {\n    const comments = await this.loadComments();\n\n    const newComment: Comment = {\n      ...comment,\n      id: this.generateId(),\n      createdAt: new Date().toISOString(),\n    };\n\n    comments.push(newComment);\n    await this.saveComments(comments);\n\n    return newComment;\n  }\n\n  // Update comment\n  public static async updateComment(updatedComment: Comment): Promise<Comment> {\n    const comments = await this.loadComments();\n    const index = comments.findIndex((c) => c.id === updatedComment.id);\n\n    if (index !== -1) {\n      comments[index] = updatedComment;\n      await this.saveComments(comments);\n    }\n\n    return updatedComment;\n  }\n\n  // Delete comment\n  public static async deleteComment(commentId: string): Promise<void> {\n    const comments = await this.loadComments();\n    const filteredComments = comments.filter((c) => c.id !== commentId);\n    await this.saveComments(filteredComments);\n  }\n\n  // Get comments for URL\n  public static async getCommentsForUrl(url: string): Promise<Comment[]> {\n    const allComments = await this.loadComments();\n    return allComments.filter((comment) => comment.url === url);\n  }\n\n  // Generate unique ID\n  private static generateId(): string {\n    return (\n      \"comment_\" + Date.now() + \"_\" + Math.random().toString(36).substr(2, 9)\n    );\n  }\n\n  // Clear all comments\n  public static async clearAllComments(): Promise<void> {\n    localStorage.removeItem(this.STORAGE_KEY);\n    await this.saveComments([]);\n  }\n\n  // Sync từ localStorage lên file JSON\n  public static async syncToFile(): Promise<void> {\n    const localComments = this.loadFromLocalStorage();\n    await this.saveToJsonFile(localComments);\n    console.log(\"✅ Synced localStorage comments to JSON file\");\n  }\n\n  // Import từ file JSON vào localStorage\n  public static async importFromFile(): Promise<void> {\n    const fileComments = await this.loadFromJsonFile();\n    this.saveToLocalStorage(fileComments);\n    console.log(\"✅ Imported file comments to localStorage\");\n  }\n}\n","import { CommentSDKConfig } from \"../types\";\nimport { HybridCommentStorage } from \"../storage/HybridCommentStorage\";\n\n/**\n * Creates a hybrid storage config for demo/development purposes\n * Saves comments to localStorage + exports to JSON file\n */\nexport function createHybridStorageConfig(\n  projectId: string = \"demo-project\"\n): CommentSDKConfig {\n  return {\n    projectId,\n    currentUser: {\n      id: \"user_demo\",\n      name: \"Demo User\",\n      avatar: undefined,\n    },\n    theme: \"light\",\n    onLoadComments: async () => {\n      return await HybridCommentStorage.loadComments();\n    },\n    onSaveComment: async (comment) => {\n      return await HybridCommentStorage.addComment(comment);\n    },\n    onDeleteComment: async (commentId) => {\n      await HybridCommentStorage.deleteComment(commentId);\n    },\n    onUpdateComment: async (updatedComment) => {\n      return await HybridCommentStorage.updateComment(updatedComment);\n    },\n  };\n}\n\n/**\n * Hybrid storage utilities for demo/development\n */\nexport const hybridStorageUtils = {\n  /**\n   * Load all comments from storage and show alert\n   */\n  loadAll: () => {\n    HybridCommentStorage.loadComments().then((comments) => {\n      console.log(\"Loaded comments:\", comments);\n      alert(`Loaded ${comments.length} comments from storage`);\n    });\n  },\n\n  /**\n   * Export comments to JSON file\n   */\n  syncToFile: () => {\n    HybridCommentStorage.syncToFile();\n  },\n\n  /**\n   * Clear all comments from storage\n   */\n  clearAll: () => {\n    HybridCommentStorage.clearAllComments().then(() => {\n      alert(\"All comments cleared!\");\n      location.reload();\n    });\n  },\n\n  /**\n   * Show instructions in console\n   */\n  showInstructions: () => {\n    console.log(\"🔧 Hybrid Storage Instructions:\");\n    console.log(\"- Comments are saved to localStorage + exported to JSON file\");\n    console.log(\"- Use loadAll() to load comments from storage\");\n    console.log(\"- Use syncToFile() to download comments as JSON\");\n    console.log(\"- Use clearAll() to clear all comments\");\n  },\n};\n","export interface LocalStorageUtils {\n  getCommentsData(): any;\n  getAllUICMData(): Record<string, any>;\n  clearCommentsData(): void;\n  exportCommentsData(): string;\n  importCommentsData(data: string): boolean;\n}\n\nexport class LocalStorageManager implements LocalStorageUtils {\n  private commentsKey = \"uicm-comments\";\n  private userProfileKey = \"uicm-user-profile\";\n  private projectKey = \"uicm-demo-project\";\n\n  public getCommentsData(): any {\n    try {\n      const data = localStorage.getItem(this.commentsKey);\n      if (!data) {\n        console.log(\"📭 No comments data found in localStorage\");\n        return null;\n      }\n\n      const parsedData = JSON.parse(data);\n      console.log(\"📂 Comments data loaded from localStorage:\", parsedData);\n      return parsedData;\n    } catch (error) {\n      console.error(\n        \"❌ Failed to load comments data from localStorage:\",\n        error\n      );\n      return null;\n    }\n  }\n\n  public getAllUICMData(): Record<string, any> {\n    const allData: Record<string, any> = {};\n\n    try {\n      // Get all localStorage keys that start with 'uicm-'\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith(\"uicm-\")) {\n          try {\n            const value = localStorage.getItem(key);\n            if (value) {\n              allData[key] = JSON.parse(value);\n            }\n          } catch (error) {\n            console.warn(`⚠️ Failed to parse localStorage key: ${key}`, error);\n            allData[key] = localStorage.getItem(key); // Store as string if JSON parse fails\n          }\n        }\n      }\n\n      console.log(\"📊 All UICM data from localStorage:\", allData);\n      return allData;\n    } catch (error) {\n      console.error(\"❌ Failed to get all UICM data:\", error);\n      return {};\n    }\n  }\n\n  public clearCommentsData(): void {\n    try {\n      localStorage.removeItem(this.commentsKey);\n      console.log(\"🗑️ Comments data cleared from localStorage\");\n    } catch (error) {\n      console.error(\"❌ Failed to clear comments data:\", error);\n    }\n  }\n\n  public exportCommentsData(): string {\n    try {\n      const data = this.getCommentsData();\n      if (!data) {\n        return \"\";\n      }\n\n      const exportData = {\n        timestamp: new Date().toISOString(),\n        data: data,\n        version: \"1.0.0\",\n      };\n\n      const jsonString = JSON.stringify(exportData, null, 2);\n      console.log(\"📤 Comments data exported:\", exportData);\n      return jsonString;\n    } catch (error) {\n      console.error(\"❌ Failed to export comments data:\", error);\n      return \"\";\n    }\n  }\n\n  public importCommentsData(data: string): boolean {\n    try {\n      const parsedData = JSON.parse(data);\n\n      // Handle both direct data and wrapped export format\n      const commentsData = parsedData.data || parsedData;\n\n      localStorage.setItem(this.commentsKey, JSON.stringify(commentsData));\n      console.log(\"📥 Comments data imported to localStorage:\", commentsData);\n      return true;\n    } catch (error) {\n      console.error(\"❌ Failed to import comments data:\", error);\n      return false;\n    }\n  }\n\n  public getProjectData(projectId: string): any {\n    try {\n      const key = `uicm-${projectId}`;\n      const data = localStorage.getItem(key);\n      if (!data) {\n        console.log(`📭 No project data found for: ${projectId}`);\n        return null;\n      }\n\n      const parsedData = JSON.parse(data);\n      console.log(`📂 Project data loaded for ${projectId}:`, parsedData);\n      return parsedData;\n    } catch (error) {\n      console.error(`❌ Failed to load project data for ${projectId}:`, error);\n      return null;\n    }\n  }\n\n  public getUserProfileData(): any {\n    try {\n      const data = localStorage.getItem(this.userProfileKey);\n      if (!data) {\n        console.log(\"📭 No user profile data found in localStorage\");\n        return null;\n      }\n\n      const parsedData = JSON.parse(data);\n      console.log(\"📂 User profile data loaded from localStorage:\", parsedData);\n      return parsedData;\n    } catch (error) {\n      console.error(\n        \"❌ Failed to load user profile data from localStorage:\",\n        error\n      );\n      return null;\n    }\n  }\n\n  public displayAllData(): void {\n    const allData = this.getAllUICMData();\n\n    console.group(\"🔍 UICM LocalStorage Data\");\n    console.log(\"Total UICM keys found:\", Object.keys(allData).length);\n\n    Object.keys(allData).forEach((key) => {\n      const value = allData[key];\n      console.group(`📁 ${key}`);\n      console.log(\"Type:\", typeof value);\n      console.log(\"Size:\", JSON.stringify(value).length, \"characters\");\n      console.log(\"Data:\", value);\n      console.groupEnd();\n    });\n\n    console.groupEnd();\n  }\n}\n\n// Default instance\nexport const localStorageUtils = new LocalStorageManager();\n","// Main SDK exports\nimport { initCommentSDK } from \"./core/CommentSDK\";\nexport { CommentSDK, initCommentSDK } from \"./core/CommentSDK\";\nimport \"./styles/layers.css\";\nimport \"./styles/image-modal.css\";\nimport \"./styles/comment-modal.css\";\nimport \"./styles/comment-bubble.css\";\nimport \"./styles/comment-form.css\";\nimport \"./styles/profile-settings-modal.css\";\nimport \"./styles/settings-button.css\";\nimport \"./styles/sidebar-button.css\";\nimport \"./styles/comment-sidebar.css\";\n\n// Type exports for consumers\nexport * from \"./types\";\n\n// Component exports\nexport { ProfileSettingsModal } from \"./components/ProfileSettingsModal\";\nexport { SettingsButton } from \"./components/SettingsButton\";\n\n// Storage and utilities\nexport { CommentStorage } from \"./storage/CommentStorage\";\nexport { HybridCommentStorage } from \"./storage/HybridCommentStorage\";\nexport {\n  createHybridStorageConfig,\n  hybridStorageUtils,\n} from \"./utils/hybridStorageUtils\";\nexport {\n  userProfileStorage,\n  LocalUserProfileStorage,\n} from \"./utils/userProfileStorage\";\nexport {\n  localStorageUtils,\n  LocalStorageManager,\n} from \"./utils/localStorageUtils\";\n\n// Version information\nexport const VERSION = \"1.0.0\";\n\n// Default export for UMD build\nexport default { initCommentSDK };\n"],"names":[],"mappings":"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","x_google_ignoreList":[7]}