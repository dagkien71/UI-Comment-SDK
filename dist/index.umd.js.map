{"version":3,"file":"index.umd.js","sources":["../src/types/index.ts","../src/utils/roleColors.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/components/CommentSidebar.ts","../src/components/DebugIcon.ts","../src/storage/HybridCommentStorage.ts","../src/components/ProfileSettingsModal.ts","../src/utils/userProfileStorage.ts","../src/components/SettingsButton.ts","../src/components/SidebarButton.ts","../src/utils/dom.ts","../src/utils/base64Upload.ts","../src/components/ImageModal.ts","../src/components/CommentModal.ts","../src/components/CommentBubble.ts","../src/components/CommentForm.ts","../src/utils/mobile.ts","../src/utils/performance.ts","../src/utils/xpath.ts","../src/core/CommentManager.ts","../src/core/CommentSDK.ts","../src/storage/CommentStorage.ts","../src/utils/hybridStorageUtils.ts","../src/utils/localStorageUtils.ts","../src/index.ts"],"sourcesContent":["export interface User {\n  id: string;\n  name: string;\n  avatar?: string;\n  role?:\n    | \"developer\"\n    | \"designer\"\n    | \"product-manager\"\n    | \"qa\"\n    | \"stakeholder\"\n    | \"other\";\n}\n\nexport enum CommentStatus {\n  BUG = \"bug\", // Màu đỏ - comment mới tạo\n  FEATURE_REQUEST = \"feature_request\", // Màu vàng - yêu cầu tính năng mới\n  DEV_COMPLETED = \"dev_completed\", // Màu xanh dương - dev đã fix\n  DONE = \"done\", // Màu xanh - tester đã review\n  ARCHIVED = \"archived\", // Màu xám - đã archive\n}\n\nexport interface CommentAttachment {\n  id: string;\n  filename: string;\n  url: string;\n  type: \"image\" | \"file\";\n  size: number;\n  uploadedAt: string;\n}\n\nexport interface Comment {\n  id: string;\n  content: string;\n  xpath: string;\n  url: string;\n  position: { x: number; y: number };\n  relativePosition: { x: number; y: number };\n  createdAt: string;\n  createdBy: User;\n  role: string; // Role of the comment creator\n  replies: Comment[];\n  status: CommentStatus;\n  resolvedAt?: string; // Timestamp khi status changed to DONE\n  archivedAt?: string; // Timestamp khi archived\n  attachments?: CommentAttachment[]; // File/image attachments\n}\n\nexport type CommentMode = \"normal\" | \"comment\";\n\nexport interface CommentSDKConfig {\n  projectId: string;\n  theme?: \"light\" | \"dark\";\n  onFetchJsonFile: () => Promise<{ comments: Comment[] }>; // Function to fetch JSON data\n  onUpdate: (comments: Comment[]) => Promise<void>; // Action to update JSON file\n}\n\nexport interface CommentManagerConfig {\n  projectId: string;\n  currentUser: User;\n  theme?: \"light\" | \"dark\";\n  onLoadComments: () => Promise<Comment[]>;\n  onSaveComment: (\n    comment: Omit<Comment, \"id\" | \"createdAt\">\n  ) => Promise<Comment>;\n  onUpdateComment?: (comment: Comment) => Promise<Comment>;\n  onDeleteComment?: (commentId: string) => Promise<void>;\n}\n\nexport interface CommentBubbleProps {\n  comment: Comment;\n  position: { x: number; y: number };\n  isActive?: boolean;\n  onClick?: (comment: Comment) => void;\n  currentUser: User;\n  onReply?: (content: string) => void;\n  onResolve?: () => void;\n  onDelete?: () => void;\n}\n\nexport interface CommentFormProps {\n  position: { x: number; y: number };\n  element: Element;\n  onSubmit: (content: string) => void;\n  onCancel: () => void;\n  currentUser: User;\n}\n\nexport interface DebugIconProps {\n  isActive: boolean;\n  onClick: () => void;\n  theme: \"light\" | \"dark\";\n}\n\nexport interface CommentPopupProps {\n  comment: Comment;\n  position: { x: number; y: number };\n  onClose: () => void;\n  onReply?: (content: string) => void;\n  onResolve?: () => void;\n  onDelete?: () => void;\n  currentUser: User;\n}\n\nexport interface ElementHighlight {\n  element: Element;\n  bounds: DOMRect;\n}\n\nexport interface SDKEvents {\n  \"mode-changed\": { mode: CommentMode };\n  \"comment-created\": { comment: Comment };\n  \"comment-updated\": { comment: Comment };\n  \"comment-deleted\": { commentId: string };\n}\n\nexport type EventCallback<T extends keyof SDKEvents> = (\n  event: SDKEvents[T]\n) => void;\n","export interface RoleColor {\n  bg: string;\n  text: string;\n  border: string;\n}\n\nexport const ROLE_COLORS: Record<string, RoleColor> = {\n  developer: {\n    bg: \"#dbeafe\",\n    text: \"#1e40af\",\n    border: \"#3b82f6\",\n  },\n  designer: {\n    bg: \"#fef3c7\",\n    text: \"#92400e\",\n    border: \"#f59e0b\",\n  },\n  \"product-manager\": {\n    bg: \"#dcfce7\",\n    text: \"#166534\",\n    border: \"#22c55e\",\n  },\n  qa: {\n    bg: \"#fce7f3\",\n    text: \"#be185d\",\n    border: \"#ec4899\",\n  },\n  stakeholder: {\n    bg: \"#e0e7ff\",\n    text: \"#3730a3\",\n    border: \"#6366f1\",\n  },\n  other: {\n    bg: \"#f3f4f6\",\n    text: \"#374151\",\n    border: \"#6b7280\",\n  },\n};\n\nexport function getRoleColor(role: string): RoleColor {\n  return ROLE_COLORS[role] || ROLE_COLORS.other;\n}\n\nexport function getRoleDisplayName(role: string): string {\n  const displayNames: Record<string, string> = {\n    developer: \"Developer\",\n    designer: \"Designer\",\n    \"product-manager\": \"Product Manager\",\n    qa: \"QA\",\n    stakeholder: \"Stakeholder\",\n    other: \"Other\",\n  };\n\n  return displayNames[role] || \"Other\";\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { Comment, CommentStatus, User } from \"../types\";\nimport { getRoleColor, getRoleDisplayName } from \"../utils/roleColors\";\nimport \"../styles/comment-sidebar.css\";\n\nexport interface CommentSidebarProps {\n  comments: Comment[];\n  currentUser: User;\n  onNavigateToComment: (comment: Comment) => void;\n  onClose: () => void;\n  onStatusChange: (commentId: string, status: CommentStatus) => Promise<void>;\n}\n\ntype SidebarTab = \"active\" | \"archive\";\n\nexport class CommentSidebar {\n  private element: HTMLElement;\n  private props: CommentSidebarProps;\n  private isVisible: boolean = false;\n  private currentTab: SidebarTab = \"active\";\n  private currentStatusFilter: CommentStatus | \"all\" = \"all\";\n  private isFilterOpen: boolean = false;\n  private commentsList: HTMLElement | null = null;\n  private statsContent: HTMLElement | null = null;\n  private filterContainer: HTMLElement | null = null;\n  private filterToggleBtn: HTMLElement | null = null;\n\n  constructor(props: CommentSidebarProps) {\n    console.log(\n      \"🔧 CommentSidebar: Constructor called with\",\n      props.comments.length,\n      \"comments\"\n    );\n    this.props = props;\n    this.element = this.createElement();\n    console.log(\"🔧 CommentSidebar: Element created:\", this.element);\n    this.attachEventListeners();\n  }\n\n  private formatTimeAgo(dateString: string): string {\n    const now = new Date();\n    const date = new Date(dateString);\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n    if (diffInSeconds < 60) return \"just now\";\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;\n    if (diffInSeconds < 86400)\n      return `${Math.floor(diffInSeconds / 3600)}h ago`;\n    if (diffInSeconds < 2592000)\n      return `${Math.floor(diffInSeconds / 86400)}d ago`;\n    return date.toLocaleDateString();\n  }\n\n  private getStatusColor(status: CommentStatus): { bg: string; text: string } {\n    switch (status) {\n      case CommentStatus.BUG:\n        return { bg: \"#dc3545\", text: \"white\" };\n      case CommentStatus.FEATURE_REQUEST:\n        return { bg: \"#ffc107\", text: \"black\" };\n      case CommentStatus.DEV_COMPLETED:\n        return { bg: \"#3b82f6\", text: \"white\" };\n      case CommentStatus.DONE:\n        return { bg: \"#28a745\", text: \"white\" };\n      case CommentStatus.ARCHIVED:\n        return { bg: \"#6c757d\", text: \"white\" };\n      default:\n        return { bg: \"#007bff\", text: \"white\" };\n    }\n  }\n\n  private getPageName(url: string): string {\n    try {\n      const urlObj = new URL(url);\n      const path = urlObj.pathname;\n\n      // Extract page name from path\n      if (path === \"/\" || path === \"\") return \"Home\";\n\n      const segments = path.split(\"/\").filter(Boolean);\n      if (segments.length === 0) return \"Home\";\n\n      // Convert path to readable name\n      const pageName = segments[segments.length - 1]\n        .split(\"-\")\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(\" \");\n\n      return pageName || \"Unknown Page\";\n    } catch {\n      return \"Unknown Page\";\n    }\n  }\n\n  private getFilteredComments(): Comment[] {\n    let filteredComments: Comment[];\n\n    if (this.currentTab === \"active\") {\n      filteredComments = this.props.comments.filter(\n        (c) => c.status !== \"archived\"\n      );\n    } else {\n      filteredComments = this.props.comments.filter(\n        (c) => c.status === \"archived\"\n      );\n    }\n\n    // Apply status filter if not \"all\"\n    if (this.currentStatusFilter !== \"all\") {\n      filteredComments = filteredComments.filter(\n        (c) => c.status === this.currentStatusFilter\n      );\n    }\n\n    return filteredComments;\n  }\n\n  private switchTab(tab: SidebarTab): void {\n    this.currentTab = tab;\n    this.updateCommentsDisplay();\n    this.updateStats();\n    this.updateTabStates();\n  }\n\n  private switchStatusFilter(status: CommentStatus | \"all\"): void {\n    this.currentStatusFilter = status;\n    this.updateCommentsDisplay();\n    this.updateStats();\n    this.updateFilterStates();\n  }\n\n  private toggleFilter(): void {\n    this.isFilterOpen = !this.isFilterOpen;\n\n    if (this.filterContainer) {\n      if (this.isFilterOpen) {\n        this.filterContainer.classList.remove(\"uicm-sidebar-filters-closed\");\n        this.filterContainer.classList.add(\"uicm-sidebar-filters-open\");\n      } else {\n        this.filterContainer.classList.remove(\"uicm-sidebar-filters-open\");\n        this.filterContainer.classList.add(\"uicm-sidebar-filters-closed\");\n      }\n    }\n\n    if (this.filterToggleBtn) {\n      const arrow = this.filterToggleBtn.querySelector(\n        \".uicm-filter-toggle-arrow\"\n      );\n      if (arrow) {\n        arrow.textContent = this.isFilterOpen ? \"▲\" : \"▼\";\n      }\n    }\n  }\n\n  private updateCommentsDisplay(): void {\n    if (!this.commentsList) return;\n\n    this.commentsList.innerHTML = \"\";\n    const filteredComments = this.getFilteredComments();\n\n    if (filteredComments.length === 0) {\n      const emptyState = document.createElement(\"div\");\n      emptyState.className = \"uicm-sidebar-empty\";\n      const emptyText =\n        this.currentTab === \"active\"\n          ? \"No active comments yet\"\n          : \"No archived comments\";\n      const emptySubtext =\n        this.currentTab === \"active\"\n          ? \"Start commenting on any element to see them here\"\n          : \"Archived comments will appear here\";\n\n      emptyState.innerHTML = `\n        <div class=\"uicm-sidebar-empty-icon\">��</div>\n        <div class=\"uicm-sidebar-empty-title\">${emptyText}</div>\n        <div class=\"uicm-sidebar-empty-subtitle\">${emptySubtext}</div>\n      `;\n      this.commentsList.appendChild(emptyState);\n    } else {\n      filteredComments.forEach((comment) => {\n        const commentItem = this.createCommentItem(comment);\n        this.commentsList!.appendChild(commentItem);\n      });\n    }\n  }\n\n  private updateStats(): void {\n    if (!this.statsContent) return;\n\n    const activeComments = this.props.comments.filter(\n      (c) => c.status !== \"archived\"\n    ).length;\n    const archivedComments = this.props.comments.filter(\n      (c) => c.status === \"archived\"\n    ).length;\n    const totalReplies = this.props.comments.reduce(\n      (sum, comment) => sum + comment.replies.length,\n      0\n    );\n\n    this.statsContent.innerHTML = `\n      <span>📝 ${\n        this.currentTab === \"active\" ? activeComments : archivedComments\n      } ${this.currentTab === \"active\" ? \"active\" : \"archived\"}</span>\n      <span>💬 ${totalReplies} replies</span>\n      <span>📊 ${activeComments + archivedComments} total</span>\n    `;\n  }\n\n  private createCommentItem(comment: Comment): HTMLElement {\n    const item = document.createElement(\"div\");\n    item.className = \"uicm-sidebar-comment-item\";\n\n    // Click to navigate\n    item.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      console.log(\"🔧 Sidebar: Comment item clicked:\", comment.id);\n      this.props.onNavigateToComment(comment);\n    });\n\n    // Header with avatar, name, role, and time\n    const header = document.createElement(\"div\");\n    header.className = \"uicm-sidebar-comment-header\";\n\n    // Avatar\n    const avatar = document.createElement(\"div\");\n    avatar.className = \"uicm-sidebar-comment-avatar\";\n    let avatarChar = \"?\";\n    if (\n      comment &&\n      comment.createdBy &&\n      typeof comment.createdBy.name === \"string\" &&\n      comment.createdBy.name.length > 0\n    ) {\n      avatarChar = comment.createdBy.name.charAt(0).toUpperCase();\n    } else {\n      console.warn(\"Sidebar: Comment missing createdBy or name\", comment);\n    }\n    avatar.textContent = avatarChar;\n\n    // User info container\n    const userInfo = document.createElement(\"div\");\n    userInfo.className = \"uicm-sidebar-comment-user-info\";\n\n    // Name and role row\n    const nameRow = document.createElement(\"div\");\n    nameRow.className = \"uicm-sidebar-comment-name-row\";\n\n    const name = document.createElement(\"span\");\n    name.className = \"uicm-sidebar-comment-name\";\n    name.textContent = comment.createdBy.name;\n\n    // Role badge\n    const roleBadge = document.createElement(\"span\");\n    roleBadge.className = \"uicm-sidebar-comment-role\";\n    const roleColors = getRoleColor(comment.role);\n    roleBadge.style.backgroundColor = roleColors.bg;\n    roleBadge.style.color = roleColors.text;\n    roleBadge.style.borderColor = roleColors.border;\n    roleBadge.textContent = getRoleDisplayName(comment.role);\n\n    // Time\n    const time = document.createElement(\"span\");\n    time.className = \"uicm-sidebar-comment-time\";\n    time.textContent = this.formatTimeAgo(comment.createdAt);\n\n    nameRow.appendChild(name);\n    nameRow.appendChild(roleBadge);\n    nameRow.appendChild(time);\n\n    // Page name\n    const pageName = document.createElement(\"div\");\n    pageName.className = \"uicm-sidebar-comment-page\";\n    pageName.textContent = this.getPageName(comment.url);\n\n    userInfo.appendChild(nameRow);\n    userInfo.appendChild(pageName);\n\n    header.appendChild(avatar);\n    header.appendChild(userInfo);\n\n    // Content\n    const content = document.createElement(\"div\");\n    content.className = \"uicm-sidebar-comment-content\";\n    content.textContent = comment.content;\n\n    // Footer with status and reply count\n    const footer = document.createElement(\"div\");\n    footer.className = \"uicm-sidebar-comment-footer\";\n\n    // Status badge\n    const statusBadge = document.createElement(\"span\");\n    statusBadge.className = \"uicm-sidebar-comment-status\";\n    const statusColors = this.getStatusColor(comment.status);\n    statusBadge.style.backgroundColor = statusColors.bg;\n    statusBadge.style.color = statusColors.text;\n    statusBadge.textContent = comment?.status?.toUpperCase();\n\n    // Reply count\n    const replyCount = document.createElement(\"span\");\n    replyCount.className = \"uicm-sidebar-comment-replies\";\n    const replyIcon = document.createElement(\"span\");\n    replyIcon.className = \"uicm-sidebar-comment-replies-icon\";\n    replyIcon.textContent = \"💬\";\n    replyCount.appendChild(replyIcon);\n    replyCount.appendChild(\n      document.createTextNode(`${comment.replies.length}`)\n    );\n\n    footer.appendChild(statusBadge);\n    footer.appendChild(replyCount);\n\n    item.appendChild(header);\n    item.appendChild(content);\n    item.appendChild(footer);\n\n    return item;\n  }\n\n  private createElement(): HTMLElement {\n    const sidebar = document.createElement(\"div\");\n    sidebar.className = \"uicm-comment-sidebar\";\n\n    // Header\n    const header = document.createElement(\"div\");\n    header.className = \"uicm-sidebar-header\";\n\n    const title = document.createElement(\"h3\");\n    title.className = \"uicm-sidebar-title\";\n    title.textContent = \"All Comments\";\n\n    const closeButton = document.createElement(\"button\");\n    closeButton.className = \"uicm-sidebar-close\";\n    closeButton.innerHTML = \"×\";\n    closeButton.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.onClose();\n    });\n\n    header.appendChild(title);\n    header.appendChild(closeButton);\n\n    // Tabs\n    const tabsContainer = document.createElement(\"div\");\n    tabsContainer.className = \"uicm-sidebar-tabs\";\n\n    const activeTab = document.createElement(\"button\");\n    activeTab.className = \"uicm-sidebar-tab uicm-sidebar-tab-active\";\n    activeTab.textContent = \"Active\";\n    activeTab.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.switchTab(\"active\");\n    });\n\n    const archiveTab = document.createElement(\"button\");\n    archiveTab.className = \"uicm-sidebar-tab\";\n    archiveTab.textContent = \"Archive\";\n    archiveTab.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.switchTab(\"archive\");\n    });\n\n    tabsContainer.appendChild(activeTab);\n    tabsContainer.appendChild(archiveTab);\n\n    // Filter Toggle Button\n    this.filterToggleBtn = document.createElement(\"button\");\n    this.filterToggleBtn.className = \"uicm-sidebar-filter-toggle\";\n    this.filterToggleBtn.innerHTML = `\n      <span class=\"uicm-filter-toggle-icon\">🔍</span>\n      <span class=\"uicm-filter-toggle-text\">Filter</span>\n      <span class=\"uicm-filter-toggle-arrow\">▼</span>\n    `;\n    this.filterToggleBtn.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleFilter();\n    });\n\n    // Status Filters\n    this.filterContainer = document.createElement(\"div\");\n    this.filterContainer.className =\n      \"uicm-sidebar-filters uicm-sidebar-filters-closed\";\n\n    const filterHeader = document.createElement(\"div\");\n    filterHeader.className = \"uicm-sidebar-filter-header\";\n\n    const filterIcon = document.createElement(\"span\");\n    filterIcon.className = \"uicm-sidebar-filter-icon\";\n    filterIcon.innerHTML = \"🔍\";\n\n    const filterTitle = document.createElement(\"div\");\n    filterTitle.className = \"uicm-sidebar-filter-title\";\n    filterTitle.textContent = \"Filter by Status\";\n\n    filterHeader.appendChild(filterIcon);\n    filterHeader.appendChild(filterTitle);\n\n    const filterButtons = document.createElement(\"div\");\n    filterButtons.className = \"uicm-sidebar-filter-buttons\";\n\n    // All filter button\n    const allFilterBtn = document.createElement(\"button\");\n    allFilterBtn.className = \"uicm-status-filter-btn active\";\n    allFilterBtn.setAttribute(\"data-status\", \"all\");\n    allFilterBtn.innerHTML = `\n      <span class=\"uicm-filter-btn-icon\">📋</span>\n      <span class=\"uicm-filter-btn-text\">All</span>\n    `;\n    allFilterBtn.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.switchStatusFilter(\"all\");\n    });\n\n    // Status filter buttons\n    const statusFilters = [\n      {\n        status: CommentStatus.BUG,\n        label: \"Bug\",\n        icon: \"🐛\",\n        color: \"#dc3545\",\n        colorDark: \"#c82333\",\n        colorDarker: \"#a71e2a\",\n        colorRgb: \"220, 53, 69\",\n      },\n      {\n        status: CommentStatus.FEATURE_REQUEST,\n        label: \"Feature\",\n        icon: \"💡\",\n        color: \"#ffc107\",\n        colorDark: \"#e0a800\",\n        colorDarker: \"#d39e00\",\n        colorRgb: \"255, 193, 7\",\n      },\n      {\n        status: CommentStatus.DEV_COMPLETED,\n        label: \"Dev Done\",\n        icon: \"✅\",\n        color: \"#3b82f6\",\n        colorDark: \"#2563eb\",\n        colorDarker: \"#1d4ed8\",\n        colorRgb: \"59, 130, 246\",\n      },\n      {\n        status: CommentStatus.DONE,\n        label: \"Done\",\n        icon: \"🎉\",\n        color: \"#28a745\",\n        colorDark: \"#218838\",\n        colorDarker: \"#1e7e34\",\n        colorRgb: \"40, 167, 69\",\n      },\n    ];\n\n    statusFilters.forEach(\n      ({ status, label, icon, color, colorDark, colorDarker, colorRgb }) => {\n        const filterBtn = document.createElement(\"button\");\n        filterBtn.className = \"uicm-status-filter-btn\";\n        filterBtn.setAttribute(\"data-status\", status);\n        filterBtn.setAttribute(\"data-color\", color);\n        filterBtn.innerHTML = `\n        <span class=\"uicm-filter-btn-icon\">${icon}</span>\n        <span class=\"uicm-filter-btn-text\">${label}</span>\n      `;\n\n        // Set CSS custom properties for color coding\n        (filterBtn as HTMLElement).style.setProperty(\"--status-color\", color);\n        (filterBtn as HTMLElement).style.setProperty(\n          \"--status-color-dark\",\n          colorDark\n        );\n        (filterBtn as HTMLElement).style.setProperty(\n          \"--status-color-darker\",\n          colorDarker\n        );\n        (filterBtn as HTMLElement).style.setProperty(\n          \"--status-color-rgb\",\n          colorRgb\n        );\n\n        filterBtn.addEventListener(\"click\", (e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          this.switchStatusFilter(status);\n        });\n        filterButtons.appendChild(filterBtn);\n      }\n    );\n\n    this.filterContainer.appendChild(filterHeader);\n    this.filterContainer.appendChild(filterButtons);\n\n    // Stats\n    const stats = document.createElement(\"div\");\n    stats.className = \"uicm-sidebar-stats\";\n\n    const activeComments = this.props.comments.filter(\n      (c) => c.status !== \"archived\"\n    ).length;\n    const archivedComments = this.props.comments.filter(\n      (c) => c.status === \"archived\"\n    ).length;\n    const totalReplies = this.props.comments.reduce(\n      (sum, comment) => sum + comment.replies.length,\n      0\n    );\n\n    this.statsContent = document.createElement(\"div\");\n    this.statsContent.className = \"uicm-sidebar-stats-content\";\n    this.statsContent.innerHTML = `\n      <span>📝 ${activeComments} active</span>\n      <span>💬 ${totalReplies} replies</span>\n      <span>📊 ${activeComments + archivedComments} total</span>\n    `;\n    stats.appendChild(this.statsContent);\n\n    // Comments list\n    this.commentsList = document.createElement(\"div\");\n    this.commentsList.className = \"uicm-sidebar-comments-list\";\n\n    // Populate comments based on current tab\n    this.updateCommentsDisplay();\n\n    sidebar.appendChild(header);\n    sidebar.appendChild(tabsContainer);\n    sidebar.appendChild(this.filterToggleBtn);\n    sidebar.appendChild(this.filterContainer);\n    sidebar.appendChild(stats);\n    sidebar.appendChild(this.commentsList);\n\n    return sidebar;\n  }\n\n  private attachEventListeners(): void {\n    // ESC key to close\n    const escHandler = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\" && this.isVisible) {\n        this.props.onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", escHandler);\n\n    // Clean up on destroy\n    this.element.addEventListener(\"destroy\", () => {\n      document.removeEventListener(\"keydown\", escHandler);\n    });\n  }\n\n  public show(): void {\n    this.isVisible = true;\n\n    document.body.appendChild(this.element);\n\n    this.element.offsetHeight;\n\n    this.element.classList.add(\"show\");\n  }\n\n  public hide(): void {\n    console.log(\"🔧 CommentSidebar: hide() called\");\n    this.isVisible = false;\n\n    // Remove show class to trigger slide out animation\n    this.element.classList.remove(\"show\");\n\n    // Remove from DOM after animation\n    setTimeout(() => {\n      if (this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n        console.log(\"🔧 CommentSidebar: Element removed from DOM\");\n      }\n    }, 300);\n  }\n\n  public updateComments(comments: Comment[]): void {\n    this.props.comments = comments;\n    this.updateCommentsDisplay();\n    this.updateStats();\n    this.updateTabStates();\n    this.updateFilterStates();\n  }\n\n  private updateTabStates(): void {\n    const activeTab = this.element.querySelector(\".uicm-sidebar-tab.active\");\n    const archiveTab = this.element.querySelector(\".uicm-sidebar-tab.archive\");\n\n    if (activeTab) {\n      activeTab.classList.toggle(\"active\", this.currentTab === \"active\");\n    }\n    if (archiveTab) {\n      archiveTab.classList.toggle(\"active\", this.currentTab === \"archive\");\n    }\n  }\n\n  private updateFilterStates(): void {\n    if (!this.filterContainer) return;\n\n    const filterButtons = this.filterContainer.querySelectorAll(\n      \".uicm-status-filter-btn\"\n    );\n    filterButtons.forEach((btn) => {\n      const status = btn.getAttribute(\"data-status\");\n\n      if (\n        status === this.currentStatusFilter ||\n        (status === \"all\" && this.currentStatusFilter === \"all\")\n      ) {\n        btn.classList.add(\"active\");\n      } else {\n        btn.classList.remove(\"active\");\n      }\n    });\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public destroy(): void {\n    this.hide();\n    this.element.dispatchEvent(new Event(\"destroy\"));\n  }\n}\n","import { DebugIconProps } from \"../types\";\n\nexport class DebugIcon {\n  private element: HTMLElement;\n  private props: DebugIconProps;\n\n  constructor(props: DebugIconProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const icon = document.createElement(\"div\");\n    icon.className = \"uicm-debug-icon\";\n    icon.setAttribute(\"data-uicm-element\", \"true\");\n    icon.style.position = \"fixed\";\n    icon.style.right = \"20px\";\n    icon.style.top = \"20px\";\n    icon.style.width = \"40px\";\n    icon.style.height = \"40px\";\n    icon.style.borderRadius = \"50%\";\n    icon.style.backgroundColor = this.props.isActive\n      ? \"rgba(255, 0, 0, 0.8)\"\n      : \"rgba(0, 0, 0, 0.5)\";\n    icon.style.display = \"flex\";\n    icon.style.alignItems = \"center\";\n    icon.style.justifyContent = \"center\";\n    icon.style.cursor = \"pointer\";\n    icon.style.transition = \"all 0.3s ease\";\n    icon.style.zIndex = \"999999\";\n    icon.style.boxShadow = \"0 2px 8px rgba(0, 0, 0, 0.2)\";\n    icon.style.pointerEvents = \"auto\";\n\n    // Add hover effect\n    icon.addEventListener(\"mouseenter\", () => {\n      icon.style.transform = \"scale(1.1)\";\n      icon.style.backgroundColor = this.props.isActive\n        ? \"rgba(255, 0, 0, 1)\"\n        : \"rgba(0, 0, 0, 0.8)\";\n    });\n\n    icon.addEventListener(\"mouseleave\", () => {\n      icon.style.transform = \"scale(1)\";\n      icon.style.backgroundColor = this.props.isActive\n        ? \"rgba(255, 0, 0, 0.8)\"\n        : \"rgba(0, 0, 0, 0.5)\";\n    });\n\n    icon.innerHTML = this.getIconHTML();\n\n    return icon;\n  }\n\n  private getIconHTML(): string {\n    if (this.props.isActive) {\n      return `\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n        </svg>\n      `;\n    } else {\n      return `\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z\"/>\n        </svg>\n      `;\n    }\n  }\n\n  private attachEventListeners(): void {\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      this.props.onClick();\n    });\n\n    // Add tooltip functionality\n    let tooltip: HTMLElement | null = null;\n\n    this.element.addEventListener(\"mouseenter\", () => {\n      tooltip = this.createTooltip();\n      document.body.appendChild(tooltip);\n    });\n\n    this.element.addEventListener(\"mouseleave\", () => {\n      if (tooltip) {\n        tooltip.remove();\n        tooltip = null;\n      }\n    });\n  }\n\n  private createTooltip(): HTMLElement {\n    const tooltip = document.createElement(\"div\");\n    tooltip.className = \"uicm-tooltip\";\n    tooltip.setAttribute(\"data-uicm-element\", \"true\");\n\n    const iconRect = this.element.getBoundingClientRect();\n    tooltip.style.left = `${iconRect.right + 8}px`;\n    tooltip.style.top = `${iconRect.top + iconRect.height / 2 - 12}px`;\n\n    return tooltip;\n  }\n\n  public updateState(isActive: boolean): void {\n    this.props.isActive = isActive;\n    this.element.className = \"uicm-debug-icon\";\n\n    // Update background color based on active state\n    this.element.style.backgroundColor = this.props.isActive\n      ? \"rgba(255, 0, 0, 0.8)\"\n      : \"rgba(0, 0, 0, 0.5)\";\n\n    this.element.innerHTML = this.getIconHTML();\n  }\n\n  public updateTheme(theme: \"light\" | \"dark\"): void {\n    this.props.theme = theme;\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public destroy(): void {\n    // Remove any existing tooltips\n    const tooltips = document.querySelectorAll(\".uicm-tooltip\");\n    tooltips.forEach((tooltip) => tooltip.remove());\n\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }\n}\n","import { Comment } from \"../types\";\n\nexport class HybridCommentStorage {\n  private static readonly STORAGE_KEY = \"uicm-comments\";\n  private static readonly JSON_FILE_PATH = \"/src/storage/comments.json\";\n\n  // Load comments từ cả localStorage và file JSON\n  public static async loadComments(): Promise<Comment[]> {\n    try {\n      // Load từ localStorage trước\n      const localComments = this.loadFromLocalStorage();\n\n      // Load từ file JSON\n      const fileComments = await this.loadFromJsonFile();\n\n      // Merge comments (localStorage có priority)\n      const mergedComments = this.mergeComments(localComments, fileComments);\n\n      return mergedComments;\n    } catch (error) {\n      console.error(\"Failed to load comments:\", error);\n      return [];\n    }\n  }\n\n  // Load từ localStorage\n  private static loadFromLocalStorage(): Comment[] {\n    try {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      if (stored) {\n        const data = JSON.parse(stored);\n        return data.comments || [];\n      }\n    } catch (error) {\n      console.error(\"Failed to load from localStorage:\", error);\n    }\n    return [];\n  }\n\n  // Load từ file JSON\n  private static async loadFromJsonFile(): Promise<Comment[]> {\n    try {\n      // Trong environment development, có thể load từ file\n      const isDevelopment =\n        typeof window !== \"undefined\" &&\n        window.location.hostname === \"localhost\";\n      if (isDevelopment) {\n        const response = await fetch(this.JSON_FILE_PATH);\n        if (response.ok) {\n          const data = await response.json();\n          return data.comments || [];\n        }\n      }\n    } catch (error: any) {\n      console.log(\n        \"Could not load from JSON file (this is normal in production):\",\n        error.message\n      );\n    }\n    return [];\n  }\n\n  // Merge comments từ hai nguồn\n  private static mergeComments(\n    localComments: Comment[],\n    fileComments: Comment[]\n  ): Comment[] {\n    const commentMap = new Map<string, Comment>();\n\n    // Add file comments first\n    fileComments.forEach((comment) => {\n      commentMap.set(comment.id, comment);\n    });\n\n    // Override with local comments (có priority cao hơn)\n    localComments.forEach((comment) => {\n      commentMap.set(comment.id, comment);\n    });\n\n    return Array.from(commentMap.values());\n  }\n\n  // Save comments vào cả localStorage và file JSON\n  public static async saveComments(comments: Comment[]): Promise<void> {\n    try {\n      // Save vào localStorage\n      this.saveToLocalStorage(comments);\n\n      // Save vào file JSON (development only)\n      await this.saveToJsonFile(comments);\n    } catch (error) {\n      console.error(\"Failed to save comments:\", error);\n    }\n  }\n\n  // Save vào localStorage\n  private static saveToLocalStorage(comments: Comment[]): void {\n    try {\n      const data = {\n        comments,\n        lastUpdated: new Date().toISOString(),\n        source: \"hybrid-storage\",\n      };\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n    } catch (error) {\n      console.error(\"Failed to save to localStorage:\", error);\n    }\n  }\n\n  // Save vào file JSON (development only)\n  private static async saveToJsonFile(comments: Comment[]): Promise<void> {\n    try {\n      const isDevelopment =\n        typeof window !== \"undefined\" &&\n        window.location.hostname === \"localhost\";\n      if (isDevelopment) {\n        const data = {\n          comments,\n          lastUpdated: new Date().toISOString(),\n          version: \"1.0.0\",\n          source: \"hybrid-storage\",\n        };\n\n        // Tạo JSON string\n        const jsonString = JSON.stringify(data, null, 2);\n\n        // Log để copy vào file manually\n        console.log(\"📝 Copy this JSON to src/storage/comments.json:\");\n        console.log(jsonString);\n\n        // Tự động download file\n        this.downloadJsonFile(jsonString);\n      }\n    } catch (error) {\n      console.error(\"Failed to save to JSON file:\", error);\n    }\n  }\n\n  // Download JSON file\n  private static downloadJsonFile(jsonString: string): void {\n    try {\n      const blob = new Blob([jsonString], { type: \"application/json\" });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = \"comments.json\";\n      a.style.display = \"none\";\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n\n      console.log(\n        \"💾 Downloaded comments.json - Please replace src/storage/comments.json with this file\"\n      );\n    } catch (error) {\n      console.error(\"Failed to download JSON file:\", error);\n    }\n  }\n\n  // Add new comment\n  public static async addComment(\n    comment: Omit<Comment, \"id\" | \"createdAt\">\n  ): Promise<Comment> {\n    const comments = await this.loadComments();\n\n    const newComment: Comment = {\n      ...comment,\n      id: this.generateId(),\n      createdAt: new Date().toISOString(),\n    };\n\n    comments.push(newComment);\n    await this.saveComments(comments);\n\n    return newComment;\n  }\n\n  // Update comment\n  public static async updateComment(updatedComment: Comment): Promise<Comment> {\n    const comments = await this.loadComments();\n    const index = comments.findIndex((c) => c.id === updatedComment.id);\n\n    if (index !== -1) {\n      comments[index] = updatedComment;\n      await this.saveComments(comments);\n    }\n\n    return updatedComment;\n  }\n\n  // Delete comment\n  public static async deleteComment(commentId: string): Promise<void> {\n    const comments = await this.loadComments();\n    const filteredComments = comments.filter((c) => c.id !== commentId);\n    await this.saveComments(filteredComments);\n  }\n\n  // Update user name in all comments\n  public static async updateUserNameInAllComments(\n    userId: string,\n    newName: string\n  ): Promise<void> {\n    const comments = await this.loadComments();\n    let hasChanges = false;\n\n    // Update main comments\n    for (const comment of comments) {\n      if (comment.createdBy.id === userId) {\n        comment.createdBy.name = newName;\n        hasChanges = true;\n      }\n\n      // Update replies\n      for (const reply of comment.replies) {\n        if (reply.createdBy.id === userId) {\n          reply.createdBy.name = newName;\n          hasChanges = true;\n        }\n      }\n    }\n\n    // Save only if there were changes\n    if (hasChanges) {\n      await this.saveComments(comments);\n      console.log(\n        `✅ Updated user name from ${userId} to \"${newName}\" in all comments`\n      );\n    } else {\n      console.log(`ℹ️ No comments found for user ${userId}`);\n    }\n  }\n\n  // Get comments for URL\n  public static async getCommentsForUrl(url: string): Promise<Comment[]> {\n    const allComments = await this.loadComments();\n    return allComments.filter((comment) => comment.url === url);\n  }\n\n  // Generate unique ID\n  private static generateId(): string {\n    return (\n      \"comment_\" + Date.now() + \"_\" + Math.random().toString(36).substr(2, 9)\n    );\n  }\n\n  // Clear all comments\n  public static async clearAllComments(): Promise<void> {\n    localStorage.removeItem(this.STORAGE_KEY);\n    await this.saveComments([]);\n  }\n\n  // Sync từ localStorage lên file JSON\n  public static async syncToFile(): Promise<void> {\n    const localComments = this.loadFromLocalStorage();\n    await this.saveToJsonFile(localComments);\n    console.log(\"✅ Synced localStorage comments to JSON file\");\n  }\n\n  // Import từ file JSON vào localStorage\n  public static async importFromFile(): Promise<void> {\n    const fileComments = await this.loadFromJsonFile();\n    this.saveToLocalStorage(fileComments);\n    console.log(\"✅ Imported file comments to localStorage\");\n  }\n}\n","import { User } from \"../types\";\nimport { HybridCommentStorage } from \"../storage/HybridCommentStorage\";\n\nexport interface ProfileSettingsModalProps {\n  currentUser: User;\n  onSave: (user: User) => Promise<void>;\n  onClose: () => void;\n}\n\nexport class ProfileSettingsModal {\n  private element: HTMLElement;\n  private props: ProfileSettingsModalProps;\n\n  constructor(props: ProfileSettingsModalProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const modal = document.createElement(\"div\");\n    modal.className = \"uicm-profile-modal\";\n    modal.innerHTML = `\n      <div class=\"uicm-profile-modal-overlay\"></div>\n      <div class=\"uicm-profile-modal-content\">\n        <div class=\"uicm-profile-modal-header\">\n          <h3 class=\"uicm-profile-modal-title\">Profile Settings</h3>\n          <button class=\"uicm-profile-modal-close\" type=\"button\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n        \n        <div class=\"uicm-profile-modal-body\">\n          <div class=\"uicm-profile-avatar-section\">\n            <div class=\"uicm-profile-avatar\">\n              <span class=\"uicm-profile-avatar-text\">${this.props.currentUser.name\n                .charAt(0)\n                .toUpperCase()}</span>\n            </div>\n            <div class=\"uicm-profile-avatar-info\">\n              <p class=\"uicm-profile-avatar-label\">Profile Picture</p>\n              <p class=\"uicm-profile-avatar-subtitle\">Avatar will be generated from your name</p>\n            </div>\n          </div>\n\n          <form class=\"uicm-profile-form\">\n            <div class=\"uicm-form-group\">\n              <label class=\"uicm-form-label\" for=\"profile-name\">Name</label>\n              <input \n                type=\"text\" \n                id=\"profile-name\" \n                class=\"uicm-form-input\" \n                value=\"${this.props.currentUser.name}\"\n                placeholder=\"Enter your name\"\n                maxlength=\"50\"\n              />\n              <div class=\"uicm-form-help\">This name will be displayed on your comments</div>\n            </div>\n\n            <div class=\"uicm-form-group\">\n              <label class=\"uicm-form-label\" for=\"profile-role\">Role</label>\n              <select id=\"profile-role\" class=\"uicm-form-select\">\n                <option value=\"developer\" ${\n                  this.props.currentUser.role === \"developer\" ? \"selected\" : \"\"\n                }>Developer</option>\n                <option value=\"designer\" ${\n                  this.props.currentUser.role === \"designer\" ? \"selected\" : \"\"\n                }>Designer</option>\n                <option value=\"product-manager\" ${\n                  this.props.currentUser.role === \"product-manager\"\n                    ? \"selected\"\n                    : \"\"\n                }>Product Manager</option>\n                <option value=\"qa\" ${\n                  this.props.currentUser.role === \"qa\" ? \"selected\" : \"\"\n                }>QA Tester</option>\n                <option value=\"stakeholder\" ${\n                  this.props.currentUser.role === \"stakeholder\"\n                    ? \"selected\"\n                    : \"\"\n                }>Stakeholder</option>\n                <option value=\"other\" ${\n                  this.props.currentUser.role === \"other\" ? \"selected\" : \"\"\n                }>Other</option>\n              </select>\n              <div class=\"uicm-form-help\">Your role helps others understand your perspective</div>\n            </div>\n          </form>\n        </div>\n\n        <div class=\"uicm-profile-modal-footer\">\n          <button class=\"uicm-btn uicm-btn-secondary\" type=\"button\">Cancel</button>\n          <button class=\"uicm-btn uicm-btn-primary\" type=\"button\">Save Changes</button>\n        </div>\n      </div>\n    `;\n\n    return modal;\n  }\n\n  private attachEventListeners(): void {\n    // Prevent modal from closing when clicking inside modal content\n    const modalContent = this.element.querySelector(\n      \".uicm-profile-modal-content\"\n    );\n    if (modalContent) {\n      modalContent.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n      });\n    }\n\n    // Close button\n    const closeBtn = this.element.querySelector(\".uicm-profile-modal-close\");\n    if (closeBtn) {\n      closeBtn.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        this.props.onClose();\n      });\n    }\n\n    // Cancel button\n    const cancelBtn = this.element.querySelector(\".uicm-btn-secondary\");\n    if (cancelBtn) {\n      cancelBtn.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        this.props.onClose();\n      });\n    }\n\n    // Save button\n    const saveBtn = this.element.querySelector(\".uicm-btn-primary\");\n    if (saveBtn) {\n      saveBtn.addEventListener(\"click\", async (e) => {\n        e.stopPropagation();\n        await this.handleSave();\n      });\n    }\n\n    // Close on overlay click\n    const overlay = this.element.querySelector(\".uicm-profile-modal-overlay\");\n    if (overlay) {\n      overlay.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        this.props.onClose();\n      });\n    }\n\n    // Prevent clicks inside modal from bubbling\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n    });\n\n    // Prevent other events from bubbling\n    this.element.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"mouseup\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keydown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keyup\", (e) => {\n      e.stopPropagation();\n    });\n\n    // Close on Escape key\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        this.props.onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscape);\n\n    // Clean up escape listener when modal is destroyed\n    this.element.addEventListener(\"remove\", () => {\n      document.removeEventListener(\"keydown\", handleEscape);\n    });\n\n    // Update avatar when name changes\n    const nameInput = this.element.querySelector(\n      \"#profile-name\"\n    ) as HTMLInputElement;\n    const avatarText = this.element.querySelector(\".uicm-profile-avatar-text\");\n\n    if (nameInput && avatarText) {\n      nameInput.addEventListener(\"input\", (e) => {\n        e.stopPropagation();\n        const name = nameInput.value.trim();\n        if (name) {\n          avatarText.textContent = name.charAt(0).toUpperCase();\n        } else {\n          avatarText.textContent = this.props.currentUser.name\n            .charAt(0)\n            .toUpperCase();\n        }\n      });\n    }\n  }\n\n  private async handleSave(): Promise<void> {\n    const nameInput = this.element.querySelector(\n      \"#profile-name\"\n    ) as HTMLInputElement;\n    const roleSelect = this.element.querySelector(\n      \"#profile-role\"\n    ) as HTMLSelectElement;\n    const saveBtn = this.element.querySelector(\n      \".uicm-btn-primary\"\n    ) as HTMLButtonElement;\n\n    if (!nameInput || !roleSelect || !saveBtn) return;\n\n    const name = nameInput.value.trim();\n    const role = roleSelect.value;\n\n    if (!name) {\n      // Show error\n      nameInput.classList.add(\"uicm-form-input-error\");\n      return;\n    }\n\n    // Remove error state\n    nameInput.classList.remove(\"uicm-form-input-error\");\n\n    // Disable save button\n    saveBtn.disabled = true;\n    saveBtn.textContent = \"Saving...\";\n\n    try {\n      const updatedUser: User = {\n        ...this.props.currentUser,\n        name,\n        role: role as any, // Type assertion for role\n      };\n\n      // Check if name has changed\n      const nameChanged = this.props.currentUser.name !== name;\n\n      // Update profile first\n      await this.props.onSave(updatedUser);\n\n      // If name changed, update all comments\n      if (nameChanged) {\n        console.log(\n          `🔄 Updating user name from \"${this.props.currentUser.name}\" to \"${name}\" in all comments...`\n        );\n        await HybridCommentStorage.updateUserNameInAllComments(\n          this.props.currentUser.id,\n          name\n        );\n      }\n\n      console.log(\"✅ Profile updated successfully\");\n      this.props.onClose();\n    } catch (error) {\n      console.error(\"Failed to update profile:\", error);\n      // Re-enable save button\n      saveBtn.disabled = false;\n      saveBtn.textContent = \"Save Changes\";\n    }\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public destroy(): void {\n    // Remove escape listener\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        this.props.onClose();\n      }\n    };\n    document.removeEventListener(\"keydown\", handleEscape);\n\n    this.element.remove();\n  }\n}\n","import { User } from \"../types\";\n\nconst USER_PROFILE_KEY = \"uicm-user-profile\";\n\nexport interface UserProfileStorage {\n  saveUserProfile(user: User): void;\n  loadUserProfile(): User | null;\n  clearUserProfile(): void;\n  updateUserProfile(updates: Partial<User>): User | null;\n}\n\nexport class LocalUserProfileStorage implements UserProfileStorage {\n  private storageKey: string;\n\n  constructor(storageKey: string = USER_PROFILE_KEY) {\n    this.storageKey = storageKey;\n  }\n\n  public saveUserProfile(user: User): void {\n    try {\n      const userData = JSON.stringify(user);\n      localStorage.setItem(this.storageKey, userData);\n      console.log(\"✅ User profile saved to localStorage:\", user);\n    } catch (error) {\n      console.error(\"Failed to save user profile to localStorage:\", error);\n    }\n  }\n\n  public loadUserProfile(): User | null {\n    try {\n      const userData = localStorage.getItem(this.storageKey);\n      if (!userData) {\n        return null;\n      }\n\n      const user = JSON.parse(userData) as User;\n      console.log(\"📂 User profile loaded from localStorage:\", user);\n      return user;\n    } catch (error) {\n      console.error(\"Failed to load user profile from localStorage:\", error);\n      return null;\n    }\n  }\n\n  public clearUserProfile(): void {\n    try {\n      localStorage.removeItem(this.storageKey);\n      console.log(\"🗑️ User profile cleared from localStorage\");\n    } catch (error) {\n      console.error(\"Failed to clear user profile from localStorage:\", error);\n    }\n  }\n\n  public updateUserProfile(updates: Partial<User>): User | null {\n    try {\n      const currentUser = this.loadUserProfile();\n      if (!currentUser) {\n        return null;\n      }\n\n      const updatedUser: User = {\n        ...currentUser,\n        ...updates,\n      };\n\n      this.saveUserProfile(updatedUser);\n      console.log(\"🔄 User profile updated in localStorage:\", updatedUser);\n      return updatedUser;\n    } catch (error) {\n      console.error(\"Failed to update user profile in localStorage:\", error);\n      return null;\n    }\n  }\n}\n\n// Default instance\nexport const userProfileStorage = new LocalUserProfileStorage();\n","import { User } from \"../types\";\nimport { ProfileSettingsModal } from \"./ProfileSettingsModal\";\nimport { userProfileStorage } from \"../utils/userProfileStorage\";\n\nexport interface SettingsButtonProps {\n  currentUser: User;\n  onUserUpdate: (user: User) => Promise<void>;\n  isVisible?: boolean;\n}\n\nexport class SettingsButton {\n  private element: HTMLElement;\n  private props: SettingsButtonProps;\n  private profileModal: ProfileSettingsModal | null = null;\n\n  constructor(props: SettingsButtonProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const button = document.createElement(\"button\");\n    button.className = \"uicm-settings-button\";\n    button.type = \"button\";\n    button.title = \"Profile Settings\";\n    button.style.display = this.props.isVisible === true ? \"flex\" : \"none\";\n    if (this.props.isVisible !== true) {\n      button.style.opacity = \"0\";\n      button.style.transform = \"scale(0.8) translateY(20px)\";\n    }\n\n    // Use a simple gear icon with CSS\n    button.innerHTML = `\n      <div class=\"uicm-settings-icon\">\n        <div class=\"uicm-gear-icon\">⚙</div>\n      </div>\n    `;\n\n    return button;\n  }\n\n  private attachEventListeners(): void {\n    this.element.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.openProfileSettings();\n    });\n  }\n\n  private openProfileSettings(): void {\n    // Close existing modal if any\n    if (this.profileModal) {\n      this.profileModal.destroy();\n      this.profileModal = null;\n    }\n\n    // Create and show profile settings modal\n    this.profileModal = new ProfileSettingsModal({\n      currentUser: this.props.currentUser,\n      onSave: async (updatedUser: User) => {\n        // Save to localStorage first\n        userProfileStorage.saveUserProfile(updatedUser);\n\n        // Then update in SDK\n        await this.props.onUserUpdate(updatedUser);\n\n        // Update current user in props\n        this.props.currentUser = updatedUser;\n\n        console.log(\"✅ Profile saved to localStorage and updated in SDK\");\n      },\n      onClose: () => {\n        if (this.profileModal) {\n          this.profileModal.destroy();\n          this.profileModal = null;\n        }\n      },\n    });\n\n    // Add modal to body\n    document.body.appendChild(this.profileModal.getElement());\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public setVisible(visible: boolean): void {\n    if (visible) {\n      this.element.style.display = \"flex\";\n      // Trigger animation by removing and re-adding the element\n      setTimeout(() => {\n        this.element.style.opacity = \"1\";\n        this.element.style.transform = \"scale(1) translateY(0)\";\n      }, 10);\n    } else {\n      this.element.style.opacity = \"0\";\n      this.element.style.transform = \"scale(0.8) translateY(20px)\";\n      setTimeout(() => {\n        this.element.style.display = \"none\";\n      }, 300); // Match transition duration\n    }\n  }\n\n  public destroy(): void {\n    if (this.profileModal) {\n      this.profileModal.destroy();\n      this.profileModal = null;\n    }\n    this.element.remove();\n  }\n}\n","import { User } from \"../types\";\n\nexport interface SidebarButtonProps {\n  currentUser: User;\n  onClick: () => void;\n  isVisible?: boolean;\n}\n\nexport class SidebarButton {\n  private element: HTMLElement;\n  private props: SidebarButtonProps;\n\n  constructor(props: SidebarButtonProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const button = document.createElement(\"button\");\n    button.className = \"uicm-sidebar-button\";\n    button.type = \"button\";\n    button.title = \"View All Comments\";\n    button.style.display = this.props.isVisible === true ? \"flex\" : \"none\";\n    if (this.props.isVisible !== true) {\n      button.style.opacity = \"0\";\n      button.style.transform = \"scale(0.8) translateY(20px)\";\n    }\n\n    // Use a list icon\n    button.innerHTML = `\n      <div class=\"uicm-sidebar-icon\">\n        <div class=\"uicm-list-icon\">📋</div>\n      </div>\n    `;\n\n    return button;\n  }\n\n  private attachEventListeners(): void {\n    this.element.addEventListener(\"click\", (e) => {\n      console.log(\"🔧 SidebarButton: Clicked!\");\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.onClick();\n    });\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public setVisible(visible: boolean): void {\n    if (visible) {\n      this.element.style.display = \"flex\";\n      // Trigger animation by removing and re-adding the element\n      setTimeout(() => {\n        this.element.style.opacity = \"1\";\n        this.element.style.transform = \"scale(1) translateY(0)\";\n      }, 10);\n    } else {\n      this.element.style.opacity = \"0\";\n      this.element.style.transform = \"scale(0.8) translateY(20px)\";\n      setTimeout(() => {\n        this.element.style.display = \"none\";\n      }, 300); // Match transition duration\n    }\n  }\n\n  public updateUser(user: User): void {\n    this.props.currentUser = user;\n    // Sidebar button doesn't display user info, so no UI update needed\n    console.log(\"🔄 SidebarButton: User updated:\", user.name);\n  }\n\n  public destroy(): void {\n    this.element.remove();\n  }\n}\n","/**\n * Get the position of an element relative to the viewport\n */\nexport function getElementPosition(element: Element): { x: number; y: number } {\n  const rect = element.getBoundingClientRect();\n  return {\n    x: rect.left + rect.width / 2,\n    y: rect.top + rect.height / 2,\n  };\n}\n\n/**\n * Ensure a modal/form stays within viewport boundaries\n */\nexport function constrainToViewport(\n  element: HTMLElement,\n  position: { x: number; y: number },\n  options: {\n    padding?: number;\n    preferredSide?: \"top\" | \"bottom\" | \"left\" | \"right\";\n  } = {}\n): { x: number; y: number } {\n  const { padding = 16, preferredSide = \"bottom\" } = options;\n\n  // Get viewport dimensions\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  // Get element dimensions (use getBoundingClientRect for accurate size)\n  const rect = element.getBoundingClientRect();\n  const elementWidth = rect.width || 400; // fallback width\n  const elementHeight = rect.height || 300; // fallback height\n\n  let { x, y } = position;\n\n  // Constrain horizontal position\n  if (x + elementWidth > viewportWidth - padding) {\n    x = viewportWidth - elementWidth - padding;\n  }\n  if (x < padding) {\n    x = padding;\n  }\n\n  // Constrain vertical position\n  if (y + elementHeight > viewportHeight - padding) {\n    if (preferredSide === \"top\") {\n      // Try to position above the target\n      y = position.y - elementHeight - padding;\n    } else {\n      // Position at bottom of viewport\n      y = viewportHeight - elementHeight - padding;\n    }\n  }\n  if (y < padding) {\n    y = padding;\n  }\n\n  // If still outside viewport after adjustments, center it\n  if (x < padding || x + elementWidth > viewportWidth - padding) {\n    x = Math.max(padding, (viewportWidth - elementWidth) / 2);\n  }\n  if (y < padding || y + elementHeight > viewportHeight - padding) {\n    y = Math.max(padding, (viewportHeight - elementHeight) / 2);\n  }\n\n  return { x, y };\n}\n\n/**\n * Reposition an element to ensure it stays within viewport after being added to DOM\n */\nexport function repositionInViewport(\n  element: HTMLElement,\n  options: {\n    padding?: number;\n    preferredSide?: \"top\" | \"bottom\" | \"left\" | \"right\";\n  } = {}\n): void {\n  const { padding = 16, preferredSide = \"bottom\" } = options;\n\n  // Get current position\n  const currentLeft = parseFloat(element.style.left) || 0;\n  const currentTop = parseFloat(element.style.top) || 0;\n\n  // Constrain to viewport\n  const constrainedPosition = constrainToViewport(\n    element,\n    {\n      x: currentLeft,\n      y: currentTop,\n    },\n    { padding, preferredSide }\n  );\n\n  // Apply new position\n  element.style.left = `${constrainedPosition.x}px`;\n  element.style.top = `${constrainedPosition.y}px`;\n}\n\n/**\n * Get viewport dimensions\n */\nexport function getViewportSize(): { width: number; height: number } {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  };\n}\n\n/**\n * Calculate position from relative coordinates\n */\nexport function getAbsolutePositionFromRelative(\n  element: Element,\n  relativePosition: { x: number; y: number }\n): { x: number; y: number } {\n  const rect = element.getBoundingClientRect();\n  return {\n    x: rect.left + rect.width * relativePosition.x,\n    y: rect.top + rect.height * relativePosition.y,\n  };\n}\n\n/**\n * Calculate relative position within an element from absolute coordinates\n */\nexport function getRelativePositionFromAbsolute(\n  element: Element,\n  absolutePosition: { x: number; y: number }\n): { x: number; y: number } {\n  const rect = element.getBoundingClientRect();\n  return {\n    x: Math.max(0, Math.min(1, (absolutePosition.x - rect.left) / rect.width)),\n    y: Math.max(0, Math.min(1, (absolutePosition.y - rect.top) / rect.height)),\n  };\n}\n\n/**\n * Get comment position from click event and target element\n */\nexport function getCommentPositionFromClick(\n  element: Element,\n  clickEvent: { clientX: number; clientY: number }\n): {\n  position: { x: number; y: number };\n  relativePosition: { x: number; y: number };\n} {\n  const absolutePosition = { x: clickEvent.clientX, y: clickEvent.clientY };\n  const relativePosition = getRelativePositionFromAbsolute(\n    element,\n    absolutePosition\n  );\n\n  return {\n    position: absolutePosition,\n    relativePosition,\n  };\n}\n\n/**\n * Get the bounds of an element\n */\nexport function getElementBounds(element: Element): DOMRect {\n  return element.getBoundingClientRect();\n}\n\n/**\n * Check if a point is within element bounds\n */\nexport function isPointInElement(\n  x: number,\n  y: number,\n  element: Element\n): boolean {\n  const rect = element.getBoundingClientRect();\n  return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n}\n\n/**\n * Get the topmost element at a given point (excluding SDK elements)\n */\nexport function getElementAtPoint(x: number, y: number): Element | null {\n  // Temporarily hide SDK elements\n  const sdkElements = document.querySelectorAll(\"[data-uicm-element]\");\n  const originalDisplay: string[] = [];\n\n  sdkElements.forEach((el, index) => {\n    const htmlEl = el as HTMLElement;\n    originalDisplay[index] = htmlEl.style.display;\n    htmlEl.style.display = \"none\";\n  });\n\n  const element = document.elementFromPoint(x, y);\n\n  // Restore SDK elements\n  sdkElements.forEach((el, index) => {\n    const htmlEl = el as HTMLElement;\n    htmlEl.style.display = originalDisplay[index];\n  });\n\n  return element;\n}\n\n/**\n * Create a unique ID for elements (used for comment IDs)\n */\nexport function generateId(): string {\n  return `uicm_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Create SDK root container if it doesn't exist\n */\nexport function ensureSDKRoot(): HTMLElement {\n  let root = document.getElementById(\"uicm-root\");\n  if (!root) {\n    root = document.createElement(\"div\");\n    root.id = \"uicm-root\";\n    root.setAttribute(\"data-uicm-element\", \"true\");\n\n    // Position the layer\n    root.style.position = \"fixed\";\n    root.style.top = \"0\";\n    root.style.left = \"0\";\n    root.style.width = \"100vw\";\n    root.style.height = \"100vh\";\n    root.style.pointerEvents = \"none\"; // Allow events to pass through by default\n    root.style.zIndex = \"999999\";\n\n    // Create separate layers for different components\n    const highlightLayer = document.createElement(\"div\");\n    highlightLayer.id = \"uicm-highlight-layer\";\n    highlightLayer.style.position = \"absolute\";\n    highlightLayer.style.top = \"0\";\n    highlightLayer.style.left = \"0\";\n    highlightLayer.style.width = \"100%\";\n    highlightLayer.style.height = \"100%\";\n    highlightLayer.style.pointerEvents = \"none\";\n    highlightLayer.style.display = \"none\"; // Hidden by default\n    root.appendChild(highlightLayer);\n\n    // Combined interaction layer for both bubbles and forms\n    const interactionLayer = document.createElement(\"div\");\n    interactionLayer.id = \"uicm-interaction-layer\";\n    interactionLayer.style.position = \"absolute\";\n    interactionLayer.style.top = \"0\";\n    interactionLayer.style.left = \"0\";\n    interactionLayer.style.width = \"100%\";\n    interactionLayer.style.height = \"100%\";\n    interactionLayer.style.pointerEvents = \"auto\"; // Bubbles and forms need to be clickable\n    interactionLayer.style.display = \"none\"; // Hidden by default\n    root.appendChild(interactionLayer);\n\n    document.body.appendChild(root);\n  }\n  return root;\n}\n\n/**\n * Remove SDK root and cleanup\n */\nexport function removeSDKRoot(): void {\n  const root = document.getElementById(\"uicm-root\");\n  if (root) {\n    root.remove();\n  }\n}\n\n/**\n * Add global styles to the page\n */\nexport function injectGlobalStyles(css: string): HTMLStyleElement {\n  const style = document.createElement(\"style\");\n  style.id = \"uicm-styles\";\n  style.textContent = css;\n  document.head.appendChild(style);\n  return style;\n}\n\n/**\n * Remove global styles\n */\nexport function removeGlobalStyles(): void {\n  const style = document.getElementById(\"uicm-styles\");\n  if (style) {\n    style.remove();\n  }\n}\n\n/**\n * Debounce function for performance optimization\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: number | null = null;\n  return (...args: Parameters<T>) => {\n    if (timeout !== null) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}\n\n/**\n * Check if element is clickable (not covered by other elements)\n */\nexport function isElementClickable(element: Element): boolean {\n  const rect = element.getBoundingClientRect();\n  const centerX = rect.left + rect.width / 2;\n  const centerY = rect.top + rect.height / 2;\n\n  const topElement = document.elementFromPoint(centerX, centerY);\n  return topElement === element || element.contains(topElement);\n}\n\n/**\n * Scroll element into view smoothly\n */\nexport function scrollIntoView(element: Element): void {\n  element.scrollIntoView({\n    behavior: \"smooth\",\n    block: \"center\",\n    inline: \"nearest\",\n  });\n}\n\n/**\n * Get XPath of an element\n */\nexport function getXPath(element: Element): string {\n  if (!element) return \"\";\n  if (element.id) return `//*[@id=\"${element.id}\"]`;\n\n  const paths: string[] = [];\n  let current = element;\n\n  while (current && current.nodeType === Node.ELEMENT_NODE) {\n    let index = 1;\n    let hasSibling = false;\n\n    // Count previous siblings with same tag name\n    let sibling = current.previousSibling;\n    while (sibling) {\n      if (\n        sibling.nodeType === Node.ELEMENT_NODE &&\n        (sibling as Element).tagName === current.tagName\n      ) {\n        index++;\n        hasSibling = true;\n      }\n      sibling = sibling.previousSibling;\n    }\n\n    // Build path\n    const tagName = current.tagName.toLowerCase();\n    const pathIndex = hasSibling ? `[${index}]` : \"\";\n    paths.unshift(`${tagName}${pathIndex}`);\n\n    // Move up to parent\n    current = current.parentElement as Element;\n  }\n\n  return `/${paths.join(\"/\")}`;\n}\n","import { CommentAttachment } from \"../types\";\n\nexport class Base64UploadManager {\n  private maxFileSize: number;\n  private allowedTypes: string[];\n\n  constructor(maxFileSize: number = 5 * 1024 * 1024) {\n    // 5MB default\n    this.maxFileSize = maxFileSize;\n    this.allowedTypes = [\n      \"image/jpeg\",\n      \"image/png\",\n      \"image/gif\",\n      \"image/webp\",\n      \"application/pdf\",\n      \"application/msword\",\n      \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n      \"text/plain\",\n      \"application/zip\",\n      \"application/x-rar-compressed\",\n    ];\n  }\n\n  /**\n   * Convert file to base64 and create attachment\n   */\n  async uploadFile(file: File): Promise<CommentAttachment> {\n    // Validate file size\n    if (file.size > this.maxFileSize) {\n      throw new Error(\n        `File too large. Maximum size is ${this.formatFileSize(\n          this.maxFileSize\n        )}`\n      );\n    }\n\n    // Validate file type\n    if (this.allowedTypes.indexOf(file.type) === -1) {\n      throw new Error(\n        `File type not allowed. Allowed types: ${this.allowedTypes.join(\", \")}`\n      );\n    }\n\n    try {\n      const base64 = await this.fileToBase64(file);\n\n      return {\n        id: this.generateId(),\n        filename: file.name,\n        url: base64,\n        type: file.type.startsWith(\"image/\") ? \"image\" : \"file\",\n        size: file.size,\n        uploadedAt: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error(\"Base64 conversion failed:\", error);\n      throw new Error(`Failed to process file: ${file.name}`);\n    }\n  }\n\n  /**\n   * Convert file to base64 string\n   */\n  private fileToBase64(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result as string);\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  }\n\n  /**\n   * Upload multiple files\n   */\n  async uploadFiles(files: File[]): Promise<CommentAttachment[]> {\n    const uploadPromises = files.map((file) => this.uploadFile(file));\n    return Promise.all(uploadPromises);\n  }\n\n  /**\n   * Check if file is an image\n   */\n  isImage(file: File): boolean {\n    return file.type.startsWith(\"image/\");\n  }\n\n  /**\n   * Get file size in human readable format\n   */\n  private formatFileSize(bytes: number): string {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n  }\n\n  /**\n   * Generate unique ID\n   */\n  private generateId(): string {\n    return Date.now().toString() + Math.random().toString(36).substr(2, 9);\n  }\n}\n\n// Create default instance\nexport const base64UploadManager = new Base64UploadManager();\n","export class ImageModal {\n  private element: HTMLElement;\n  private imageUrl: string;\n  private isVisible = false;\n  private keydownHandler: ((e: KeyboardEvent) => void) | null = null;\n  private imageElement: HTMLImageElement | null = null;\n  private currentScale = 1;\n  private minScale = 0.5;\n  private maxScale = 3;\n\n  constructor(imageUrl: string) {\n    this.imageUrl = imageUrl;\n    this.element = this.createElement();\n    this.setupEventListeners();\n  }\n\n  private createElement(): HTMLElement {\n    const modal = document.createElement(\"div\");\n    modal.className = \"uicm-image-modal\";\n    modal.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0, 0, 0, 0.9);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 999999;\n      opacity: 0;\n      visibility: hidden;\n      transition: opacity 0.3s ease, visibility 0.3s ease;\n      pointer-events: auto;\n    `;\n\n    const imageContainer = document.createElement(\"div\");\n    imageContainer.className = \"uicm-image-container\";\n    imageContainer.style.cssText = `\n      position: relative;\n      max-width: 80vw;\n      max-height: 80vh;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      pointer-events: auto;\n    `;\n\n    const image = document.createElement(\"img\");\n    image.src = this.imageUrl;\n    image.style.cssText = `\n      max-width: 100%;\n      max-height: 100%;\n      object-fit: contain;\n      border-radius: 8px;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n      transition: transform 0.3s ease;\n      cursor: zoom-in;\n    `;\n\n    // Store reference to image element\n    this.imageElement = image;\n\n    const closeButton = document.createElement(\"button\");\n    closeButton.className = \"uicm-image-close\";\n    closeButton.innerHTML = \"×\";\n    closeButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 0;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 32px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    closeButton.addEventListener(\"mouseenter\", () => {\n      closeButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    closeButton.addEventListener(\"mouseleave\", () => {\n      closeButton.style.backgroundColor = \"transparent\";\n    });\n\n    const downloadButton = document.createElement(\"button\");\n    downloadButton.className = \"uicm-image-download\";\n    downloadButton.innerHTML = \"⬇\";\n    downloadButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 50px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 20px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    downloadButton.addEventListener(\"mouseenter\", () => {\n      downloadButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    downloadButton.addEventListener(\"mouseleave\", () => {\n      downloadButton.style.backgroundColor = \"transparent\";\n    });\n\n    downloadButton.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      this.downloadImage();\n    });\n\n    // Zoom controls\n    const zoomInButton = document.createElement(\"button\");\n    zoomInButton.className = \"uicm-image-zoom-in\";\n    zoomInButton.innerHTML = \"🔍+\";\n    zoomInButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 100px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 16px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    zoomInButton.addEventListener(\"mouseenter\", () => {\n      zoomInButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    zoomInButton.addEventListener(\"mouseleave\", () => {\n      zoomInButton.style.backgroundColor = \"transparent\";\n    });\n\n    zoomInButton.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      this.zoomIn();\n    });\n\n    const zoomOutButton = document.createElement(\"button\");\n    zoomOutButton.className = \"uicm-image-zoom-out\";\n    zoomOutButton.innerHTML = \"🔍-\";\n    zoomOutButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 140px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 16px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    zoomOutButton.addEventListener(\"mouseenter\", () => {\n      zoomOutButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    zoomOutButton.addEventListener(\"mouseleave\", () => {\n      zoomOutButton.style.backgroundColor = \"transparent\";\n    });\n\n    zoomOutButton.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      this.zoomOut();\n    });\n\n    const resetButton = document.createElement(\"button\");\n    resetButton.className = \"uicm-image-reset\";\n    resetButton.innerHTML = \"🔄\";\n    resetButton.style.cssText = `\n      position: absolute;\n      top: -40px;\n      right: 180px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 16px;\n      cursor: pointer;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      transition: background-color 0.2s ease;\n    `;\n\n    resetButton.addEventListener(\"mouseenter\", () => {\n      resetButton.style.backgroundColor = \"rgba(255, 255, 255, 0.1)\";\n    });\n\n    resetButton.addEventListener(\"mouseleave\", () => {\n      resetButton.style.backgroundColor = \"transparent\";\n    });\n\n    resetButton.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      this.resetZoom();\n    });\n\n    imageContainer.appendChild(image);\n    imageContainer.appendChild(closeButton);\n    imageContainer.appendChild(downloadButton);\n    imageContainer.appendChild(zoomInButton);\n    imageContainer.appendChild(zoomOutButton);\n    imageContainer.appendChild(resetButton);\n    modal.appendChild(imageContainer);\n\n    return modal;\n  }\n\n  private setupEventListeners(): void {\n    // Close on background click (outside image)\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation(); // Prevent event from bubbling up\n      if (e.target === this.element) {\n        this.hide();\n      }\n    });\n\n    // Close button click\n    const closeButton = this.element.querySelector(\n      \".uicm-image-close\"\n    ) as HTMLElement;\n    if (closeButton) {\n      closeButton.addEventListener(\"click\", (e) => {\n        e.stopPropagation(); // Prevent event from bubbling up\n        this.hide();\n      });\n    }\n\n    // Image click to zoom in/out\n    if (this.imageElement) {\n      this.imageElement.addEventListener(\"click\", (e) => {\n        e.stopPropagation(); // Prevent modal from closing\n        this.toggleZoom();\n      });\n\n      // Mouse wheel zoom\n      this.imageElement.addEventListener(\"wheel\", (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (e.deltaY < 0) {\n          this.zoomIn();\n        } else {\n          this.zoomOut();\n        }\n      });\n    }\n  }\n\n  private downloadImage(): void {\n    const link = document.createElement(\"a\");\n    link.href = this.imageUrl;\n    link.download = `image-${Date.now()}.png`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  private zoomIn(): void {\n    if (this.imageElement && this.currentScale < this.maxScale) {\n      this.currentScale = Math.min(this.maxScale, this.currentScale + 0.25);\n      this.updateImageTransform();\n      this.updateCursor();\n    }\n  }\n\n  private zoomOut(): void {\n    if (this.imageElement && this.currentScale > this.minScale) {\n      this.currentScale = Math.max(this.minScale, this.currentScale - 0.25);\n      this.updateImageTransform();\n      this.updateCursor();\n    }\n  }\n\n  private resetZoom(): void {\n    if (this.imageElement) {\n      this.currentScale = 1;\n      this.updateImageTransform();\n      this.updateCursor();\n    }\n  }\n\n  private toggleZoom(): void {\n    if (this.currentScale === 1) {\n      this.zoomIn();\n    } else {\n      this.resetZoom();\n    }\n  }\n\n  private updateImageTransform(): void {\n    if (this.imageElement) {\n      this.imageElement.style.transform = `scale(${this.currentScale})`;\n    }\n  }\n\n  private updateCursor(): void {\n    if (this.imageElement) {\n      if (this.currentScale === 1) {\n        this.imageElement.style.cursor = \"zoom-in\";\n      } else {\n        this.imageElement.style.cursor = \"zoom-out\";\n      }\n    }\n  }\n\n  public show(): void {\n    if (!this.isVisible) {\n      document.body.appendChild(this.element);\n      this.isVisible = true;\n\n      // Add escape key handler only when modal is visible\n      this.keydownHandler = (e: KeyboardEvent) => {\n        if (e.key === \"Escape\" && this.isVisible) {\n          this.hide();\n        }\n      };\n      document.addEventListener(\"keydown\", this.keydownHandler);\n\n      // Prevent body scroll when modal is open\n      document.body.style.overflow = \"hidden\";\n\n      // Trigger animation\n      requestAnimationFrame(() => {\n        this.element.style.opacity = \"1\";\n        this.element.style.visibility = \"visible\";\n        this.element.style.pointerEvents = \"auto\"; // Re-enable pointer events\n      });\n    }\n  }\n\n  public hide(): void {\n    if (this.isVisible) {\n      // Immediately prevent any further interactions\n      this.isVisible = false;\n\n      this.element.style.opacity = \"0\";\n      this.element.style.visibility = \"hidden\";\n      this.element.style.pointerEvents = \"none\"; // Prevent any clicks during fade out\n\n      // Remove escape key handler\n      if (this.keydownHandler) {\n        document.removeEventListener(\"keydown\", this.keydownHandler);\n        this.keydownHandler = null;\n      }\n\n      // Restore body scroll\n      document.body.style.overflow = \"\";\n\n      setTimeout(() => {\n        if (this.element.parentNode) {\n          this.element.parentNode.removeChild(this.element);\n        }\n      }, 300);\n    }\n  }\n\n  public destroy(): void {\n    this.hide();\n    // Ensure keydown handler is removed\n    if (this.keydownHandler) {\n      document.removeEventListener(\"keydown\", this.keydownHandler);\n      this.keydownHandler = null;\n    }\n  }\n}\n","import { Comment, User, CommentStatus, CommentAttachment } from \"../types\";\nimport { base64UploadManager } from \"../utils/base64Upload\";\nimport { ImageModal } from \"./ImageModal\";\nimport { constrainToViewport, repositionInViewport } from \"../utils/dom\";\nimport { getRoleColor, getRoleDisplayName } from \"../utils/roleColors\";\n\nexport interface CommentModalProps {\n  comments: Comment[];\n  currentUser: User;\n  position: { x: number; y: number };\n  onClose: () => void;\n  onAddReply: (\n    commentId: string,\n    content: string,\n    user?: User,\n    attachments?: CommentAttachment[]\n  ) => Promise<void>;\n  onStatusChange: (commentId: string, status: CommentStatus) => Promise<void>;\n  onDeleteComment?: (commentId: string) => Promise<void>;\n}\n\nexport class CommentModal {\n  private element: HTMLElement;\n  private props: CommentModalProps;\n  private imageModal: ImageModal | null = null;\n\n  constructor(props: CommentModalProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.attachEventListeners();\n  }\n\n  private detectAndFormatUrls(text: string): string {\n    // URL regex pattern\n    const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n\n    return text.replace(urlRegex, (url) => {\n      return `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"uicm-url-link\">${url}</a>`;\n    });\n  }\n\n  private formatFileSize(bytes: number): string {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n  }\n\n  private addFilePreview(\n    attachment: CommentAttachment,\n    container: HTMLElement,\n    onRemove: () => void\n  ): void {\n    // Limit to 5 images\n    if (container.childElementCount >= 5) return;\n\n    const previewItem = document.createElement(\"div\");\n    previewItem.className = \"uicm-file-preview-item\";\n    previewItem.style.position = \"relative\";\n\n    if (attachment.type === \"image\") {\n      const imagePreview = document.createElement(\"img\");\n      imagePreview.className = \"uicm-file-preview-image\";\n      imagePreview.src = attachment.url;\n      imagePreview.alt = attachment.filename;\n      imagePreview.style.cursor = \"pointer\";\n\n      // Add click handler to open image modal\n      imagePreview.addEventListener(\"click\", () => {\n        if (this.imageModal) {\n          this.imageModal.destroy();\n        }\n        this.imageModal = new ImageModal(attachment.url);\n        this.imageModal.show();\n      });\n\n      previewItem.appendChild(imagePreview);\n    } else {\n      const fileIcon = document.createElement(\"span\");\n      fileIcon.className = \"uicm-file-preview-icon\";\n      fileIcon.innerHTML = \"📎\";\n      previewItem.appendChild(fileIcon);\n    }\n\n    // Only show file size (not name or url)\n    const fileSize = document.createElement(\"span\");\n    fileSize.className = \"uicm-file-preview-size\";\n    fileSize.textContent = this.formatFileSize(attachment.size);\n    previewItem.appendChild(fileSize);\n\n    // Remove button absolutely positioned top right\n    const removeButton = document.createElement(\"button\");\n    removeButton.className = \"uicm-file-preview-remove\";\n    removeButton.innerHTML = \"×\";\n    removeButton.type = \"button\";\n    removeButton.style.position = \"absolute\";\n    removeButton.style.top = \"2px\";\n    removeButton.style.right = \"2px\";\n    removeButton.style.zIndex = \"2\";\n    removeButton.onclick = () => {\n      previewItem.remove();\n      onRemove();\n    };\n    previewItem.appendChild(removeButton);\n\n    container.appendChild(previewItem);\n  }\n\n  private createElement(): HTMLElement {\n    const modal = document.createElement(\"div\");\n    modal.className = \"uicm-comment-modal\";\n    modal.style.position = \"absolute\";\n    modal.style.zIndex = \"10000\";\n\n    // Temporarily add to DOM to get accurate dimensions\n    document.body.appendChild(modal);\n\n    // Constrain position to viewport\n    const constrainedPosition = constrainToViewport(\n      modal,\n      this.props.position,\n      {\n        padding: 20,\n        preferredSide: \"bottom\",\n      }\n    );\n\n    // Set constrained position\n    modal.style.left = `${constrainedPosition.x}px`;\n    modal.style.top = `${constrainedPosition.y}px`;\n\n    // Remove from DOM temporarily\n    document.body.removeChild(modal);\n\n    // Gradient header bar\n    const headerBar = document.createElement(\"div\");\n    headerBar.className = \"uicm-modal-header-bar\";\n\n    // Main header container\n    const header = document.createElement(\"div\");\n    header.className = \"uicm-modal-header\";\n\n    // Header content wrapper\n    const headerContent = document.createElement(\"div\");\n    headerContent.className = \"uicm-modal-header-content\";\n\n    // Top section: Title, description, and close button\n    const topSection = document.createElement(\"div\");\n    topSection.className = \"uicm-modal-top-section\";\n\n    // Left side: Title and description\n    const titleSection = document.createElement(\"div\");\n    titleSection.className = \"uicm-modal-title-section\";\n\n    const title = document.createElement(\"h3\");\n    title.className = \"uicm-modal-title\";\n    title.textContent = \"Comment\";\n\n    const description = document.createElement(\"p\");\n    description.className = \"uicm-modal-description\";\n    description.textContent = \"View and manage feedback\";\n\n    titleSection.appendChild(title);\n    titleSection.appendChild(description);\n\n    // Right side: Close button\n    const closeButton = document.createElement(\"button\");\n    closeButton.className = \"uicm-close-button\";\n    closeButton.innerHTML = \"×\";\n    closeButton.title = \"Close\";\n    closeButton.onclick = () => this.props.onClose();\n\n    topSection.appendChild(titleSection);\n    topSection.appendChild(closeButton);\n\n    // Bottom section: Status select and delete button\n    const bottomSection = document.createElement(\"div\");\n    bottomSection.className = \"uicm-modal-bottom-section\";\n\n    const mainComment = this.props.comments[0];\n\n    // Status select with color coding\n    const statusSelect = document.createElement(\"select\");\n    statusSelect.className = \"uicm-status-select\";\n    statusSelect.value = mainComment.status;\n    statusSelect.setAttribute(\"data-status\", mainComment.status);\n\n    // Add status options with color coding\n    const statuses = [\n      CommentStatus.BUG,\n      CommentStatus.FEATURE_REQUEST,\n      CommentStatus.DEV_COMPLETED,\n      CommentStatus.DONE,\n      CommentStatus.ARCHIVED,\n    ];\n\n    statuses.forEach((status) => {\n      const option = document.createElement(\"option\");\n      option.value = status;\n      option.textContent = status.toUpperCase();\n      option.selected = status === mainComment.status;\n      statusSelect.appendChild(option);\n    });\n\n    // Status change handler\n    statusSelect.addEventListener(\"change\", async (e) => {\n      const newStatus = (e.target as HTMLSelectElement).value as CommentStatus;\n      if (newStatus !== mainComment.status) {\n        await this.props.onStatusChange(mainComment.id, newStatus);\n        // Update the data-status attribute for color coding\n        statusSelect.setAttribute(\"data-status\", newStatus);\n      }\n    });\n\n    // Delete button (only show if onDeleteComment callback is provided)\n    if (this.props.onDeleteComment) {\n      const deleteButton = document.createElement(\"button\");\n      deleteButton.className = \"uicm-delete-button\";\n      deleteButton.innerHTML = \"🗑️\";\n      deleteButton.title = \"Delete comment\";\n\n      // Delete functionality\n      deleteButton.addEventListener(\"click\", async (e) => {\n        e.stopPropagation();\n\n        if (\n          confirm(\n            \"Are you sure you want to delete this comment and all its replies? This action cannot be undone.\"\n          )\n        ) {\n          try {\n            deleteButton.disabled = true;\n            deleteButton.innerHTML = \"⏳\";\n            deleteButton.title = \"Deleting...\";\n            deleteButton.style.opacity = \"0.7\";\n\n            // Delete the main comment (which will delete all replies too)\n            await this.props.onDeleteComment!(mainComment.id);\n\n            // Close the modal after successful deletion\n            this.props.onClose();\n          } catch (error) {\n            console.error(\"Failed to delete comment:\", error);\n            deleteButton.disabled = false;\n            deleteButton.innerHTML = \"🗑️\";\n            deleteButton.title = \"Delete comment\";\n            deleteButton.style.opacity = \"1\";\n            alert(\"Failed to delete comment. Please try again.\");\n          }\n        }\n      });\n\n      bottomSection.appendChild(statusSelect);\n      bottomSection.appendChild(deleteButton);\n    } else {\n      // If no delete function, just add the status select\n      bottomSection.appendChild(statusSelect);\n    }\n\n    // Assemble header\n    headerContent.appendChild(topSection);\n    headerContent.appendChild(bottomSection);\n    header.appendChild(headerContent);\n\n    // Comments list\n    const commentsList = document.createElement(\"div\");\n    commentsList.className = \"uicm-comments-list\";\n\n    this.props.comments.forEach((comment) => {\n      const commentItem = this.createCommentItem(comment);\n      commentsList.appendChild(commentItem);\n    });\n\n    // Reply form\n    const replyForm = this.createReplyForm();\n\n    modal.appendChild(headerBar);\n    modal.appendChild(header);\n    modal.appendChild(commentsList);\n    modal.appendChild(replyForm);\n\n    return modal;\n  }\n\n  private createCommentItem(comment: Comment): HTMLElement {\n    const item = document.createElement(\"div\");\n    item.className = \"uicm-comment-item\";\n\n    // Avatar with gradient background\n    const avatar = document.createElement(\"div\");\n    avatar.className = \"uicm-comment-avatar\";\n    if (comment.createdBy.avatar) {\n      avatar.innerHTML = `<img src=\"${comment.createdBy.avatar}\" alt=\"${comment.createdBy.name}\" style=\"width: 100%; height: 100%; border-radius: 50%; object-fit: cover;\">`;\n    } else {\n      avatar.textContent = comment.createdBy.name.charAt(0).toUpperCase();\n    }\n\n    // Content\n    const content = document.createElement(\"div\");\n    content.className = \"uicm-comment-content\";\n\n    const commentHeader = document.createElement(\"div\");\n    commentHeader.className = \"uicm-comment-header\";\n\n    const authorName = document.createElement(\"span\");\n    authorName.className = \"uicm-author-name\";\n    authorName.textContent = comment.createdBy.name;\n\n    // Add role badge\n    const roleBadge = document.createElement(\"span\");\n    roleBadge.className = \"uicm-role-badge\";\n    roleBadge.textContent = getRoleDisplayName(comment.role);\n\n    // Apply role colors\n    const roleColors = getRoleColor(comment.role);\n    roleBadge.style.backgroundColor = roleColors.bg;\n    roleBadge.style.color = roleColors.text;\n    roleBadge.style.borderColor = roleColors.border;\n\n    const timeAgo = document.createElement(\"span\");\n    timeAgo.className = \"uicm-comment-time\";\n    timeAgo.textContent = this.formatTimeAgo(comment.createdAt);\n\n    commentHeader.appendChild(authorName);\n    commentHeader.appendChild(roleBadge);\n    commentHeader.appendChild(timeAgo);\n\n    const commentText = document.createElement(\"p\");\n    commentText.className = \"uicm-comment-text\";\n    commentText.innerHTML = this.detectAndFormatUrls(comment.content);\n\n    content.appendChild(commentHeader);\n    content.appendChild(commentText);\n\n    // Add attachments if any\n    console.log(\n      \"🔍 Checking attachments for comment:\",\n      comment.id,\n      comment.attachments\n    );\n    if (comment.attachments && comment.attachments.length > 0) {\n      console.log(\"📎 Found attachments:\", comment.attachments.length);\n      const attachmentsContainer = document.createElement(\"div\");\n      attachmentsContainer.className = \"uicm-comment-attachments\";\n\n      // Add class for multiple images layout\n      const imageAttachments = comment.attachments.filter(\n        (a) => a.type === \"image\"\n      );\n      if (imageAttachments.length > 1) {\n        attachmentsContainer.classList.add(\"has-multiple-images\");\n      }\n\n      comment.attachments.forEach((attachment, index) => {\n        console.log(`📎 Processing attachment ${index}:`, attachment);\n        const attachmentItem = document.createElement(\"div\");\n        attachmentItem.className = \"uicm-attachment-item\";\n\n        if (attachment.type === \"image\") {\n          const imagePreview = document.createElement(\"img\");\n          imagePreview.className = \"uicm-attachment-image\";\n          imagePreview.src = attachment.url;\n          imagePreview.alt = attachment.filename;\n          imagePreview.style.cursor = \"pointer\";\n\n          // Add click handler to open image modal\n          imagePreview.addEventListener(\"click\", () => {\n            if (this.imageModal) {\n              this.imageModal.destroy();\n            }\n            this.imageModal = new ImageModal(attachment.url);\n            this.imageModal.show();\n          });\n\n          attachmentItem.appendChild(imagePreview);\n        } else {\n          const fileIcon = document.createElement(\"span\");\n          fileIcon.className = \"uicm-attachment-icon\";\n          fileIcon.innerHTML = \"📎\";\n\n          const fileInfo = document.createElement(\"div\");\n          fileInfo.className = \"uicm-attachment-info\";\n\n          const fileName = document.createElement(\"span\");\n          fileName.className = \"uicm-attachment-name\";\n          fileName.textContent = attachment.filename;\n\n          const fileSize = document.createElement(\"span\");\n          fileSize.className = \"uicm-attachment-size\";\n          fileSize.textContent = this.formatFileSize(attachment.size);\n\n          fileInfo.appendChild(fileName);\n          fileInfo.appendChild(fileSize);\n\n          attachmentItem.appendChild(fileIcon);\n          attachmentItem.appendChild(fileInfo);\n\n          attachmentItem.style.cursor = \"pointer\";\n          attachmentItem.addEventListener(\"click\", () => {\n            window.open(attachment.url, \"_blank\");\n          });\n        }\n\n        attachmentsContainer.appendChild(attachmentItem);\n        console.log(`✅ Attachment ${index} added to container`);\n      });\n\n      content.appendChild(attachmentsContainer);\n      console.log(\"✅ Attachments container added to comment item\");\n    }\n\n    item.appendChild(avatar);\n    item.appendChild(content);\n\n    return item;\n  }\n\n  private createReplyForm(): HTMLElement {\n    const form = document.createElement(\"div\");\n    form.className = \"uicm-reply-form\";\n\n    const replyHeader = document.createElement(\"div\");\n    replyHeader.className = \"uicm-reply-header\";\n\n    // Avatar for current user\n    const avatar = document.createElement(\"div\");\n    avatar.className = \"uicm-reply-avatar\";\n    if (this.props.currentUser.avatar) {\n      avatar.innerHTML = `<img src=\"${this.props.currentUser.avatar}\" alt=\"${this.props.currentUser.name}\" style=\"width: 100%; height: 100%; border-radius: 50%; object-fit: cover;\">`;\n    } else {\n      avatar.textContent = this.props.currentUser.name.charAt(0).toUpperCase();\n    }\n\n    // Editable user name\n    const nameInput = document.createElement(\"input\");\n    nameInput.className = \"uicm-reply-user-name-input\";\n    nameInput.type = \"text\";\n    nameInput.value = this.props.currentUser.name;\n    nameInput.placeholder = \"Your name\";\n\n    // Update avatar when name changes\n    nameInput.addEventListener(\"input\", () => {\n      if (nameInput.value.trim()) {\n        avatar.textContent = nameInput.value.trim().charAt(0).toUpperCase();\n      } else {\n        avatar.textContent = this.props.currentUser.name\n          .charAt(0)\n          .toUpperCase();\n      }\n    });\n\n    replyHeader.appendChild(avatar);\n    replyHeader.appendChild(nameInput);\n\n    // Input container\n    const inputContainer = document.createElement(\"div\");\n    inputContainer.className = \"uicm-reply-input-container\";\n\n    const input = document.createElement(\"textarea\");\n    input.className = \"uicm-reply-input\";\n    input.placeholder = \"Write a reply...\";\n    input.rows = 2;\n\n    // File upload section\n    const fileUploadSection = document.createElement(\"div\");\n    fileUploadSection.className = \"uicm-file-upload-section\";\n\n    const fileInput = document.createElement(\"input\");\n    fileInput.type = \"file\";\n    fileInput.className = \"uicm-file-input\";\n    fileInput.style.display = \"none\";\n    fileInput.accept = \"image/*,application/pdf,.doc,.docx,.txt,.zip,.rar\";\n    fileInput.multiple = true;\n\n    const fileUploadButton = document.createElement(\"button\");\n    fileUploadButton.className = \"uicm-file-upload-button\";\n    fileUploadButton.type = \"button\";\n    fileUploadButton.innerHTML = \"📎 Attach Files\";\n    fileUploadButton.onclick = () => fileInput.click();\n\n    const filePreviewContainer = document.createElement(\"div\");\n    filePreviewContainer.className = \"uicm-file-preview-container\";\n\n    let selectedAttachments: CommentAttachment[] = [];\n\n    // Handle file selection\n    fileInput.addEventListener(\"change\", async (e) => {\n      const files = (e.target as HTMLInputElement).files;\n      if (files) {\n        for (const file of Array.from(files)) {\n          try {\n            // Upload file using Base64UploadManager\n            const attachment = await base64UploadManager.uploadFile(file);\n            selectedAttachments.push(attachment);\n            this.addFilePreview(attachment, filePreviewContainer, () => {\n              selectedAttachments = selectedAttachments.filter(\n                (a) => a.id !== attachment.id\n              );\n              updateSendButtonState();\n            });\n          } catch (error) {\n            console.error(\"Failed to upload file:\", error);\n            const errorMessage =\n              error instanceof Error ? error.message : \"Unknown error\";\n            alert(`Failed to upload ${file.name}: ${errorMessage}`);\n          }\n        }\n\n        updateSendButtonState();\n      }\n    });\n\n    const updateSendButtonState = () => {\n      const hasContent = input.value.trim().length > 0;\n      const hasName = nameInput.value.trim().length > 0;\n      const hasAttachments = selectedAttachments.length > 0;\n      sendButton.disabled =\n        (!hasContent && !hasAttachments) ||\n        !hasName ||\n        input.value.length > 500;\n    };\n\n    fileUploadSection.appendChild(fileInput);\n    fileUploadSection.appendChild(fileUploadButton);\n    fileUploadSection.appendChild(filePreviewContainer);\n\n    // Character counter\n    const charCounter = document.createElement(\"div\");\n    charCounter.className = \"uicm-reply-char-counter\";\n\n    // Action buttons\n    const actions = document.createElement(\"div\");\n    actions.className = \"uicm-reply-actions\";\n\n    const sendButton = document.createElement(\"button\");\n    sendButton.className = \"uicm-reply-send\";\n    sendButton.textContent = \"Reply\";\n    sendButton.disabled = true;\n\n    actions.appendChild(sendButton);\n\n    inputContainer.appendChild(input);\n    inputContainer.appendChild(fileUploadSection);\n    inputContainer.appendChild(charCounter);\n    inputContainer.appendChild(actions);\n\n    // Input event handlers\n    input.addEventListener(\"input\", () => {\n      const length = input.value.length;\n      const maxLength = 500;\n\n      charCounter.textContent = `${length} / ${maxLength}`;\n\n      // Update send button state\n      updateSendButtonState();\n\n      if (length > maxLength * 0.8) {\n        charCounter.classList.add(\"uicm-warning\");\n      } else {\n        charCounter.classList.remove(\"uicm-warning\");\n      }\n\n      if (length > maxLength) {\n        charCounter.classList.add(\"uicm-error\");\n      } else {\n        charCounter.classList.remove(\"uicm-error\");\n      }\n\n      // Auto-resize textarea\n      input.style.height = \"auto\";\n      input.style.height = Math.min(input.scrollHeight, 120) + \"px\";\n    });\n\n    // Handle paste events for images\n    input.addEventListener(\"paste\", async (e) => {\n      const items = e.clipboardData?.items;\n      if (items) {\n        for (let i = 0; i < items.length; i++) {\n          const item = items[i];\n          if (item.type.indexOf(\"image\") !== -1) {\n            e.preventDefault();\n            const file = item.getAsFile();\n            if (file) {\n              // Show loading state\n              const originalPlaceholder = input.placeholder;\n              input.placeholder = \"🔄 Processing image...\";\n              input.disabled = true;\n\n              // Show loading indicator\n              const loadingIndicator = document.createElement(\"div\");\n              loadingIndicator.className = \"uicm-paste-loading\";\n              loadingIndicator.innerHTML = `\n                <div class=\"uicm-loading-spinner\"></div>\n                <span>Processing image: ${file.name}</span>\n              `;\n              loadingIndicator.style.cssText = `\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background: rgba(255, 255, 255, 0.95);\n                backdrop-filter: blur(10px);\n                border: 1px solid rgba(59, 130, 246, 0.2);\n                border-radius: 12px;\n                padding: 16px 24px;\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                font-size: 14px;\n                color: #1e293b;\n                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n                z-index: 1000;\n              `;\n\n              const spinner = loadingIndicator.querySelector(\n                \".uicm-loading-spinner\"\n              ) as HTMLElement;\n              spinner.style.cssText = `\n                width: 20px;\n                height: 20px;\n                border: 2px solid #e2e8f0;\n                border-top: 2px solid #3b82f6;\n                border-radius: 50%;\n                animation: uicm-spin 1s linear infinite;\n              `;\n\n              this.element.appendChild(loadingIndicator);\n\n              try {\n                const attachment = await base64UploadManager.uploadFile(file);\n                selectedAttachments.push(attachment);\n\n                this.addFilePreview(attachment, filePreviewContainer, () => {\n                  selectedAttachments = selectedAttachments.filter(\n                    (a) => a.id !== attachment.id\n                  );\n                  updateSendButtonState();\n                });\n\n                updateSendButtonState();\n                console.log(\n                  \"📸 Image pasted and uploaded in reply:\",\n                  attachment.filename\n                );\n\n                // Show success message briefly\n                loadingIndicator.innerHTML = `\n                  <span style=\"color: #10b981;\">✅</span>\n                  <span>Image uploaded successfully!</span>\n                `;\n                setTimeout(() => {\n                  if (loadingIndicator.parentNode) {\n                    loadingIndicator.parentNode.removeChild(loadingIndicator);\n                  }\n                }, 1000);\n              } catch (error) {\n                console.error(\"Failed to paste image in reply:\", error);\n                const errorMessage =\n                  error instanceof Error ? error.message : \"Unknown error\";\n\n                // Show error message\n                loadingIndicator.innerHTML = `\n                  <span style=\"color: #ef4444;\">❌</span>\n                  <span>Failed to upload: ${errorMessage}</span>\n                `;\n                setTimeout(() => {\n                  if (loadingIndicator.parentNode) {\n                    loadingIndicator.parentNode.removeChild(loadingIndicator);\n                  }\n                }, 3000);\n              } finally {\n                // Restore input state\n                input.placeholder = originalPlaceholder;\n                input.disabled = false;\n                input.focus();\n              }\n            }\n          }\n        }\n      }\n    });\n\n    // Name input validation\n    nameInput.addEventListener(\"input\", () => {\n      updateSendButtonState();\n    });\n\n    // Send reply\n    const sendReply = async () => {\n      const content = input.value.trim();\n      const userName = nameInput.value.trim();\n      const hasContent = content.length > 0;\n      const hasAttachments = selectedAttachments.length > 0;\n\n      if (\n        (!hasContent && !hasAttachments) ||\n        !userName ||\n        this.props.comments.length === 0\n      )\n        return;\n\n      try {\n        sendButton.disabled = true;\n        sendButton.textContent = \"Sending...\";\n\n        // Use custom name if provided, otherwise use current user\n        const userForReply =\n          userName !== this.props.currentUser.name\n            ? { ...this.props.currentUser, name: userName }\n            : this.props.currentUser;\n\n        console.log(\n          \"📤 Sending reply with attachments:\",\n          selectedAttachments.length\n        );\n\n        await this.props.onAddReply(\n          this.props.comments[0].id,\n          content,\n          userForReply,\n          selectedAttachments.length > 0 ? selectedAttachments : undefined\n        );\n\n        // Clear form after successful send\n        input.value = \"\";\n        charCounter.textContent = \"0 / 500\";\n        charCounter.classList.remove(\"uicm-warning\", \"uicm-error\");\n\n        input.style.height = \"auto\";\n\n        // Clear attachments\n        selectedAttachments = [];\n        filePreviewContainer.innerHTML = \"\";\n        fileInput.value = \"\";\n\n        // Force refresh the modal to show the new reply with attachments\n        console.log(\"🔄 Force refreshing modal after reply\");\n        setTimeout(() => {\n          // This will trigger a refresh of the modal content\n          const event = new CustomEvent(\"uicm-reply-added\", {\n            detail: { commentId: this.props.comments[0].id },\n          });\n          document.dispatchEvent(event);\n        }, 100);\n\n        console.log(\"✅ Reply sent successfully\");\n      } catch (error) {\n        console.error(\"Failed to send reply:\", error);\n      } finally {\n        sendButton.disabled = false;\n        sendButton.textContent = \"Reply\";\n      }\n    };\n\n    sendButton.onclick = sendReply;\n    input.addEventListener(\"keydown\", (e) => {\n      if (\n        (e.ctrlKey || e.metaKey) &&\n        e.key === \"Enter\" &&\n        !sendButton.disabled\n      ) {\n        e.preventDefault();\n        sendReply();\n      }\n    });\n\n    form.appendChild(replyHeader);\n    form.appendChild(inputContainer);\n\n    return form;\n  }\n\n  public updateComments(comments: Comment[]): void {\n    console.log(\"🔄 Updating modal comments:\", comments.length);\n    comments.forEach((comment, index) => {\n      console.log(`📝 Comment ${index}:`, {\n        id: comment.id,\n        content: comment.content.substring(0, 50) + \"...\",\n        attachments: comment.attachments?.length || 0,\n        attachmentDetails:\n          comment.attachments?.map((a) => ({\n            type: a.type,\n            filename: a.filename,\n            size: a.size,\n          })) || [],\n      });\n    });\n\n    const previousCount = this.props.comments.length;\n    this.props.comments = comments;\n    this.refreshCommentsList();\n\n    // Update comment count in header\n    const commentCount = this.element.querySelector(\".uicm-comment-count\");\n    if (commentCount) {\n      commentCount.textContent = `${comments.length} comment${\n        comments.length !== 1 ? \"s\" : \"\"\n      }`;\n    }\n\n    // Scroll to bottom to show newest reply\n    const commentsList = this.element.querySelector(\".uicm-comments-list\");\n    if (commentsList) {\n      commentsList.scrollTop = commentsList.scrollHeight;\n\n      // Highlight newest reply if a new one was added\n      if (comments.length > previousCount) {\n        const commentItems =\n          commentsList.querySelectorAll(\".uicm-comment-item\");\n        const newestItem = commentItems[commentItems.length - 1] as HTMLElement;\n        if (newestItem) {\n          newestItem.style.backgroundColor = \"rgba(34, 197, 94, 0.1)\";\n          newestItem.style.transition = \"background-color 0.3s ease\";\n\n          // Remove highlight after animation\n          setTimeout(() => {\n            newestItem.style.backgroundColor = \"\";\n          }, 1000);\n        }\n      }\n    }\n\n    console.log(\"✅ Modal updated with new comments:\", comments.length);\n  }\n\n  public updateUser(user: User): void {\n    this.props.currentUser = user;\n    console.log(\"🔄 CommentModal: User updated:\", user.name);\n    // Refresh the modal to show updated user info\n    this.refreshCommentsList();\n  }\n\n  private refreshCommentsList(): void {\n    console.log(\"🔄 Refreshing comments list\");\n    const commentsList = this.element.querySelector(\".uicm-comments-list\");\n    if (commentsList) {\n      commentsList.innerHTML = \"\";\n      this.props.comments.forEach((comment) => {\n        console.log(\"📝 Creating comment item for:\", comment.id);\n        const commentItem = this.createCommentItem(comment);\n        commentsList.appendChild(commentItem);\n      });\n      console.log(\"✅ Comments list refreshed\");\n    }\n  }\n\n  private formatTimeAgo(dateString: string): string {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n    if (diffInSeconds < 60) return \"just now\";\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;\n    if (diffInSeconds < 86400)\n      return `${Math.floor(diffInSeconds / 3600)}h ago`;\n    return `${Math.floor(diffInSeconds / 86400)}d ago`;\n  }\n\n  private attachEventListeners(): void {\n    // Prevent modal from closing when clicking inside modal\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      console.log(\"🔒 Modal internal click - prevented propagation\");\n    });\n\n    // Prevent modal from closing when interacting with form elements\n    this.element.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"mouseup\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keydown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keyup\", (e) => {\n      e.stopPropagation();\n    });\n\n    // Close modal when clicking outside\n    setTimeout(() => {\n      document.addEventListener(\"click\", this.handleOutsideClick);\n    }, 0);\n  }\n\n  private handleOutsideClick = (e: Event): void => {\n    if (!this.element.contains(e.target as Node)) {\n      this.props.onClose();\n    }\n  };\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public reposition(): void {\n    // Reposition modal to ensure it stays within viewport with 100px padding\n    repositionInViewport(this.element, {\n      padding: 100,\n      preferredSide: \"bottom\",\n    });\n  }\n\n  public destroy(): void {\n    if (this.imageModal) {\n      this.imageModal.destroy();\n      this.imageModal = null;\n    }\n    document.removeEventListener(\"click\", this.handleOutsideClick);\n    this.element.remove();\n  }\n}\n","import { Comment, User, CommentStatus, CommentAttachment } from \"../types\";\nimport { CommentModal } from \"./CommentModal\";\nimport { constrainToViewport } from \"../utils/dom\";\nimport { ImageModal } from \"./ImageModal\";\nimport { getRoleColor } from \"../utils/roleColors\";\n\nexport interface CommentBubbleProps {\n  comment: Comment;\n  position: { x: number; y: number };\n  currentUser: User;\n  onReply: (\n    commentId: string,\n    content: string,\n    user?: User,\n    attachments?: CommentAttachment[]\n  ) => Promise<void>;\n  onResolve: (commentId: string) => Promise<void>;\n  onDelete: (commentId: string) => Promise<void>;\n  onStatusChange: (commentId: string, status: CommentStatus) => Promise<void>;\n  onShowModal: (modal: any) => void; // Callback to CommentManager for centralized modal management\n}\n\nexport class CommentBubble {\n  private element: HTMLElement;\n  private props: CommentBubbleProps;\n  private modal: CommentModal | null = null;\n  private imageModal: ImageModal | null = null;\n\n  constructor(props: CommentBubbleProps) {\n    console.log(\"🔧 Creating CommentBubble:\", props.comment.id);\n    this.props = props;\n    this.element = this.createElement();\n    console.log(\"📦 Element created:\", this.element);\n    this.attachEventListeners();\n    console.log(\"🎯 Event listeners attached\");\n\n    // Add global click listener to test if bubble receives clicks\n    document.addEventListener(\"click\", (e) => {\n      if (\n        e.target === this.element ||\n        this.element.contains(e.target as Node)\n      ) {\n        console.log(\n          \"🎯 Global click detected on bubble:\",\n          this.props.comment.id\n        );\n        console.log(\"🎯 Click target:\", e.target);\n        console.log(\"🎯 Bubble element:\", this.element);\n      }\n    });\n  }\n\n  private checkBubbleVisibility(): void {\n    const rect = this.element.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n\n    // Check what element is at the bubble's center point\n    const elementAtPoint = document.elementFromPoint(centerX, centerY);\n\n    console.log(\"👁️ Bubble visibility check:\", {\n      commentId: this.props.comment.id,\n      rect: rect,\n      centerPoint: { x: centerX, y: centerY },\n      elementAtPoint: elementAtPoint,\n      isOwnElement: elementAtPoint === this.element,\n      isVisible: rect.width > 0 && rect.height > 0,\n      computedStyle: {\n        display: getComputedStyle(this.element).display,\n        visibility: getComputedStyle(this.element).visibility,\n        opacity: getComputedStyle(this.element).opacity,\n        pointerEvents: getComputedStyle(this.element).pointerEvents,\n        zIndex: getComputedStyle(this.element).zIndex,\n      },\n    });\n  }\n\n  private testBubbleClickability(): void {\n    const rect = this.element.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n\n    // Check what element is at the bubble's center point\n    const elementAtPoint = document.elementFromPoint(centerX, centerY);\n\n    console.log(\"🧪 BUBBLE CLICKABILITY TEST:\", {\n      commentId: this.props.comment.id,\n      bubbleElement: this.element,\n      elementRect: rect,\n      elementAtCenter: elementAtPoint,\n      isClickable: elementAtPoint === this.element,\n      parentElement: this.element.parentElement,\n      parentDisplay: this.element.parentElement?.style.display,\n      parentComputedDisplay: this.element.parentElement\n        ? getComputedStyle(this.element.parentElement).display\n        : null,\n      bubbleStyles: {\n        display: getComputedStyle(this.element).display,\n        visibility: getComputedStyle(this.element).visibility,\n        opacity: getComputedStyle(this.element).opacity,\n        pointerEvents: getComputedStyle(this.element).pointerEvents,\n        zIndex: getComputedStyle(this.element).zIndex,\n        position: getComputedStyle(this.element).position,\n      },\n    });\n\n    // Try to trigger a click programmatically to test\n    console.log(\"🔄 Attempting programmatic click...\");\n    this.element.click();\n  }\n\n  private getStatusColor(): { bg: string; border: string; text: string } {\n    switch (this.props.comment.status) {\n      case CommentStatus.BUG:\n        return { bg: \"#dc3545\", border: \"#c82333\", text: \"white\" }; // Red\n      case CommentStatus.FEATURE_REQUEST:\n        return { bg: \"#ffc107\", border: \"#e0a800\", text: \"black\" }; // Yellow\n      case CommentStatus.DEV_COMPLETED:\n        return { bg: \"#3b82f6\", border: \"#2066b3\", text: \"white\" }; // Blue\n      case CommentStatus.DONE:\n        return { bg: \"#28a745\", border: \"#1e7e34\", text: \"white\" }; // Green\n      case CommentStatus.ARCHIVED:\n        return { bg: \"#6c757d\", border: \"#545b62\", text: \"white\" }; // Gray\n      default:\n        return { bg: \"#007bff\", border: \"#0056b3\", text: \"white\" }; // Default blue\n    }\n  }\n\n  private createElement(): HTMLElement {\n    const bubble = document.createElement(\"div\");\n    bubble.className = \"uicm-comment-bubble\";\n    bubble.style.position = \"absolute\";\n    bubble.style.left = `${this.props.position.x}px`;\n    bubble.style.top = `${this.props.position.y}px`;\n    bubble.style.width = \"32px\";\n    bubble.style.height = \"32px\";\n    bubble.style.borderRadius = \"50%\";\n\n    const colors = this.getStatusColor();\n    bubble.style.backgroundColor = colors.bg;\n    bubble.style.border = `2px solid ${colors.border}`;\n    bubble.style.color = colors.text;\n\n    bubble.style.cursor = \"pointer\";\n    bubble.style.display = \"flex\";\n    bubble.style.alignItems = \"center\";\n    bubble.style.justifyContent = \"center\";\n    bubble.style.fontSize = \"16px\";\n    bubble.style.fontWeight = \"bold\";\n    bubble.style.zIndex = \"100\"; // Relative to interaction layer which has z-index 2\n    bubble.style.boxShadow = \"0 2px 8px rgba(0, 0, 0, 0.2)\";\n    bubble.style.transition = \"all 0.2s ease\";\n    bubble.style.position = \"relative\";\n\n    // Show chat icon instead of number\n    bubble.innerHTML = \"💬\";\n\n    // Create comment count badge\n    const commentCount = 1 + (this.props.comment.replies?.length || 0);\n    const countBadge = document.createElement(\"div\");\n    countBadge.className = \"uicm-comment-count-badge\";\n    countBadge.textContent = commentCount.toString();\n    countBadge.style.cssText = `\n      position: absolute;\n      top: -6px;\n      right: -6px;\n      background: ${colors.bg};\n      color: ${colors.text};\n      border: 2px solid ${colors.border};\n      border-radius: 50%;\n      width: 18px;\n      height: 18px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 10px;\n      font-weight: bold;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n      z-index: 101;\n    `;\n\n    bubble.appendChild(countBadge);\n\n    // Add status and role tooltip\n    const roleColors = getRoleColor(this.props.comment.role);\n    bubble.title = `Status: ${this.props.comment.status.toUpperCase()} | Role: ${this.props.comment.role.toUpperCase()} | Comments: ${commentCount}`;\n\n    // Add role indicator with color\n    const roleIndicator = document.createElement(\"div\");\n    roleIndicator.className = \"uicm-role-indicator\";\n    roleIndicator.style.cssText = `\n      position: absolute;\n      bottom: -2px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 8px;\n      height: 8px;\n      border-radius: 50%;\n      background: ${roleColors.border};\n      border: 1px solid white;\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n      z-index: 102;\n    `;\n\n    bubble.appendChild(roleIndicator);\n\n    console.log(\"💬 Chat bubble element created:\", {\n      className: bubble.className,\n      position: { x: this.props.position.x, y: this.props.position.y },\n      status: this.props.comment.status,\n      colors: colors,\n      commentCount: commentCount,\n    });\n\n    return bubble;\n  }\n\n  private attachEventListeners(): void {\n    console.log(\"🔗 Attaching event listeners to bubble\");\n\n    this.element.addEventListener(\"click\", this.handleClick);\n    console.log(\"✅ Click listener attached\");\n\n    this.element.addEventListener(\"mouseenter\", () => {\n      console.log(\"🐭 Mouse enter bubble\");\n      this.element.style.transform = \"scale(1.1)\";\n    });\n\n    this.element.addEventListener(\"mouseleave\", () => {\n      console.log(\"🐭 Mouse leave bubble\");\n      this.element.style.transform = \"scale(1)\";\n    });\n\n    // Listen for reply added events to refresh modal\n    document.addEventListener(\"uicm-reply-added\", (e: Event) => {\n      const customEvent = e as CustomEvent;\n      if (\n        customEvent.detail.commentId === this.props.comment.id &&\n        this.modal\n      ) {\n        console.log(\"🔄 Reply added event received, refreshing modal\");\n        const updatedComments = [\n          this.props.comment,\n          ...this.props.comment.replies,\n        ];\n        this.modal.updateComments(updatedComments);\n      }\n    });\n  }\n\n  private handleClick = (e: Event): void => {\n    console.log(\"🔵 CommentBubble clicked!\", this.props.comment.id);\n    console.log(\"🔵 Click event details:\", {\n      target: e.target,\n      currentTarget: e.currentTarget,\n      type: e.type,\n      bubbles: e.bubbles,\n      cancelable: e.cancelable,\n      eventPhase: e.eventPhase,\n      isTrusted: e.isTrusted,\n    });\n\n    console.log(\"🔵 Bubble element state:\", {\n      element: this.element,\n      parent: this.element.parentElement,\n      parentDisplay: this.element.parentElement?.style.display,\n      rect: this.element.getBoundingClientRect(),\n    });\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    // Get click position from mouse event\n    const mouseEvent = e as MouseEvent;\n    const clickPosition = {\n      x: mouseEvent.clientX || this.props.position.x,\n      y: mouseEvent.clientY || this.props.position.y,\n    };\n\n    console.log(\"🔄 About to show modal at click position:\", clickPosition);\n    this.showModal(clickPosition);\n  };\n\n  private showModal(position: { x: number; y: number }): void {\n    console.log(\"🔄 Creating modal for comment:\", this.props.comment.id);\n\n    // Destroy existing modal if any\n    if (this.modal) {\n      console.log(\"🗑️ Destroying existing modal\");\n      this.modal.destroy();\n      this.modal = null;\n    }\n\n    // Get all comments for this element (main comment + replies)\n    const allComments = [this.props.comment, ...this.props.comment.replies];\n    console.log(\"📝 Modal comments:\", allComments.length);\n\n    // Calculate initial modal position\n    const initialPosition = {\n      x: position.x + 30,\n      y: position.y,\n    };\n\n    // Create modal with initial position\n    this.modal = new CommentModal({\n      comments: allComments,\n      currentUser: this.props.currentUser,\n      position: initialPosition,\n      onClose: () => {\n        console.log(\"❌ Modal closed\");\n        if (this.modal) {\n          this.modal.destroy();\n          this.modal = null;\n        }\n      },\n      onAddReply: async (\n        commentId: string,\n        content: string,\n        user?: User,\n        attachments?: CommentAttachment[]\n      ) => {\n        console.log(\n          \"💬 Adding reply:\",\n          commentId,\n          content,\n          user?.name,\n          \"attachments:\",\n          attachments?.length || 0\n        );\n        await this.props.onReply(commentId, content, user, attachments);\n\n        // Update modal with refreshed comment data (including new reply)\n        if (this.modal) {\n          const updatedComments = [\n            this.props.comment,\n            ...this.props.comment.replies,\n          ];\n          this.modal.updateComments(updatedComments);\n        }\n\n        // Update comment count display\n        const commentCount = 1 + (this.props.comment.replies?.length || 0);\n        const countBadge = this.element.querySelector(\n          \".uicm-comment-count-badge\"\n        ) as HTMLElement;\n        if (countBadge) {\n          countBadge.textContent = commentCount.toString();\n        }\n        this.element.title = `Status: ${this.props.comment.status.toUpperCase()} | Comments: ${commentCount}`;\n      },\n      onStatusChange: async (commentId: string, status: CommentStatus) => {\n        console.log(\"🔄 Changing status:\", commentId, status);\n        await this.props.onStatusChange(commentId, status);\n        // Update bubble appearance\n        this.updateBubbleAppearance();\n      },\n      onDeleteComment: async (commentId: string) => {\n        console.log(\"🗑️ Deleting comment:\", commentId);\n        await this.props.onDelete(commentId);\n\n        // Update bubble appearance after deletion\n        this.updateBubbleAppearance();\n\n        // If this was the main comment being deleted, close modal\n        if (commentId === this.props.comment.id) {\n          if (this.modal) {\n            this.modal.destroy();\n            this.modal = null;\n          }\n        }\n      },\n    });\n\n    console.log(\"✅ Modal created, using CommentManager to show\");\n\n    // Use CommentManager for centralized modal management\n    this.props.onShowModal(this.modal);\n\n    // Add modal to interaction layer\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    if (interactionLayer) {\n      interactionLayer.appendChild(this.modal.getElement());\n      // Reposition modal to ensure it stays within viewport\n      this.modal.reposition();\n      console.log(\"🎯 Modal appended to interaction layer\");\n    }\n  }\n\n  public updateComment(comment: Comment): void {\n    console.log(\"🔄 CommentBubble.updateComment called:\", {\n      commentId: comment.id,\n      oldRepliesCount: this.props.comment.replies?.length || 0,\n      newRepliesCount: comment.replies?.length || 0,\n      modalExists: !!this.modal,\n    });\n\n    this.props.comment = comment;\n    this.updateBubbleAppearance();\n\n    // Update modal if it exists and is open\n    if (this.modal) {\n      console.log(\"🔄 Updating modal with new comment data\");\n      const updatedComments = [\n        this.props.comment,\n        ...this.props.comment.replies,\n      ];\n      this.modal.updateComments(updatedComments);\n    }\n  }\n\n  public updateUser(user: User): void {\n    this.props.currentUser = user;\n    console.log(\"🔄 CommentBubble: User updated:\", user.name);\n    // Refresh modal if it's open\n    if (this.modal) {\n      this.modal.updateUser(user);\n    }\n  }\n\n  private updateBubbleAppearance(): void {\n    const colors = this.getStatusColor();\n    this.element.style.backgroundColor = colors.bg;\n    this.element.style.border = `2px solid ${colors.border}`;\n    this.element.style.color = colors.text;\n\n    const commentCount = 1 + (this.props.comment.replies?.length || 0);\n\n    // Update count badge\n    const countBadge = this.element.querySelector(\n      \".uicm-comment-count-badge\"\n    ) as HTMLElement;\n    if (countBadge) {\n      countBadge.textContent = commentCount.toString();\n      countBadge.style.background = colors.bg;\n      countBadge.style.color = colors.text;\n      countBadge.style.borderColor = colors.border;\n    }\n\n    // Update role indicator\n    const roleIndicator = this.element.querySelector(\n      \".uicm-role-indicator\"\n    ) as HTMLElement;\n    if (roleIndicator) {\n      const roleColors = getRoleColor(this.props.comment.role);\n      roleIndicator.style.background = roleColors.border;\n    }\n\n    this.element.title = `Status: ${this.props.comment.status.toUpperCase()} | Role: ${this.props.comment.role.toUpperCase()} | Comments: ${commentCount}`;\n\n    console.log(\"💬 Chat bubble appearance updated:\", {\n      status: this.props.comment.status,\n      role: this.props.comment.role,\n      colors: colors,\n      commentCount: commentCount,\n    });\n  }\n\n  public updatePosition(position: { x: number; y: number }): void {\n    this.props.position = position;\n    this.element.style.left = `${position.x}px`;\n    this.element.style.top = `${position.y}px`;\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public destroy(): void {\n    if (this.modal) {\n      this.modal.destroy();\n    }\n    this.element.removeEventListener(\"click\", this.handleClick);\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }\n\n  public testClickability(): void {\n    console.log(\"🧪 TESTING BUBBLE CLICKABILITY for:\", this.props.comment.id);\n    this.testBubbleClickability();\n  }\n}\n","import { User, CommentAttachment } from \"../types\";\nimport {\n  generateId,\n  constrainToViewport,\n  repositionInViewport,\n} from \"../utils/dom\";\nimport { base64UploadManager } from \"../utils/base64Upload\";\nimport { ImageModal } from \"./ImageModal\";\n\nexport interface CommentFormProps {\n  onSubmit: (\n    content: string,\n    userName?: string,\n    attachments?: CommentAttachment[]\n  ) => Promise<void>;\n  onCancel: () => void;\n  position: { x: number; y: number };\n  element: Element;\n  currentUser: User;\n}\n\nexport class CommentForm {\n  private element: HTMLElement;\n  private props: CommentFormProps;\n  private textarea!: HTMLTextAreaElement;\n  private nameInput!: HTMLInputElement;\n  private submitButton!: HTMLButtonElement;\n  private isSubmitting = false;\n  private selectedAttachments: CommentAttachment[] = [];\n\n  // Cache DOM elements to avoid repeated queries\n  private charCounter!: HTMLElement;\n  private avatar!: HTMLElement;\n  private imageModal: ImageModal | null = null;\n\n  constructor(props: CommentFormProps) {\n    this.props = props;\n    this.element = this.createElement();\n    this.setupEventListeners();\n  }\n\n  private addFilePreview(\n    attachment: CommentAttachment,\n    container: HTMLElement,\n    onRemove: () => void\n  ): void {\n    // Limit to 5 images\n    if (container.childElementCount >= 5) return;\n\n    const previewItem = document.createElement(\"div\");\n    previewItem.className = \"uicm-file-preview-item\";\n    previewItem.style.position = \"relative\";\n\n    if (attachment.type === \"image\") {\n      const imagePreview = document.createElement(\"img\");\n      imagePreview.className = \"uicm-file-preview-image\";\n      imagePreview.src = attachment.url;\n      imagePreview.alt = attachment.filename;\n      imagePreview.style.cursor = \"pointer\";\n\n      // Add click handler to open image modal\n      imagePreview.addEventListener(\"click\", () => {\n        if (this.imageModal) {\n          this.imageModal.destroy();\n        }\n        this.imageModal = new ImageModal(attachment.url);\n        this.imageModal.show();\n      });\n\n      previewItem.appendChild(imagePreview);\n    } else {\n      const fileIcon = document.createElement(\"span\");\n      fileIcon.className = \"uicm-file-preview-icon\";\n      fileIcon.innerHTML = \"📎\";\n      previewItem.appendChild(fileIcon);\n    }\n\n    // Only show file size (not name or url)\n    const fileSize = document.createElement(\"span\");\n    fileSize.className = \"uicm-file-preview-size\";\n    fileSize.textContent = this.formatFileSize(attachment.size);\n    previewItem.appendChild(fileSize);\n\n    // Remove button absolutely positioned top right\n    const removeButton = document.createElement(\"button\");\n    removeButton.className = \"uicm-file-preview-remove\";\n    removeButton.innerHTML = \"×\";\n    removeButton.type = \"button\";\n    removeButton.style.position = \"absolute\";\n    removeButton.style.top = \"2px\";\n    removeButton.style.right = \"2px\";\n    removeButton.style.zIndex = \"2\";\n    removeButton.onclick = () => {\n      previewItem.remove();\n      onRemove();\n    };\n    previewItem.appendChild(removeButton);\n\n    container.appendChild(previewItem);\n  }\n\n  private formatFileSize(bytes: number): string {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n  }\n\n  private createElement(): HTMLElement {\n    const form = document.createElement(\"div\");\n    form.className = \"uicm-comment-form\";\n    form.style.position = \"absolute\";\n    form.style.zIndex = \"10000\";\n\n    // Temporarily add to DOM to get accurate dimensions\n    document.body.appendChild(form);\n\n    // Constrain position to viewport\n    const constrainedPosition = constrainToViewport(form, this.props.position, {\n      padding: 20,\n      preferredSide: \"bottom\",\n    });\n\n    // Set constrained position\n    form.style.left = `${constrainedPosition.x}px`;\n    form.style.top = `${constrainedPosition.y}px`;\n\n    // Remove from DOM temporarily\n    document.body.removeChild(form);\n\n    // Header with improved layout\n    const header = document.createElement(\"div\");\n    header.className = \"uicm-form-header\";\n\n    // Header content container\n    const headerContent = document.createElement(\"div\");\n    headerContent.className = \"uicm-form-header-content\";\n\n    // Title section\n    const titleSection = document.createElement(\"div\");\n    titleSection.className = \"uicm-form-title-section\";\n\n    const title = document.createElement(\"h2\");\n    title.className = \"uicm-form-title\";\n    title.textContent = \"Add Comment\";\n\n    const subtitle = document.createElement(\"p\");\n    subtitle.className = \"uicm-form-subtitle\";\n    subtitle.textContent = \"Share your thoughts or feedback\";\n\n    titleSection.appendChild(title);\n    titleSection.appendChild(subtitle);\n\n    // Action buttons section\n    const actionSection = document.createElement(\"div\");\n    actionSection.className = \"uicm-form-action-section\";\n\n    // Close button with improved styling\n    const closeButton = document.createElement(\"button\");\n    closeButton.className = \"uicm-close-button\";\n    closeButton.innerHTML = \"×\";\n    closeButton.setAttribute(\"aria-label\", \"Close comment form\");\n    closeButton.title = \"Close\";\n    closeButton.onclick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.onCancel();\n    };\n\n    actionSection.appendChild(closeButton);\n\n    // Assemble header\n    headerContent.appendChild(titleSection);\n    headerContent.appendChild(actionSection);\n    header.appendChild(headerContent);\n\n    // Content area\n    const content = document.createElement(\"div\");\n    content.className = \"uicm-form-content\";\n\n    // User info section\n    const userInfo = document.createElement(\"div\");\n    userInfo.className = \"uicm-user-info\";\n\n    const avatar = document.createElement(\"div\");\n    avatar.className = \"uicm-user-avatar\";\n    avatar.textContent = this.props.currentUser.name.charAt(0).toUpperCase();\n    if (this.props.currentUser.avatar) {\n      avatar.style.backgroundImage = `url(${this.props.currentUser.avatar})`;\n      avatar.style.backgroundSize = \"cover\";\n      avatar.textContent = \"\";\n    }\n\n    // Cache avatar element\n    this.avatar = avatar;\n\n    const userDetails = document.createElement(\"div\");\n    userDetails.className = \"uicm-user-details\";\n\n    // Editable name input\n    this.nameInput = document.createElement(\"input\");\n    this.nameInput.type = \"text\";\n    this.nameInput.className = \"uicm-user-name-input\";\n    this.nameInput.value = this.props.currentUser.name;\n    this.nameInput.placeholder = \"Your name\";\n    this.nameInput.maxLength = 50;\n\n    userDetails.appendChild(this.nameInput);\n\n    userInfo.appendChild(avatar);\n    userInfo.appendChild(userDetails);\n\n    // Textarea with enhanced features\n    this.textarea = document.createElement(\"textarea\");\n    this.textarea.placeholder = \"Write a comment...\";\n    this.textarea.className = \"uicm-comment-textarea\";\n    this.textarea.rows = 3;\n\n    // File upload section\n    const fileUploadSection = document.createElement(\"div\");\n    fileUploadSection.className = \"uicm-file-upload-section\";\n\n    const fileInput = document.createElement(\"input\");\n    fileInput.type = \"file\";\n    fileInput.className = \"uicm-file-input\";\n    fileInput.style.display = \"none\";\n    fileInput.accept = \"image/*,application/pdf,.doc,.docx,.txt,.zip,.rar\";\n    fileInput.multiple = true;\n\n    const fileUploadButton = document.createElement(\"button\");\n    fileUploadButton.className = \"uicm-file-upload-button\";\n    fileUploadButton.type = \"button\";\n    fileUploadButton.innerHTML = \"📎 Attach Files\";\n    fileUploadButton.onclick = () => fileInput.click();\n\n    const filePreviewContainer = document.createElement(\"div\");\n    filePreviewContainer.className = \"uicm-file-preview-container\";\n\n    // Handle file selection\n    fileInput.addEventListener(\"change\", async (e) => {\n      const files = (e.target as HTMLInputElement).files;\n      if (files) {\n        for (const file of Array.from(files)) {\n          try {\n            // Upload file using Base64UploadManager\n            const attachment = await base64UploadManager.uploadFile(file);\n            this.selectedAttachments.push(attachment);\n            this.addFilePreview(attachment, filePreviewContainer, () => {\n              this.selectedAttachments = this.selectedAttachments.filter(\n                (a) => a.id !== attachment.id\n              );\n              this.updateSubmitButton();\n            });\n          } catch (error) {\n            console.error(\"Failed to upload file:\", error);\n            const errorMessage =\n              error instanceof Error ? error.message : \"Unknown error\";\n            alert(`Failed to upload ${file.name}: ${errorMessage}`);\n          }\n        }\n\n        this.updateSubmitButton();\n      }\n    });\n\n    fileUploadSection.appendChild(fileInput);\n    fileUploadSection.appendChild(fileUploadButton);\n    fileUploadSection.appendChild(filePreviewContainer);\n\n    // Character counter\n    this.charCounter = document.createElement(\"div\");\n    this.charCounter.className = \"uicm-char-counter\";\n    this.charCounter.textContent = \"0 / 1000\";\n\n    // Action buttons\n    const actions = document.createElement(\"div\");\n    actions.className = \"uicm-form-actions\";\n\n    // Secondary actions\n    const secondaryActions = document.createElement(\"div\");\n    secondaryActions.className = \"uicm-secondary-actions\";\n\n    const emojiButton = document.createElement(\"button\");\n    emojiButton.className = \"uicm-emoji-button\";\n    emojiButton.innerHTML = \"😊\";\n    emojiButton.setAttribute(\"aria-label\", \"Add emoji\");\n    emojiButton.type = \"button\";\n\n    const mentionButton = document.createElement(\"button\");\n    mentionButton.className = \"uicm-mention-button\";\n    mentionButton.innerHTML = \"@\";\n    mentionButton.setAttribute(\"aria-label\", \"Mention someone\");\n    mentionButton.type = \"button\";\n\n    secondaryActions.appendChild(emojiButton);\n    secondaryActions.appendChild(mentionButton);\n\n    // Primary actions\n    const primaryActions = document.createElement(\"div\");\n    primaryActions.className = \"uicm-primary-actions\";\n\n    this.submitButton = document.createElement(\"button\");\n    this.submitButton.className = \"uicm-submit-button\";\n    this.submitButton.type = \"button\";\n    this.updateSubmitButton();\n\n    primaryActions.appendChild(this.submitButton);\n\n    actions.appendChild(secondaryActions);\n    actions.appendChild(primaryActions);\n\n    // Assemble form\n    content.appendChild(userInfo);\n    content.appendChild(this.textarea);\n    content.appendChild(this.charCounter); // move char counter right below textarea\n    content.appendChild(fileUploadSection);\n    content.appendChild(actions);\n\n    form.appendChild(header);\n    form.appendChild(content);\n\n    return form;\n  }\n\n  private setupEventListeners(): void {\n    // Prevent form from closing when clicking inside form\n    this.element.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      console.log(\"🔒 Form internal click - prevented propagation\");\n    });\n\n    // Prevent form from closing when interacting with form elements\n    this.element.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"mouseup\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keydown\", (e) => {\n      e.stopPropagation();\n    });\n\n    this.element.addEventListener(\"keyup\", (e) => {\n      e.stopPropagation();\n    });\n\n    // Auto-resize textarea\n    this.textarea.addEventListener(\"input\", () => {\n      this.textarea.style.height = \"auto\";\n      this.textarea.style.height =\n        Math.min(this.textarea.scrollHeight, 200) + \"px\";\n      this.updateCharCounter();\n      this.updateSubmitButton();\n    });\n\n    // Handle paste events for images\n    this.textarea.addEventListener(\"paste\", async (e) => {\n      const items = e.clipboardData?.items;\n      if (items) {\n        for (let i = 0; i < items.length; i++) {\n          const item = items[i];\n          if (item.type.indexOf(\"image\") !== -1) {\n            e.preventDefault();\n            const file = item.getAsFile();\n            if (file) {\n              // Show loading state\n              const originalPlaceholder = this.textarea.placeholder;\n              this.textarea.placeholder = \"🔄 Processing image...\";\n              this.textarea.disabled = true;\n\n              // Show loading indicator\n              const loadingIndicator = document.createElement(\"div\");\n              loadingIndicator.className = \"uicm-paste-loading\";\n              loadingIndicator.innerHTML = `\n                <div class=\"uicm-loading-spinner\"></div>\n                <span>Processing image: ${file.name}</span>\n              `;\n              loadingIndicator.style.cssText = `\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background: rgba(255, 255, 255, 0.95);\n                backdrop-filter: blur(10px);\n                border: 1px solid rgba(59, 130, 246, 0.2);\n                border-radius: 12px;\n                padding: 16px 24px;\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                font-size: 14px;\n                color: #1e293b;\n                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n                z-index: 1000;\n              `;\n\n              const spinner = loadingIndicator.querySelector(\n                \".uicm-loading-spinner\"\n              ) as HTMLElement;\n              spinner.style.cssText = `\n                width: 20px;\n                height: 20px;\n                border: 2px solid #e2e8f0;\n                border-top: 2px solid #3b82f6;\n                border-radius: 50%;\n                animation: uicm-spin 1s linear infinite;\n              `;\n\n              this.element.appendChild(loadingIndicator);\n\n              try {\n                const attachment = await base64UploadManager.uploadFile(file);\n                this.selectedAttachments.push(attachment);\n\n                // Find file preview container\n                const filePreviewContainer = this.element.querySelector(\n                  \".uicm-file-preview-container\"\n                );\n                if (filePreviewContainer) {\n                  this.addFilePreview(\n                    attachment,\n                    filePreviewContainer as HTMLElement,\n                    () => {\n                      this.selectedAttachments =\n                        this.selectedAttachments.filter(\n                          (a) => a.id !== attachment.id\n                        );\n                      this.updateSubmitButton();\n                    }\n                  );\n                }\n\n                this.updateSubmitButton();\n                console.log(\n                  \"📸 Image pasted and uploaded:\",\n                  attachment.filename\n                );\n\n                // Show success message briefly\n                loadingIndicator.innerHTML = `\n                  <span style=\"color: #10b981;\">✅</span>\n                  <span>Image uploaded successfully!</span>\n                `;\n                setTimeout(() => {\n                  if (loadingIndicator.parentNode) {\n                    loadingIndicator.parentNode.removeChild(loadingIndicator);\n                  }\n                }, 1000);\n              } catch (error) {\n                console.error(\"Failed to paste image:\", error);\n                const errorMessage =\n                  error instanceof Error ? error.message : \"Unknown error\";\n\n                // Show error message\n                loadingIndicator.innerHTML = `\n                  <span style=\"color: #ef4444;\">❌</span>\n                  <span>Failed to upload: ${errorMessage}</span>\n                `;\n                setTimeout(() => {\n                  if (loadingIndicator.parentNode) {\n                    loadingIndicator.parentNode.removeChild(loadingIndicator);\n                  }\n                }, 3000);\n              } finally {\n                // Restore input state\n                this.textarea.placeholder = originalPlaceholder;\n                this.textarea.disabled = false;\n                this.textarea.focus();\n              }\n            }\n          }\n        }\n      }\n    });\n\n    // Update avatar when name changes\n    this.nameInput.addEventListener(\"input\", () => {\n      if (this.avatar && this.nameInput.value.trim()) {\n        this.avatar.textContent = this.nameInput.value\n          .trim()\n          .charAt(0)\n          .toUpperCase();\n      }\n      this.updateSubmitButton();\n    });\n\n    // Submit on Ctrl/Cmd + Enter\n    this.textarea.addEventListener(\"keydown\", (e) => {\n      if ((e.ctrlKey || e.metaKey) && e.key === \"Enter\") {\n        e.preventDefault();\n        this.handleSubmit();\n      }\n    });\n\n    // Focus textarea on mount - use requestAnimationFrame for better performance\n    requestAnimationFrame(() => {\n      this.textarea.focus();\n    });\n\n    // Submit button click\n    this.submitButton.onclick = async (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      await this.handleSubmit();\n    };\n  }\n\n  private updateCharCounter(): void {\n    const length = this.textarea.value.length;\n    const maxLength = 1000;\n\n    this.charCounter.textContent = `${length} / ${maxLength}`;\n\n    if (length > maxLength * 0.8) {\n      this.charCounter.classList.add(\"uicm-warning\");\n    } else {\n      this.charCounter.classList.remove(\"uicm-warning\");\n    }\n\n    if (length > maxLength) {\n      this.charCounter.classList.add(\"uicm-error\");\n    } else {\n      this.charCounter.classList.remove(\"uicm-error\");\n    }\n  }\n\n  private updateSubmitButton(): void {\n    const content = this.textarea.value.trim();\n    const userName = this.nameInput.value.trim();\n    const hasContent = content.length > 0;\n    const hasAttachments = this.selectedAttachments.length > 0;\n    const isValid =\n      (hasContent || hasAttachments) &&\n      userName.length > 0 &&\n      content.length <= 1000;\n\n    this.submitButton.disabled = !isValid || this.isSubmitting;\n\n    if (this.isSubmitting) {\n      this.submitButton.innerHTML = `\n        <div class=\"uicm-spinner\"></div>\n        <span>Posting...</span>\n      `;\n    } else {\n      const shortcut = navigator.platform.includes(\"Mac\") ? \"⌘\" : \"Ctrl\";\n      this.submitButton.innerHTML = `\n        <span>Post Comment</span>\n        <kbd>${shortcut} + Enter</kbd>\n      `;\n    }\n  }\n\n  private async handleSubmit(): Promise<void> {\n    const content = this.textarea.value.trim();\n    const userName = this.nameInput.value.trim();\n    const hasContent = content.length > 0;\n    const hasAttachments = this.selectedAttachments.length > 0;\n\n    if ((!hasContent && !hasAttachments) || !userName || content.length > 1000)\n      return;\n\n    this.isSubmitting = true;\n    this.updateSubmitButton();\n\n    try {\n      await this.props.onSubmit(\n        content,\n        userName,\n        this.selectedAttachments.length > 0\n          ? this.selectedAttachments\n          : undefined\n      );\n\n      // Clear form after successful submission\n      this.textarea.value = \"\";\n      this.selectedAttachments = [];\n\n      // Clear file preview container\n      const filePreviewContainer = this.element.querySelector(\n        \".uicm-file-preview-container\"\n      );\n      if (filePreviewContainer) {\n        filePreviewContainer.innerHTML = \"\";\n      }\n\n      // Clear file input\n      const fileInput = this.element.querySelector(\n        \".uicm-file-input\"\n      ) as HTMLInputElement;\n      if (fileInput) {\n        fileInput.value = \"\";\n      }\n\n      this.updateCharCounter();\n      this.updateSubmitButton();\n    } catch (error) {\n      console.error(\"Failed to submit comment:\", error);\n      this.showError(\"Failed to post comment. Please try again.\");\n    } finally {\n      this.isSubmitting = false;\n      this.updateSubmitButton();\n    }\n  }\n\n  private showError(message: string): void {\n    // Remove existing error\n    const existingError = this.element.querySelector(\".uicm-error-message\");\n    if (existingError) {\n      existingError.remove();\n    }\n\n    // Create new error message\n    const errorDiv = document.createElement(\"div\");\n    errorDiv.className = \"uicm-error-message\";\n    errorDiv.textContent = message;\n\n    // Insert before actions\n    const actions = this.element.querySelector(\".uicm-form-actions\");\n    if (actions) {\n      actions.parentNode?.insertBefore(errorDiv, actions);\n    }\n\n    // Auto-remove after 5 seconds\n    setTimeout(() => {\n      errorDiv.remove();\n    }, 5000);\n  }\n\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  public reposition(): void {\n    // Reposition form to ensure it stays within viewport with 100px padding\n    repositionInViewport(this.element, {\n      padding: 100,\n      preferredSide: \"bottom\",\n    });\n  }\n\n  public destroy(): void {\n    if (this.imageModal) {\n      this.imageModal.destroy();\n      this.imageModal = null;\n    }\n    this.element.remove();\n  }\n}\n","/**\n * Mobile utilities for touch interactions and responsive design\n */\n\nexport interface TouchEventData {\n  x: number;\n  y: number;\n  timestamp: number;\n  target: Element;\n}\n\nexport interface SwipeGesture {\n  direction: \"left\" | \"right\" | \"up\" | \"down\";\n  distance: number;\n  duration: number;\n  startPoint: TouchEventData;\n  endPoint: TouchEventData;\n}\n\nexport interface PinchGesture {\n  scale: number;\n  center: { x: number; y: number };\n  startDistance: number;\n  currentDistance: number;\n}\n\n/**\n * Detects if the device supports touch\n */\nexport function isTouchDevice(): boolean {\n  return \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n}\n\n/**\n * Detects if the device is mobile based on screen size and user agent\n */\nexport function isMobileDevice(): boolean {\n  const userAgent = navigator.userAgent.toLowerCase();\n  const mobileKeywords = [\"android\", \"iphone\", \"ipad\", \"mobile\", \"tablet\"];\n  const hasKeyword = mobileKeywords.some((keyword) =>\n    userAgent.includes(keyword)\n  );\n  const hasSmallScreen = window.innerWidth <= 768;\n\n  return hasKeyword || hasSmallScreen;\n}\n\n/**\n * Gets the current viewport size\n */\nexport function getViewportSize(): { width: number; height: number } {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  };\n}\n\n/**\n * Checks if the device is in landscape mode\n */\nexport function isLandscape(): boolean {\n  return window.innerWidth > window.innerHeight;\n}\n\n/**\n * Touch gesture recognizer\n */\nexport class TouchGestureRecognizer {\n  private element: HTMLElement;\n  private isTracking: boolean = false;\n  private startTouch: TouchEventData | null = null;\n  private lastTouch: TouchEventData | null = null;\n  private onSwipe?: (gesture: SwipeGesture) => void;\n  private onTap?: (event: TouchEventData) => void;\n  private onLongPress?: (event: TouchEventData) => void;\n  private onPinch?: (gesture: PinchGesture) => void;\n\n  private readonly SWIPE_THRESHOLD = 50; // minimum distance for swipe\n  private readonly SWIPE_TIMEOUT = 500; // maximum time for swipe\n  private readonly TAP_TIMEOUT = 300; // maximum time for tap\n  private readonly LONG_PRESS_TIMEOUT = 500; // minimum time for long press\n\n  private longPressTimer: number | null = null;\n  private tapTimer: number | null = null;\n\n  constructor(\n    element: HTMLElement,\n    options: {\n      onSwipe?: (gesture: SwipeGesture) => void;\n      onTap?: (event: TouchEventData) => void;\n      onLongPress?: (event: TouchEventData) => void;\n      onPinch?: (gesture: PinchGesture) => void;\n    } = {}\n  ) {\n    this.element = element;\n    this.onSwipe = options.onSwipe;\n    this.onTap = options.onTap;\n    this.onLongPress = options.onLongPress;\n    this.onPinch = options.onPinch;\n\n    this.attachEventListeners();\n  }\n\n  private attachEventListeners(): void {\n    this.element.addEventListener(\"touchstart\", this.handleTouchStart, {\n      passive: false,\n    });\n    this.element.addEventListener(\"touchmove\", this.handleTouchMove, {\n      passive: false,\n    });\n    this.element.addEventListener(\"touchend\", this.handleTouchEnd, {\n      passive: false,\n    });\n    this.element.addEventListener(\"touchcancel\", this.handleTouchCancel, {\n      passive: false,\n    });\n  }\n\n  private handleTouchStart = (e: TouchEvent): void => {\n    if (e.touches.length === 1) {\n      // Single touch\n      const touch = e.touches[0];\n      this.startTouch = this.createTouchEventData(touch, e.target as Element);\n      this.lastTouch = this.startTouch;\n      this.isTracking = true;\n\n      // Start long press timer\n      this.longPressTimer = window.setTimeout(() => {\n        if (this.isTracking && this.startTouch && this.onLongPress) {\n          this.onLongPress(this.startTouch);\n        }\n      }, this.LONG_PRESS_TIMEOUT);\n    } else if (e.touches.length === 2 && this.onPinch) {\n      // Multi-touch for pinch\n      this.handlePinchStart(e);\n    }\n  };\n\n  private handleTouchMove = (e: TouchEvent): void => {\n    if (!this.isTracking) return;\n\n    if (e.touches.length === 1) {\n      const touch = e.touches[0];\n      this.lastTouch = this.createTouchEventData(touch, e.target as Element);\n\n      // Cancel long press on move\n      if (this.longPressTimer) {\n        clearTimeout(this.longPressTimer);\n        this.longPressTimer = null;\n      }\n\n      // Prevent default to avoid scrolling during gesture\n      e.preventDefault();\n    } else if (e.touches.length === 2 && this.onPinch) {\n      this.handlePinchMove(e);\n    }\n  };\n\n  private handleTouchEnd = (e: TouchEvent): void => {\n    if (!this.isTracking || !this.startTouch || !this.lastTouch) return;\n\n    this.isTracking = false;\n\n    // Clear timers\n    if (this.longPressTimer) {\n      clearTimeout(this.longPressTimer);\n      this.longPressTimer = null;\n    }\n\n    const duration = this.lastTouch.timestamp - this.startTouch.timestamp;\n    const distance = this.getDistance(this.startTouch, this.lastTouch);\n\n    if (distance < this.SWIPE_THRESHOLD && duration < this.TAP_TIMEOUT) {\n      // Tap gesture\n      if (this.onTap) {\n        this.onTap(this.startTouch);\n      }\n    } else if (\n      distance >= this.SWIPE_THRESHOLD &&\n      duration < this.SWIPE_TIMEOUT\n    ) {\n      // Swipe gesture\n      if (this.onSwipe) {\n        const direction = this.getSwipeDirection(\n          this.startTouch,\n          this.lastTouch\n        );\n        const gesture: SwipeGesture = {\n          direction,\n          distance,\n          duration,\n          startPoint: this.startTouch,\n          endPoint: this.lastTouch,\n        };\n        this.onSwipe(gesture);\n      }\n    }\n\n    this.startTouch = null;\n    this.lastTouch = null;\n  };\n\n  private handleTouchCancel = (): void => {\n    this.isTracking = false;\n    this.startTouch = null;\n    this.lastTouch = null;\n\n    if (this.longPressTimer) {\n      clearTimeout(this.longPressTimer);\n      this.longPressTimer = null;\n    }\n  };\n\n  private handlePinchStart(e: TouchEvent): void {\n    // Implement pinch gesture logic if needed\n    // For now, just prevent default\n    e.preventDefault();\n  }\n\n  private handlePinchMove(e: TouchEvent): void {\n    // Implement pinch gesture logic if needed\n    e.preventDefault();\n  }\n\n  private createTouchEventData(touch: Touch, target: Element): TouchEventData {\n    return {\n      x: touch.clientX,\n      y: touch.clientY,\n      timestamp: Date.now(),\n      target,\n    };\n  }\n\n  private getDistance(start: TouchEventData, end: TouchEventData): number {\n    const dx = end.x - start.x;\n    const dy = end.y - start.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  private getSwipeDirection(\n    start: TouchEventData,\n    end: TouchEventData\n  ): SwipeGesture[\"direction\"] {\n    const dx = end.x - start.x;\n    const dy = end.y - start.y;\n\n    if (Math.abs(dx) > Math.abs(dy)) {\n      return dx > 0 ? \"right\" : \"left\";\n    } else {\n      return dy > 0 ? \"down\" : \"up\";\n    }\n  }\n\n  public destroy(): void {\n    this.element.removeEventListener(\"touchstart\", this.handleTouchStart);\n    this.element.removeEventListener(\"touchmove\", this.handleTouchMove);\n    this.element.removeEventListener(\"touchend\", this.handleTouchEnd);\n    this.element.removeEventListener(\"touchcancel\", this.handleTouchCancel);\n\n    if (this.longPressTimer) {\n      clearTimeout(this.longPressTimer);\n    }\n    if (this.tapTimer) {\n      clearTimeout(this.tapTimer);\n    }\n  }\n}\n\n/**\n * Responsive breakpoints utility\n */\nexport class ResponsiveBreakpoints {\n  private static readonly BREAKPOINTS = {\n    xs: 0,\n    sm: 576,\n    md: 768,\n    lg: 992,\n    xl: 1200,\n    xxl: 1400,\n  };\n\n  static getCurrentBreakpoint(): string {\n    const width = window.innerWidth;\n\n    if (width >= this.BREAKPOINTS.xxl) return \"xxl\";\n    if (width >= this.BREAKPOINTS.xl) return \"xl\";\n    if (width >= this.BREAKPOINTS.lg) return \"lg\";\n    if (width >= this.BREAKPOINTS.md) return \"md\";\n    if (width >= this.BREAKPOINTS.sm) return \"sm\";\n    return \"xs\";\n  }\n\n  static isMobile(): boolean {\n    return window.innerWidth < this.BREAKPOINTS.md;\n  }\n\n  static isTablet(): boolean {\n    return (\n      window.innerWidth >= this.BREAKPOINTS.md &&\n      window.innerWidth < this.BREAKPOINTS.lg\n    );\n  }\n\n  static isDesktop(): boolean {\n    return window.innerWidth >= this.BREAKPOINTS.lg;\n  }\n}\n\n/**\n * Viewport positioning utility for mobile\n */\nexport class ViewportPositioning {\n  static adjustPositionForMobile(\n    element: HTMLElement,\n    targetPosition: { x: number; y: number },\n    options: {\n      padding?: number;\n      preferredSide?: \"top\" | \"bottom\" | \"left\" | \"right\";\n      allowOverflow?: boolean;\n    } = {}\n  ): { x: number; y: number } {\n    const {\n      padding = 16,\n      preferredSide = \"bottom\",\n      allowOverflow = false,\n    } = options;\n    const viewport = getViewportSize();\n    const elementRect = element.getBoundingClientRect();\n\n    let { x, y } = targetPosition;\n\n    // Adjust horizontal position\n    if (x + elementRect.width > viewport.width - padding) {\n      x = viewport.width - elementRect.width - padding;\n    }\n    if (x < padding) {\n      x = padding;\n    }\n\n    // Adjust vertical position\n    if (y + elementRect.height > viewport.height - padding) {\n      if (preferredSide === \"top\") {\n        y = targetPosition.y - elementRect.height - padding;\n      } else {\n        y = viewport.height - elementRect.height - padding;\n      }\n    }\n    if (y < padding) {\n      y = padding;\n    }\n\n    return { x, y };\n  }\n\n  static centerInViewport(element: HTMLElement): { x: number; y: number } {\n    const viewport = getViewportSize();\n    const elementRect = element.getBoundingClientRect();\n\n    return {\n      x: (viewport.width - elementRect.width) / 2,\n      y: (viewport.height - elementRect.height) / 2,\n    };\n  }\n\n  static getOptimalPosition(\n    element: HTMLElement,\n    targetElement: HTMLElement,\n    options: {\n      placement?: \"top\" | \"bottom\" | \"left\" | \"right\" | \"auto\";\n      offset?: number;\n      padding?: number;\n    } = {}\n  ): { x: number; y: number; placement: string } {\n    const { placement = \"auto\", offset = 8, padding = 16 } = options;\n    const viewport = getViewportSize();\n    const targetRect = targetElement.getBoundingClientRect();\n    const elementRect = element.getBoundingClientRect();\n\n    const positions = {\n      top: {\n        x: targetRect.left + (targetRect.width - elementRect.width) / 2,\n        y: targetRect.top - elementRect.height - offset,\n      },\n      bottom: {\n        x: targetRect.left + (targetRect.width - elementRect.width) / 2,\n        y: targetRect.bottom + offset,\n      },\n      left: {\n        x: targetRect.left - elementRect.width - offset,\n        y: targetRect.top + (targetRect.height - elementRect.height) / 2,\n      },\n      right: {\n        x: targetRect.right + offset,\n        y: targetRect.top + (targetRect.height - elementRect.height) / 2,\n      },\n    };\n\n    if (placement !== \"auto\") {\n      const pos = positions[placement];\n      return { ...pos, placement };\n    }\n\n    // Auto placement - find the best position\n    const placements = [\"bottom\", \"top\", \"right\", \"left\"] as const;\n\n    for (const p of placements) {\n      const pos = positions[p];\n      const fitsHorizontally =\n        pos.x >= padding &&\n        pos.x + elementRect.width <= viewport.width - padding;\n      const fitsVertically =\n        pos.y >= padding &&\n        pos.y + elementRect.height <= viewport.height - padding;\n\n      if (fitsHorizontally && fitsVertically) {\n        return { ...pos, placement: p };\n      }\n    }\n\n    // If no position fits perfectly, use bottom with adjustments\n    const pos = positions.bottom;\n    return {\n      x: Math.max(\n        padding,\n        Math.min(pos.x, viewport.width - elementRect.width - padding)\n      ),\n      y: Math.max(\n        padding,\n        Math.min(pos.y, viewport.height - elementRect.height - padding)\n      ),\n      placement: \"bottom\",\n    };\n  }\n}\n\n/**\n * Mobile-specific CSS utilities\n */\nexport function addMobileCSS(): void {\n  if (document.getElementById(\"uicm-mobile-styles\")) return;\n\n  const style = document.createElement(\"style\");\n  style.id = \"uicm-mobile-styles\";\n  style.textContent = `\n    @media (max-width: 768px) {\n      .uicm-comment-form {\n        width: calc(100vw - 32px) !important;\n        max-width: none !important;\n        min-width: 280px !important;\n      }\n      \n      .uicm-comment-bubble {\n        min-width: 40px !important;\n        min-height: 40px !important;\n        font-size: 14px !important;\n      }\n      \n      .uicm-comment-popup {\n        width: calc(100vw - 32px) !important;\n        max-width: none !important;\n        max-height: calc(100vh - 64px) !important;\n        overflow-y: auto !important;\n      }\n      \n      .uicm-textarea {\n        font-size: 16px !important; /* Prevents zoom on iOS */\n        min-height: 80px !important;\n      }\n      \n      .uicm-btn {\n        min-height: 44px !important; /* iOS touch target size */\n        padding: 12px 20px !important;\n        font-size: 16px !important;\n      }\n      \n      .uicm-form-actions {\n        gap: 12px !important;\n      }\n      \n      .uicm-form-help {\n        font-size: 14px !important;\n        padding: 8px !important;\n      }\n    }\n    \n    @media (max-width: 480px) {\n      .uicm-comment-form {\n        width: calc(100vw - 16px) !important;\n      }\n      \n      .uicm-comment-popup {\n        width: calc(100vw - 16px) !important;\n        max-height: calc(100vh - 32px) !important;\n      }\n      \n      .uicm-form-actions {\n        flex-direction: column !important;\n      }\n      \n      .uicm-btn {\n        width: 100% !important;\n      }\n    }\n    \n    /* Touch-friendly improvements */\n    .uicm-comment-bubble {\n      -webkit-tap-highlight-color: transparent !important;\n      touch-action: manipulation !important;\n    }\n    \n    .uicm-btn {\n      -webkit-tap-highlight-color: transparent !important;\n      touch-action: manipulation !important;\n    }\n    \n    .uicm-textarea {\n      -webkit-tap-highlight-color: transparent !important;\n      touch-action: manipulation !important;\n    }\n    \n    /* Prevent zooming on inputs */\n    .uicm-textarea,\n    .uicm-input {\n      font-size: 16px !important;\n    }\n  `;\n\n  document.head.appendChild(style);\n}\n\n/**\n * Removes mobile-specific CSS\n */\nexport function removeMobileCSS(): void {\n  const style = document.getElementById(\"uicm-mobile-styles\");\n  if (style) {\n    style.remove();\n  }\n}\n","/**\n * Throttle function - limits function execution to once per specified interval\n */\nexport function throttle<T extends (...args: any[]) => void>(\n  func: T,\n  delay: number\n): T {\n  let lastCall = 0;\n  let timeout: number | null = null;\n\n  return ((...args: Parameters<T>) => {\n    const now = Date.now();\n\n    if (now - lastCall >= delay) {\n      lastCall = now;\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      func(...args);\n    } else if (!timeout) {\n      timeout = window.setTimeout(() => {\n        lastCall = Date.now();\n        timeout = null;\n        func(...args);\n      }, delay - (now - lastCall));\n    }\n  }) as T;\n}\n\n/**\n * Debounce function - delays function execution until after specified delay\n */\nexport function debounce<T extends (...args: any[]) => void>(\n  func: T,\n  delay: number\n): T {\n  let timeout: number | null = null;\n\n  return ((...args: Parameters<T>) => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    timeout = window.setTimeout(() => {\n      timeout = null;\n      func(...args);\n    }, delay);\n  }) as T;\n}\n\n/**\n * Request animation frame throttle for smooth animations\n */\nexport function rafThrottle<T extends (...args: any[]) => void>(func: T): T {\n  let rafId: number | null = null;\n\n  return ((...args: Parameters<T>) => {\n    if (rafId) {\n      return;\n    }\n\n    rafId = requestAnimationFrame(() => {\n      rafId = null;\n      func(...args);\n    });\n  }) as T;\n}\n\n/**\n * Intersection Observer utility for efficient element visibility tracking\n */\nexport class VisibilityObserver {\n  private observer: IntersectionObserver;\n  private callbacks: Map<Element, (isVisible: boolean) => void> = new Map();\n\n  constructor(options: IntersectionObserverInit = {}) {\n    this.observer = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        const callback = this.callbacks.get(entry.target);\n        if (callback) {\n          callback(entry.isIntersecting);\n        }\n      });\n    }, options);\n  }\n\n  observe(element: Element, callback: (isVisible: boolean) => void): void {\n    this.callbacks.set(element, callback);\n    this.observer.observe(element);\n  }\n\n  unobserve(element: Element): void {\n    this.callbacks.delete(element);\n    this.observer.unobserve(element);\n  }\n\n  disconnect(): void {\n    this.callbacks.clear();\n    this.observer.disconnect();\n  }\n}\n\n/**\n * Efficient event batching for high-frequency events\n */\nexport class EventBatcher {\n  private queue: Array<() => void> = [];\n  private isProcessing = false;\n\n  add(callback: () => void): void {\n    this.queue.push(callback);\n    if (!this.isProcessing) {\n      this.process();\n    }\n  }\n\n  private process(): void {\n    if (this.queue.length === 0) {\n      this.isProcessing = false;\n      return;\n    }\n\n    this.isProcessing = true;\n    requestAnimationFrame(() => {\n      const callbacks = this.queue.splice(0);\n      callbacks.forEach((callback) => callback());\n      this.process();\n    });\n  }\n}\n\n/**\n * Memory-efficient cache with LRU eviction\n */\nexport class LRUCache<K, V> {\n  private cache: Map<K, V> = new Map();\n  private maxSize: number;\n\n  constructor(maxSize: number = 100) {\n    this.maxSize = maxSize;\n  }\n\n  get(key: K): V | undefined {\n    const value = this.cache.get(key);\n    if (value !== undefined) {\n      // Move to end (most recently used)\n      this.cache.delete(key);\n      this.cache.set(key, value);\n    }\n    return value;\n  }\n\n  set(key: K, value: V): void {\n    if (this.cache.has(key)) {\n      this.cache.delete(key);\n    } else if (this.cache.size >= this.maxSize) {\n      // Remove least recently used (first item)\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey !== undefined) {\n        this.cache.delete(firstKey);\n      }\n    }\n    this.cache.set(key, value);\n  }\n\n  clear(): void {\n    this.cache.clear();\n  }\n}\n","/**\n * Generate a stable XPath for a DOM element\n */\nexport function getElementXPath(element: Element): string {\n  if (element.id !== \"\") {\n    return `//*[@id=\"${element.id}\"]`;\n  }\n\n  if (element === document.body) {\n    return \"/html/body\";\n  }\n\n  let ix = 0;\n  const siblings = element.parentNode?.childNodes || [];\n\n  for (let i = 0; i < siblings.length; i++) {\n    const sibling = siblings[i];\n    if (sibling === element) {\n      const tagName = element.tagName.toLowerCase();\n      const parent = element.parentElement;\n      if (parent) {\n        const parentXPath = getElementXPath(parent);\n        return `${parentXPath}/${tagName}[${ix + 1}]`;\n      }\n      return `/${tagName}[${ix + 1}]`;\n    }\n    if (\n      sibling.nodeType === 1 &&\n      (sibling as Element).tagName === element.tagName\n    ) {\n      ix++;\n    }\n  }\n\n  throw new Error(\"Unable to generate XPath for element\");\n}\n\n/**\n * Get element by XPath\n */\nexport function getElementByXPath(xpath: string): Element | null {\n  try {\n    const result = document.evaluate(\n      xpath,\n      document,\n      null,\n      XPathResult.FIRST_ORDERED_NODE_TYPE,\n      null\n    );\n    return result.singleNodeValue as Element;\n  } catch (error) {\n    console.warn(\"Failed to resolve XPath:\", xpath, error);\n    return null;\n  }\n}\n\n/**\n * Generate a more robust CSS selector for fallback\n */\nexport function getElementSelector(element: Element): string {\n  if (element.id) {\n    return `#${element.id}`;\n  }\n\n  let selector = element.tagName.toLowerCase();\n\n  if (element.className) {\n    const classes = Array.from(element.classList)\n      .filter((cls) => !cls.startsWith(\"uicm-\")) // Exclude our SDK classes\n      .slice(0, 3) // Limit to first 3 classes\n      .join(\".\");\n    if (classes) {\n      selector += `.${classes}`;\n    }\n  }\n\n  // Add nth-child if needed for uniqueness\n  const parent = element.parentElement;\n  if (parent) {\n    const siblings = Array.from(parent.children).filter(\n      (child) => child.tagName === element.tagName\n    );\n    if (siblings.length > 1) {\n      const index = siblings.indexOf(element) + 1;\n      selector += `:nth-of-type(${index})`;\n    }\n  }\n\n  return selector;\n}\n\n/**\n * Validate if an element still exists and is visible\n */\nexport function isElementValid(element: Element): boolean {\n  const htmlElement = element as HTMLElement;\n  return (\n    element.isConnected &&\n    htmlElement.offsetParent !== null &&\n    getComputedStyle(element).display !== \"none\" &&\n    getComputedStyle(element).visibility !== \"hidden\"\n  );\n}\n","import {\n  Comment,\n  CommentMode,\n  CommentManagerConfig,\n  CommentStatus,\n  User,\n  CommentAttachment,\n} from \"../types\";\nimport { CommentBubble } from \"../components/CommentBubble\";\nimport { CommentForm } from \"../components/CommentForm\";\nimport { DebugIcon } from \"../components/DebugIcon\";\nimport {\n  debounce,\n  generateId,\n  getCommentPositionFromClick,\n  getXPath,\n} from \"../utils/dom\";\nimport {\n  addMobileCSS,\n  isMobileDevice,\n  isTouchDevice,\n  removeMobileCSS,\n  TouchGestureRecognizer,\n} from \"../utils/mobile\";\nimport {\n  EventBatcher,\n  LRUCache,\n  rafThrottle,\n  throttle,\n  VisibilityObserver,\n} from \"../utils/performance\";\nimport {\n  getElementByXPath,\n  getElementXPath,\n  isElementValid,\n} from \"../utils/xpath\";\n\nexport class CommentManager {\n  private config: CommentManagerConfig;\n  private comments: Comment[] = [];\n  private commentBubbles: Map<string, CommentBubble> = new Map();\n  private activeForm: CommentForm | null = null;\n  private activeModal: any | null = null; // For comment modals\n  private activeOverlay: HTMLElement | null = null; // For event blocking\n  private mode: CommentMode = \"normal\";\n  private root: HTMLElement;\n  private mutationTimeout: number | undefined = undefined;\n  private escKeyHandler: ((e: KeyboardEvent) => void) | null = null;\n\n  // Performance optimizations\n  private visibilityObserver: VisibilityObserver;\n  private eventBatcher: EventBatcher;\n  private positionCache: LRUCache<string, { x: number; y: number }>;\n  private throttledUpdatePositions = throttle(() => {\n    this.updateBubblePositions();\n  }, 100);\n  private rafUpdatePositions = rafThrottle(() => {\n    this.updateBubblePositions();\n  });\n\n  // Mobile support\n  private isMobile: boolean;\n  private touchGestureRecognizer: TouchGestureRecognizer | null = null;\n\n  private debouncedUpdatePositions = debounce(() => {\n    this.updateBubblePositions();\n  }, 100);\n\n  constructor(config: CommentManagerConfig, root: HTMLElement) {\n    this.config = config;\n    this.root = root;\n\n    // Initialize performance optimizations\n    this.visibilityObserver = new VisibilityObserver({\n      threshold: 0.1,\n      rootMargin: \"50px\",\n    });\n    this.eventBatcher = new EventBatcher();\n    this.positionCache = new LRUCache(50);\n\n    // Initialize mobile support\n    this.isMobile = isMobileDevice();\n    if (this.isMobile) {\n      addMobileCSS();\n    }\n\n    this.attachEventListeners();\n  }\n\n  private attachEventListeners(): void {\n    // ESC key handler to exit comment mode and close components\n    this.escKeyHandler = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        console.log(\"🔑 ESC pressed\");\n\n        // If modal or form is active, close them first\n        if (this.activeModal || this.activeForm) {\n          this.closeActiveComponents();\n          e.preventDefault();\n          e.stopPropagation();\n        }\n        // If in comment mode with no active components, exit comment mode\n        else if (this.mode === \"comment\") {\n          this.setMode(\"normal\");\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", this.escKeyHandler);\n\n    // Throttle scroll for better performance - only when in comment mode\n    const handleScroll = throttle(() => {\n      // Only update if we have bubbles and are in comment mode\n      if (this.commentBubbles.size > 0 && this.mode === \"comment\") {\n        this.updateBubblePositions();\n      }\n    }, 16); // ~60fps\n\n    const handleResize = debounce(() => {\n      // Only update if we have bubbles and are in comment mode\n      if (this.commentBubbles.size > 0 && this.mode === \"comment\") {\n        // Clear cache on resize\n        this.positionCache.clear();\n        this.updateBubblePositions();\n      }\n    }, 100);\n\n    window.addEventListener(\"scroll\", handleScroll, {\n      passive: true,\n    });\n    window.addEventListener(\"resize\", handleResize);\n\n    // Also listen for orientation change on mobile\n    window.addEventListener(\"orientationchange\", () => {\n      // Only update if we have bubbles and are in comment mode\n      if (this.commentBubbles.size > 0 && this.mode === \"comment\") {\n        // Clear cache on orientation change\n        this.positionCache.clear();\n        // Add delay for orientation change to complete\n        setTimeout(() => {\n          this.updateBubblePositions();\n        }, 100);\n      }\n    });\n\n    // Listen for DOM changes that might affect element positions\n    if (typeof MutationObserver !== \"undefined\") {\n      const observer = new MutationObserver((mutations) => {\n        // Skip if no bubbles to update or not in comment mode\n        if (this.commentBubbles.size === 0 || this.mode !== \"comment\") {\n          return;\n        }\n\n        let shouldUpdate = false;\n\n        // Filter out SDK-related mutations to avoid infinite loops\n        for (const mutation of mutations) {\n          const target = mutation.target as Element;\n\n          // Skip if mutation is on SDK elements\n          if (\n            target.closest(\"[data-uicm-element]\") ||\n            target.classList?.contains(\"uicm-highlight\") ||\n            target.id?.startsWith(\"uicm-\")\n          ) {\n            continue;\n          }\n\n          // Only update for meaningful changes\n          if (\n            mutation.type === \"childList\" ||\n            (mutation.type === \"attributes\" &&\n              [\"style\", \"class\"].indexOf(mutation.attributeName!) !== -1)\n          ) {\n            shouldUpdate = true;\n            break;\n          }\n        }\n\n        if (shouldUpdate) {\n          // Debounce DOM mutation updates\n          clearTimeout(this.mutationTimeout);\n          this.mutationTimeout = setTimeout(() => {\n            this.updateBubblePositions();\n          }, 100); // Increased debounce time\n        }\n      });\n\n      observer.observe(document.body, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        attributeFilter: [\"style\", \"class\"],\n      });\n    }\n\n    // Add event listeners\n    document.addEventListener(\"click\", this.handleElementClick);\n    document.addEventListener(\"mouseenter\", this.handleElementMouseEnter, true);\n    document.addEventListener(\"mouseleave\", this.handleElementMouseLeave, true);\n\n    // Add touch gesture support for mobile\n    if (this.isMobile && isTouchDevice()) {\n      this.touchGestureRecognizer = new TouchGestureRecognizer(document.body, {\n        onTap: (event) => {\n          if (this.mode === \"comment\") {\n            // Convert touch event to mouse event-like object\n            const mouseEvent = new MouseEvent(\"click\", {\n              clientX: event.x,\n              clientY: event.y,\n              bubbles: true,\n              cancelable: true,\n            });\n            Object.defineProperty(mouseEvent, \"target\", {\n              value: event.target,\n              writable: false,\n            });\n            this.handleElementClick(mouseEvent);\n          }\n        },\n        onLongPress: (event) => {\n          if (this.mode === \"normal\") {\n            // Enable comment mode on long press\n            this.setMode(\"comment\");\n          }\n        },\n      });\n    }\n\n    // Initial position update only if needed\n    setTimeout(() => {\n      if (this.commentBubbles.size > 0) {\n        this.forceUpdateBubblePositions();\n      }\n    }, 100);\n  }\n\n  private handleElementClick = (e: Event): void => {\n    console.log(\"🔍 handleElementClick called\", {\n      mode: this.mode,\n      target: e.target,\n      currentTarget: e.currentTarget,\n      targetElement: (e.target as HTMLElement)?.tagName,\n      targetClass: (e.target as HTMLElement)?.className,\n    });\n\n    if (this.mode !== \"comment\") {\n      console.log(\"❌ Not in comment mode, ignoring click\");\n      return;\n    }\n\n    // Check if we're navigating from sidebar (prevent form opening)\n    if ((window as any).uicmIsNavigatingFromSidebar) {\n      console.log(\"🔒 Navigating from sidebar, preventing form opening\");\n      return;\n    }\n\n    const mouseEvent = e as MouseEvent;\n    const clickTarget = e.target as HTMLElement;\n\n    // Check if click is on a comment bubble - let bubble handle it\n    if (\n      clickTarget.classList.contains(\"uicm-comment-bubble\") ||\n      clickTarget.closest(\".uicm-comment-bubble\")\n    ) {\n      console.log(\"🔵 Click on bubble, letting bubble handle it\");\n      return;\n    }\n\n    // Check if click is inside form layer or any SDK element\n    const formLayer = document.querySelector(\".uicm-comment-form\");\n    if (formLayer && formLayer.contains(clickTarget)) {\n      console.log(\"❌ Click inside form layer, ignoring\");\n      return;\n    }\n\n    console.log(\"🎯 Processing element click for new comment...\");\n\n    // Temporarily hide all SDK elements\n    const sdkElements = document.querySelectorAll(\"[data-uicm-element]\");\n    const originalDisplay: string[] = [];\n    sdkElements.forEach((el, index) => {\n      const htmlEl = el as HTMLElement;\n      originalDisplay[index] = htmlEl.style.display;\n      htmlEl.style.display = \"none\";\n    });\n\n    // Get the actual element under the click point\n    const target = document.elementFromPoint(\n      mouseEvent.clientX,\n      mouseEvent.clientY\n    ) as Element;\n\n    // Restore SDK elements\n    sdkElements.forEach((el, index) => {\n      const htmlEl = el as HTMLElement;\n      htmlEl.style.display = originalDisplay[index];\n    });\n\n    console.log(\"🎯 Click target:\", {\n      element: target,\n      tagName: target?.tagName,\n      id: target?.id,\n      className: target?.className,\n      xpath: target ? getElementXPath(target) : null,\n    });\n\n    // Ignore if no target found or if it's an SDK element\n    if (!target || target.closest(\"[data-uicm-element]\")) {\n      console.log(\"❌ Invalid target or SDK element, ignoring\");\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { position, relativePosition } = getCommentPositionFromClick(target, {\n      clientX: mouseEvent.clientX,\n      clientY: mouseEvent.clientY,\n    });\n\n    this.showCommentForm(target, position, relativePosition);\n  };\n\n  private handleElementMouseEnter = (e: MouseEvent): void => {\n    // Only process highlights in comment mode\n    if (this.mode !== \"comment\") {\n      return;\n    }\n\n    const target = e.target as HTMLElement;\n    if (target.hasAttribute(\"data-uicm-element\")) return;\n\n    const highlightLayer = document.getElementById(\"uicm-highlight-layer\");\n    if (!highlightLayer) return;\n\n    const rect = target.getBoundingClientRect();\n    const highlight = document.createElement(\"div\");\n    highlight.className = \"uicm-highlight\";\n    highlight.style.position = \"absolute\";\n    highlight.style.top = `${rect.top}px`;\n    highlight.style.left = `${rect.left}px`;\n    highlight.style.width = `${rect.width}px`;\n    highlight.style.height = `${rect.height}px`;\n    // highlight.style.border = \"2px solid rgba(255, 0, 0, 0.5)\";\n    // highlight.style.backgroundColor = \"rgba(255, 0, 0, 0.1)\";\n    highlight.style.pointerEvents = \"none\";\n\n    highlightLayer.appendChild(highlight);\n\n    // Store the highlight element for removal\n    target.dataset.uicmHighlight = highlight.id = generateId();\n  };\n\n  private handleElementMouseLeave = (e: MouseEvent): void => {\n    // Only process highlights in comment mode\n    if (this.mode !== \"comment\") {\n      return;\n    }\n\n    const target = e.target as HTMLElement;\n    if (target.hasAttribute(\"data-uicm-element\")) return;\n\n    const highlightId = target.dataset.uicmHighlight;\n    if (highlightId) {\n      const highlight = document.getElementById(highlightId);\n      if (highlight) {\n        highlight.remove();\n      }\n      delete target.dataset.uicmHighlight;\n    }\n  };\n\n  private handleCommentSubmit = async (\n    content: string,\n    element: Element,\n    position: { x: number; y: number },\n    userName?: string\n  ) => {\n    if (!element || !content.trim()) return;\n\n    const xpath = getXPath(element);\n    if (!xpath) return;\n\n    // Create user object with updated name if provided\n    const user = userName\n      ? { ...this.config.currentUser, name: userName }\n      : this.config.currentUser;\n\n    // Create new comment\n    const comment: Comment = {\n      id: generateId(),\n      content: content.trim(),\n      xpath,\n      url: this.getCurrentUrl(),\n      position,\n      relativePosition: { x: 0, y: 0 }, // Calculate relative position if needed\n      createdAt: new Date().toISOString(),\n      createdBy: user,\n      role: user.role || \"other\", // Add role from user\n      replies: [],\n      status: CommentStatus.BUG, // Replies start as BUG\n    };\n\n    // Add comment to list\n    this.comments.push(comment);\n\n    // Create bubble for the comment\n    this.createCommentBubble(comment);\n\n    // Close the form\n    this.closeActiveComponents();\n\n    // Save to backend if configured\n    if (this.config.onSaveComment) {\n      try {\n        const savedComment = await this.config.onSaveComment(comment);\n        // Update local comment with saved data\n        Object.assign(comment, savedComment);\n      } catch (error) {\n        console.error(\"Failed to save comment:\", error);\n      }\n    }\n  };\n\n  private closeActiveComponents(): void {\n    // Close active form\n    if (this.activeForm) {\n      const formElement = this.activeForm.getElement();\n      if (formElement && formElement.parentNode) {\n        formElement.parentNode.removeChild(formElement);\n      }\n      this.activeForm = null;\n    }\n\n    // Close active modal\n    if (this.activeModal) {\n      this.activeModal.destroy();\n      this.activeModal = null;\n    }\n\n    // Remove overlay\n    this.removeOverlay();\n  }\n\n  private createOverlay(): HTMLElement {\n    // Remove existing overlay first\n    this.removeOverlay();\n\n    const overlay = document.createElement(\"div\");\n    overlay.className = \"uicm-overlay\";\n    overlay.style.position = \"fixed\";\n    overlay.style.top = \"0\";\n    overlay.style.left = \"0\";\n    overlay.style.width = \"100vw\";\n    overlay.style.height = \"100vh\";\n    overlay.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n    overlay.style.zIndex = \"999997\"; // Below interaction layer but above page content\n    overlay.style.cursor = \"pointer\";\n\n    // Close on overlay click (only if click target is overlay itself)\n    overlay.addEventListener(\"click\", (e) => {\n      // Only close if the click target is the overlay itself (not modal/form inside)\n      if (e.target === overlay) {\n        e.stopPropagation();\n        console.log(\"🔒 Overlay direct click, closing active components\");\n        this.closeActiveComponents();\n      }\n    });\n\n    // Add global document click listener for outside clicks\n    const globalClickHandler = (e: Event) => {\n      // Check if click is outside modal/form\n      const target = e.target as Node;\n      const isInsideModal =\n        target &&\n        this.activeModal &&\n        this.activeModal.getElement &&\n        this.activeModal.getElement().contains(target);\n      const isInsideForm =\n        target &&\n        this.activeForm &&\n        this.activeForm.getElement().contains(target);\n\n      // If not inside modal or form, close components\n      if (!isInsideModal && !isInsideForm) {\n        console.log(\n          \"🔒 Global click outside modal/form, closing active components\"\n        );\n        this.closeActiveComponents();\n        document.removeEventListener(\"click\", globalClickHandler);\n      }\n    };\n\n    // Add global click listener with slight delay to avoid immediate closure\n    setTimeout(() => {\n      document.addEventListener(\"click\", globalClickHandler);\n    }, 100);\n\n    // Add to root\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    if (interactionLayer) {\n      interactionLayer.appendChild(overlay);\n    }\n\n    this.activeOverlay = overlay;\n    console.log(\"✅ Overlay created with global click handler\");\n    return overlay;\n  }\n\n  private removeOverlay(): void {\n    if (this.activeOverlay) {\n      if (this.activeOverlay.parentNode) {\n        this.activeOverlay.parentNode.removeChild(this.activeOverlay);\n      }\n      this.activeOverlay = null;\n      console.log(\"✅ Overlay removed\");\n    }\n  }\n\n  public showModal(modal: any): void {\n    console.log(\"🔄 CommentManager: Showing modal\");\n\n    // Close any existing components\n    this.closeActiveComponents();\n\n    // Create overlay for event blocking\n    this.createOverlay();\n\n    // Set active modal\n    this.activeModal = modal;\n\n    console.log(\"✅ Modal shown with overlay\");\n  }\n\n  private showCommentForm(\n    element: Element,\n    position: { x: number; y: number },\n    relativePosition: { x: number; y: number }\n  ): void {\n    // Close any existing components first\n    this.closeActiveComponents();\n\n    // Create overlay for event blocking\n    this.createOverlay();\n\n    // Use requestAnimationFrame to avoid blocking the UI\n    requestAnimationFrame(() => {\n      const form = new CommentForm({\n        onSubmit: async (\n          content: string,\n          userName?: string,\n          attachments?: CommentAttachment[]\n        ) => {\n          // Calculate more accurate relative position\n          const rect = element.getBoundingClientRect();\n\n          // Calculate relative position based on click position within element\n          // Note: position parameter is already in viewport coordinates\n          const relativeX = Math.max(\n            0,\n            Math.min(1, (position.x - rect.left) / rect.width)\n          );\n          const relativeY = Math.max(\n            0,\n            Math.min(1, (position.y - rect.top) / rect.height)\n          );\n\n          // Create user object with updated name if provided\n          const user = userName\n            ? { ...this.config.currentUser, name: userName }\n            : this.config.currentUser;\n\n          const commentData = {\n            content,\n            xpath: getXPath(element) || \"\",\n            url: this.getCurrentUrl(),\n            position: {\n              x: rect.left + rect.width * relativeX,\n              y: rect.top + rect.height * relativeY,\n            },\n            relativePosition: { x: relativeX, y: relativeY },\n            createdBy: user,\n            role: user.role || \"other\", // Add role from user\n            status: CommentStatus.BUG, // New comments start as BUG\n            replies: [] as Comment[],\n            attachments: attachments || [], // Add attachments to new comment\n          };\n\n          const newComment = await this.config.onSaveComment(commentData);\n          this.comments.push(newComment);\n          this.createCommentBubble(newComment);\n          this.closeActiveComponents();\n        },\n        onCancel: () => this.closeActiveComponents(),\n        position,\n        element,\n        currentUser: this.config.currentUser,\n      });\n\n      const interactionLayer = document.getElementById(\n        \"uicm-interaction-layer\"\n      );\n      if (interactionLayer) {\n        interactionLayer.appendChild(form.getElement());\n        // Reposition form to ensure it stays within viewport\n        form.reposition();\n      }\n\n      this.activeForm = form;\n      console.log(\"✅ Comment form shown with overlay\");\n    });\n  }\n\n  private hideCommentForm(): void {\n    if (this.activeForm) {\n      this.activeForm.destroy();\n      this.activeForm = null;\n    }\n  }\n\n  private addBubbleToLayer(bubble: CommentBubble): void {\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    if (!interactionLayer) {\n      console.error(\"❌ Interaction layer not found\");\n      return;\n    }\n\n    interactionLayer.appendChild(bubble.getElement());\n    console.log(\"✅ Bubble added to interaction layer\");\n  }\n\n  private async createComment(\n    element: Element,\n    content: string,\n    position: { x: number; y: number },\n    relativePosition: { x: number; y: number }\n  ): Promise<void> {\n    const xpath = getXPath(element);\n    if (!xpath) return;\n\n    const commentData = {\n      content: content.trim(),\n      xpath,\n      url: this.getCurrentUrl(),\n      position,\n      relativePosition,\n      createdBy: this.config.currentUser,\n      role: this.config.currentUser.role || \"other\", // Add role from current user\n      status: CommentStatus.BUG, // New comments start as BUG\n      replies: [] as Comment[],\n    };\n\n    try {\n      const newComment = await this.config.onSaveComment(commentData);\n      this.comments.push(newComment);\n      this.createCommentBubble(newComment);\n    } catch (error) {\n      console.error(\"Failed to create comment:\", error);\n    }\n  }\n\n  private createCommentBubble(comment: Comment): void {\n    const element = getElementByXPath(comment.xpath);\n    if (!element || !isElementValid(element)) {\n      console.warn(\"Element not found for comment:\", comment.xpath);\n      return;\n    }\n\n    // Calculate current viewport position from element and relative position\n    const rect = element.getBoundingClientRect();\n\n    const absoluteX = rect.left + rect.width * comment.relativePosition.x;\n    const absoluteY = rect.top + rect.height * comment.relativePosition.y;\n\n    const bubble = new CommentBubble({\n      comment,\n      position: { x: absoluteX, y: absoluteY },\n      currentUser: this.config.currentUser,\n      onReply: (\n        commentId: string,\n        content: string,\n        user?: User,\n        attachments?: CommentAttachment[]\n      ) => this.addReply(commentId, content, user, attachments),\n      onResolve: (commentId: string) => this.resolveComment(commentId),\n      onDelete: (commentId: string) => this.deleteComment(commentId),\n      onShowModal: (modal: any) => this.showModal(modal), // Pass callback for centralized modal management\n      onStatusChange: (commentId: string, status: CommentStatus) =>\n        this.changeCommentStatus(commentId, status),\n    });\n\n    this.addBubbleToLayer(bubble);\n    this.commentBubbles.set(comment.id, bubble);\n\n    // Add to visibility observer for performance\n    this.visibilityObserver.observe(\n      bubble.getElement(),\n      (isVisible: boolean) => {\n        // Bubble visibility changed\n      }\n    );\n\n    // Cache the position\n    this.positionCache.set(comment.id, { x: absoluteX, y: absoluteY });\n  }\n\n  private async addReply(\n    commentId: string,\n    content: string,\n    user?: User,\n    attachments?: CommentAttachment[]\n  ): Promise<void> {\n    const comment = this.comments.find((c) => c.id === commentId);\n    if (!comment) return;\n\n    // Use provided user or fallback to current user\n    const replyUser = user || this.config.currentUser;\n\n    const reply: Comment = {\n      id: generateId(),\n      content,\n      xpath: comment.xpath,\n      url: comment.url,\n      position: comment.position,\n      relativePosition: comment.relativePosition,\n      createdAt: new Date().toISOString(),\n      createdBy: replyUser,\n      role: replyUser.role || \"other\", // Add role from reply user\n      replies: [],\n      status: CommentStatus.BUG, // Replies start as BUG\n      attachments: attachments || [], // Add attachments to reply\n    };\n\n    comment.replies.push(reply);\n\n    // Update comment via API if configured\n    if (this.config.onUpdateComment) {\n      await this.config.onUpdateComment(comment);\n    }\n\n    // Update bubble\n    const bubble = this.commentBubbles.get(commentId);\n    if (bubble) {\n      bubble.updateComment(comment);\n    }\n  }\n\n  private async resolveComment(commentId: string): Promise<void> {\n    const comment = this.comments.find((c) => c.id === commentId);\n    if (!comment) return;\n\n    comment.status = CommentStatus.DONE;\n    comment.resolvedAt = new Date().toISOString();\n\n    // Update comment via API if configured\n    if (this.config.onUpdateComment) {\n      await this.config.onUpdateComment(comment);\n    }\n\n    // Update bubble\n    const bubble = this.commentBubbles.get(commentId);\n    if (bubble) {\n      bubble.updateComment(comment);\n    }\n  }\n\n  private async changeCommentStatus(\n    commentId: string,\n    status: CommentStatus\n  ): Promise<void> {\n    const comment = this.comments.find((c) => c.id === commentId);\n    if (!comment) return;\n\n    const previousStatus = comment.status;\n    comment.status = status;\n\n    // Update timestamps based on status\n    if (\n      status === CommentStatus.DONE &&\n      previousStatus !== CommentStatus.DONE\n    ) {\n      comment.resolvedAt = new Date().toISOString();\n    } else if (\n      status === CommentStatus.ARCHIVED &&\n      previousStatus !== CommentStatus.ARCHIVED\n    ) {\n      comment.archivedAt = new Date().toISOString();\n    }\n\n    console.log(\"📝 Comment status changed:\", {\n      commentId,\n      previousStatus,\n      newStatus: status,\n      timestamp: new Date().toISOString(),\n    });\n\n    // Update comment via API if configured\n    if (this.config.onUpdateComment) {\n      await this.config.onUpdateComment(comment);\n    }\n\n    // Update bubble\n    const bubble = this.commentBubbles.get(commentId);\n    if (bubble) {\n      bubble.updateComment(comment);\n    }\n\n    // Emit status change event\n    // this.emit(\"comment-updated\", { comment });\n  }\n\n  private async deleteComment(commentId: string): Promise<void> {\n    const comment = this.comments.find((c) => c.id === commentId);\n    if (!comment) return;\n\n    // Update resolved status\n    comment.status = CommentStatus.ARCHIVED;\n\n    if (this.config.onDeleteComment) {\n      try {\n        await this.config.onDeleteComment(commentId);\n      } catch (error) {\n        console.error(\"Failed to delete comment:\", error);\n        return;\n      }\n    }\n\n    // Remove from local array\n    this.comments = this.comments.filter((c) => c.id !== commentId);\n\n    // Remove bubble\n    const bubble = this.commentBubbles.get(commentId);\n    if (bubble) {\n      bubble.destroy();\n      this.commentBubbles.delete(commentId);\n    }\n  }\n\n  private updateBubblePositions(): void {\n    // Only update if we have bubbles AND are in comment mode\n    if (this.commentBubbles.size === 0) {\n      return;\n    }\n\n    // In normal mode, bubbles should be static - no need to update positions\n    if (this.mode === \"normal\") {\n      return;\n    }\n\n    console.log(\n      \"🔄 Updating bubble positions, total bubbles:\",\n      this.commentBubbles.size,\n      \"mode:\",\n      this.mode\n    );\n\n    this.commentBubbles.forEach((bubble, commentId) => {\n      const comment = this.comments.find((c) => c.id === commentId);\n      if (!comment) {\n        console.warn(\"❌ Comment not found for bubble:\", commentId);\n        return;\n      }\n\n      // Hide archived bubbles\n      if (comment.status === CommentStatus.ARCHIVED) {\n        bubble.getElement().style.display = \"none\";\n        console.log(\"📦 Hiding archived bubble:\", commentId);\n        return;\n      }\n\n      const element = getElementByXPath(comment.xpath);\n      if (!element || !isElementValid(element)) {\n        // Element not found, hide bubble\n        console.log(\"❌ Element not found, hiding bubble:\", comment.xpath);\n        bubble.getElement().style.display = \"none\";\n        return;\n      }\n\n      // Show bubble if it was hidden (and not archived)\n      bubble.getElement().style.display = \"flex\";\n\n      // Get current element position\n      const rect = element.getBoundingClientRect();\n\n      // Calculate viewport position from relative position\n      // Note: Root container uses position:fixed, so we need viewport coordinates, not document coordinates\n      const absoluteX = rect.left + rect.width * comment.relativePosition.x;\n      const absoluteY = rect.top + rect.height * comment.relativePosition.y;\n\n      console.log(\"📍 Updating bubble position:\", {\n        commentId,\n        xpath: comment.xpath,\n        elementRect: {\n          left: rect.left,\n          top: rect.top,\n          width: rect.width,\n          height: rect.height,\n        },\n        relativePosition: comment.relativePosition,\n        newPosition: { x: absoluteX, y: absoluteY },\n        status: comment.status,\n      });\n\n      // Update bubble position\n      bubble.updatePosition({ x: absoluteX, y: absoluteY });\n\n      // Update cache\n      this.positionCache.set(commentId, { x: absoluteX, y: absoluteY });\n    });\n  }\n\n  private forceUpdateBubblePositions(): void {\n    // Force update positions regardless of mode - used for initial load and new comments\n    if (this.commentBubbles.size === 0) {\n      return;\n    }\n\n    console.log(\n      \"🔄 Force updating bubble positions:\",\n      this.commentBubbles.size\n    );\n\n    this.commentBubbles.forEach((bubble, commentId) => {\n      const comment = this.comments.find((c) => c.id === commentId);\n      if (!comment) {\n        console.warn(\"❌ Comment not found for bubble:\", commentId);\n        return;\n      }\n\n      const element = getElementByXPath(comment.xpath);\n      if (!element || !isElementValid(element)) {\n        // Element not found, hide bubble\n        bubble.getElement().style.display = \"none\";\n        return;\n      }\n\n      // Show bubble if it was hidden\n      bubble.getElement().style.display = \"flex\";\n\n      // Get current element position\n      const rect = element.getBoundingClientRect();\n\n      // Calculate viewport position from relative position\n      const absoluteX = rect.left + rect.width * comment.relativePosition.x;\n      const absoluteY = rect.top + rect.height * comment.relativePosition.y;\n\n      // Update bubble position\n      bubble.updatePosition({ x: absoluteX, y: absoluteY });\n\n      // Update cache\n      this.positionCache.set(commentId, { x: absoluteX, y: absoluteY });\n    });\n  }\n\n  private getCurrentUrl(): string {\n    return window.location.href;\n  }\n\n  public async loadComments(): Promise<void> {\n    try {\n      const allComments = await this.config.onLoadComments();\n      const currentUrl = this.getCurrentUrl();\n\n      // Filter comments to only show those from the current URL\n      this.comments = allComments.filter(\n        (comment) => comment.url === currentUrl\n      );\n\n      // Create bubbles for all comments\n      this.comments.forEach((comment) => {\n        this.createCommentBubble(comment);\n      });\n\n      // Force update positions after loading comments\n      if (this.comments.length > 0) {\n        setTimeout(() => {\n          this.forceUpdateBubblePositions();\n        }, 100);\n      }\n    } catch (error) {\n      console.error(\"Failed to load comments:\", error);\n    }\n  }\n\n  private updateLayerVisibility(): void {\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    const highlightLayer = document.getElementById(\"uicm-highlight-layer\");\n\n    if (this.mode === \"comment\") {\n      // Show layers\n      if (interactionLayer) {\n        interactionLayer.style.display = \"block\";\n\n        // Update visibility of individual bubbles based on status\n        this.commentBubbles.forEach((bubble, commentId) => {\n          const comment = this.comments.find((c) => c.id === commentId);\n          if (comment && comment.status === CommentStatus.ARCHIVED) {\n            bubble.getElement().style.display = \"none\";\n          } else {\n            bubble.getElement().style.display = \"flex\";\n          }\n        });\n      }\n      if (highlightLayer) {\n        highlightLayer.style.display = \"block\";\n      }\n\n      // Force position update with slight delay\n      setTimeout(() => {\n        this.forceUpdateBubblePositions();\n      }, 50);\n    } else {\n      // Hide layers completely in normal mode\n      if (interactionLayer) {\n        interactionLayer.style.display = \"none\";\n      }\n      if (highlightLayer) {\n        highlightLayer.style.display = \"none\";\n      }\n    }\n  }\n\n  public setMode(mode: CommentMode): void {\n    this.mode = mode;\n    this.updateLayerVisibility();\n\n    // Force update bubble positions when switching to comment mode\n    if (mode === \"comment\" && this.commentBubbles.size > 0) {\n      console.log(\"🔄 Switching to comment mode, updating bubble positions\");\n\n      // Update positions immediately (synchronous)\n      this.forceUpdateBubblePositions();\n\n      // Also update after a short delay to ensure proper positioning\n      setTimeout(() => {\n        this.forceUpdateBubblePositions();\n      }, 100);\n    }\n  }\n\n  public getMode(): CommentMode {\n    return this.mode;\n  }\n\n  public getComments(): Comment[] {\n    return [...this.comments];\n  }\n\n  public getCommentsForElement(element: Element): Comment[] {\n    const xpath = getElementXPath(element);\n    return this.comments.filter((comment) => comment.xpath === xpath);\n  }\n\n  public getCommentBubble(commentId: string): any | null {\n    return this.commentBubbles.get(commentId) || null;\n  }\n\n  public updateCurrentUser(user: User): void {\n    this.config.currentUser = user;\n    console.log(\"🔄 CommentManager: Current user updated:\", user);\n\n    // Refresh all comment bubbles to show updated user names\n    this.refreshAllCommentBubbles();\n  }\n\n  private refreshAllCommentBubbles(): void {\n    // Update all existing bubbles to reflect user name changes\n    this.commentBubbles.forEach((bubble, commentId) => {\n      const comment = this.comments.find((c) => c.id === commentId);\n      if (comment) {\n        bubble.updateComment(comment);\n        bubble.updateUser(this.config.currentUser);\n      }\n    });\n  }\n\n  public highlightElement(element: Element): void {\n    // Remove existing highlights\n    const existingHighlights = this.root.querySelectorAll(\n      \".uicm-element-highlight\"\n    );\n    existingHighlights.forEach((highlight) => highlight.remove());\n\n    // Create new highlight\n    const highlight = document.createElement(\"div\");\n    highlight.className = \"uicm-element-highlight\";\n    highlight.setAttribute(\"data-uicm-element\", \"true\");\n\n    const rect = element.getBoundingClientRect();\n    highlight.style.left = `${rect.left}px`;\n    highlight.style.top = `${rect.top}px`;\n    highlight.style.width = `${rect.width}px`;\n    highlight.style.height = `${rect.height}px`;\n\n    this.root.appendChild(highlight);\n\n    // Auto-remove highlight after 3 seconds\n    setTimeout(() => {\n      if (highlight.parentNode) {\n        highlight.remove();\n      }\n    }, 3000);\n  }\n\n  public testBubbleClicks(): void {\n    console.log(\"🧪 TESTING ALL BUBBLE CLICKS\");\n    console.log(\"Mode:\", this.mode);\n    console.log(\"Bubble count:\", this.commentBubbles.size);\n\n    const interactionLayer = document.getElementById(\"uicm-interaction-layer\");\n    console.log(\"Interaction layer:\", {\n      found: !!interactionLayer,\n      display: interactionLayer?.style.display,\n      computedDisplay: interactionLayer\n        ? getComputedStyle(interactionLayer).display\n        : null,\n      children: interactionLayer?.children.length,\n    });\n\n    this.commentBubbles.forEach((bubble, commentId) => {\n      console.log(`🔍 Testing bubble ${commentId}:`);\n      bubble.testClickability();\n    });\n  }\n\n  public destroy(): void {\n    // Clean up active components and overlay\n    this.closeActiveComponents();\n\n    // Remove event listeners\n    window.removeEventListener(\"scroll\", this.rafUpdatePositions);\n    window.removeEventListener(\"resize\", this.throttledUpdatePositions);\n    document.removeEventListener(\"click\", this.handleElementClick);\n    document.removeEventListener(\n      \"mouseenter\",\n      this.handleElementMouseEnter,\n      true\n    );\n    document.removeEventListener(\n      \"mouseleave\",\n      this.handleElementMouseLeave,\n      true\n    );\n    if (this.escKeyHandler) {\n      document.removeEventListener(\"keydown\", this.escKeyHandler);\n    }\n\n    // Clean up performance optimizations\n    this.visibilityObserver.disconnect();\n    this.positionCache.clear();\n\n    // Clean up mobile support\n    if (this.touchGestureRecognizer) {\n      this.touchGestureRecognizer.destroy();\n    }\n    if (this.isMobile) {\n      removeMobileCSS();\n    }\n\n    // Clean up all bubbles\n    this.commentBubbles.forEach((bubble) => bubble.destroy());\n    this.commentBubbles.clear();\n\n    console.log(\"CommentManager destroyed\");\n  }\n}\n","import { CommentSidebar } from \"../components/CommentSidebar\";\nimport { DebugIcon } from \"../components/DebugIcon\";\nimport { SettingsButton } from \"../components/SettingsButton\";\nimport { SidebarButton } from \"../components/SidebarButton\";\nimport {\n  Comment,\n  CommentManagerConfig,\n  CommentSDKConfig,\n  User,\n} from \"../types\";\nimport { ensureSDKRoot } from \"../utils/dom\";\nimport { userProfileStorage } from \"../utils/userProfileStorage\";\nimport { CommentManager } from \"./CommentManager\";\n\nexport class CommentSDK {\n  private config: CommentSDKConfig;\n  private commentManager!: CommentManager;\n  private debugIcon!: DebugIcon;\n  private settingsButton!: SettingsButton;\n  private sidebarButton!: SidebarButton;\n  private sidebar: CommentSidebar | null = null;\n  private root!: HTMLElement;\n  private isInitialized: boolean = false;\n  private comments: Comment[] = [];\n  private currentUser: User;\n\n  constructor(config: CommentSDKConfig) {\n    this.config = {\n      theme: \"light\",\n      ...config,\n    };\n\n    // Load or create default user\n    const savedUser = userProfileStorage.loadUserProfile();\n    this.currentUser = savedUser || {\n      id: \"default-user\",\n      name: \"Anonymous User\",\n      role: \"other\",\n    };\n\n    if (!savedUser) {\n      userProfileStorage.saveUserProfile(this.currentUser);\n    }\n\n    this.validateConfig();\n  }\n\n  private validateConfig(): void {\n    if (!this.config.projectId) {\n      throw new Error(\"CommentSDK: projectId is required\");\n    }\n    if (!this.config.onFetchJsonFile) {\n      throw new Error(\"CommentSDK: onFetchJsonFile function is required\");\n    }\n    if (!this.config.onUpdate) {\n      throw new Error(\"CommentSDK: onUpdate callback is required\");\n    }\n  }\n\n  public async init(): Promise<void> {\n    if (this.isInitialized) {\n      console.warn(\"EasyCommentSDK: Already initialized\");\n      return;\n    }\n\n    try {\n      // Setup DOM\n      this.setupDOM();\n\n      // Load comments from user's fetch function\n      await this.loadCommentsFromUserFunction();\n\n      // Create comment manager config\n      const managerConfig: CommentManagerConfig = {\n        projectId: this.config.projectId,\n        currentUser: this.currentUser,\n        theme: this.config.theme,\n        onLoadComments: async () => this.comments,\n        onSaveComment: async (\n          commentData: Omit<Comment, \"id\" | \"createdAt\">\n        ) => {\n          const newComment: Comment = {\n            ...commentData,\n            id: this.generateId(),\n            createdAt: new Date().toISOString(),\n          };\n          this.comments.push(newComment);\n          await this.saveCommentsToJsonFile();\n          return newComment;\n        },\n        onUpdateComment: async (updatedComment: Comment) => {\n          const index = this.comments.findIndex(\n            (c) => c.id === updatedComment.id\n          );\n          if (index !== -1) {\n            this.comments[index] = updatedComment;\n            await this.saveCommentsToJsonFile();\n          }\n          return updatedComment;\n        },\n        onDeleteComment: async (commentId: string) => {\n          this.comments = this.comments.filter((c) => c.id !== commentId);\n          await this.saveCommentsToJsonFile();\n        },\n      };\n\n      // Initialize comment manager\n      this.commentManager = new CommentManager(managerConfig, this.root);\n\n      // Initialize UI components\n      this.initializeUI();\n\n      // Load comments\n      await this.commentManager.loadComments();\n\n      this.isInitialized = true;\n      console.log(\"CommentSDK: Initialized successfully\");\n    } catch (error) {\n      console.error(\"CommentSDK: Failed to initialize\", error);\n      throw error;\n    }\n  }\n\n  private setupDOM(): void {\n    this.root = ensureSDKRoot();\n    this.root.className = `uicm-theme-${this.config.theme}`;\n  }\n\n  private async loadCommentsFromUserFunction(): Promise<void> {\n    try {\n      const data = await this.config.onFetchJsonFile();\n      this.comments = data.comments || [];\n      console.log(\n        `📂 Loaded ${this.comments.length} comments from user function`\n      );\n    } catch (error) {\n      console.log(\n        `📂 Could not load comments from user function, starting fresh`\n      );\n      this.comments = [];\n    }\n  }\n\n  private async saveCommentsToJsonFile(): Promise<void> {\n    try {\n      const data = {\n        projectId: this.config.projectId,\n        comments: this.comments,\n        lastUpdated: new Date().toISOString(),\n      };\n\n      await this.config.onUpdate(this.comments);\n      console.log(`💾 Saved ${this.comments.length} comments to JSON file`);\n    } catch (error) {\n      console.error(\"Failed to save comments:\", error);\n    }\n  }\n\n  private initializeUI(): void {\n    // Debug icon\n    this.debugIcon = new DebugIcon({\n      isActive: false,\n      onClick: () => this.toggleMode(),\n      theme: this.config.theme!,\n    });\n\n    // Settings button\n    this.settingsButton = new SettingsButton({\n      currentUser: this.currentUser,\n      onUserUpdate: async (updatedUser: User) => {\n        this.currentUser = updatedUser;\n        this.commentManager.updateCurrentUser(updatedUser);\n        userProfileStorage.saveUserProfile(updatedUser);\n\n        // Update sidebar button with new user info\n        this.sidebarButton.updateUser(updatedUser);\n\n        // Refresh sidebar if it's open\n        if (this.sidebar) {\n          this.sidebar.updateComments(this.comments);\n        }\n      },\n      isVisible: false,\n    });\n\n    // Sidebar button\n    this.sidebarButton = new SidebarButton({\n      currentUser: this.currentUser,\n      onClick: () => this.openSidebar(),\n      isVisible: false,\n    });\n\n    // Add to DOM\n    document.body.appendChild(this.debugIcon.getElement());\n    document.body.appendChild(this.settingsButton.getElement());\n    document.body.appendChild(this.sidebarButton.getElement());\n  }\n\n  private toggleMode(): void {\n    const currentMode = this.commentManager.getMode();\n    const newMode = currentMode === \"normal\" ? \"comment\" : \"normal\";\n    this.setMode(newMode);\n  }\n\n  public setMode(mode: \"normal\" | \"comment\"): void {\n    if (!this.isInitialized) {\n      throw new Error(\"CommentSDK: Not initialized. Call init() first.\");\n    }\n\n    this.commentManager.setMode(mode);\n    this.debugIcon.updateState(mode === \"comment\");\n    this.settingsButton.setVisible(mode === \"comment\");\n    this.sidebarButton.setVisible(mode === \"comment\");\n\n    if (mode === \"comment\") {\n      document.body.style.cursor = \"crosshair\";\n    } else {\n      document.body.style.cursor = \"\";\n    }\n  }\n\n  private openSidebar(): void {\n    if (this.sidebar) {\n      this.sidebar.destroy();\n      this.sidebar = null;\n      return;\n    }\n\n    this.sidebar = new CommentSidebar({\n      comments: this.comments,\n      currentUser: this.currentUser,\n      onNavigateToComment: (comment) => this.navigateToComment(comment),\n      onClose: () => {\n        if (this.sidebar) {\n          this.sidebar.destroy();\n          this.sidebar = null;\n        }\n      },\n      onStatusChange: async (commentId, status) => {\n        const comment = this.comments.find((c) => c.id === commentId);\n        if (comment) {\n          comment.status = status;\n          await this.saveCommentsToJsonFile();\n        }\n      },\n    });\n\n    document.body.appendChild(this.sidebar.getElement());\n    this.sidebar.show();\n  }\n\n  private navigateToComment(comment: Comment): void {\n    // Find element by XPath and scroll to it\n    const element = this.findElementByXPath(comment.xpath);\n    if (element) {\n      element.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n      (element as HTMLElement).style.outline = \"2px solid #3b82f6\";\n      (element as HTMLElement).style.outlineOffset = \"2px\";\n      setTimeout(() => {\n        (element as HTMLElement).style.outline = \"\";\n        (element as HTMLElement).style.outlineOffset = \"\";\n      }, 3000);\n    }\n  }\n\n  private findElementByXPath(xpath: string): Element | null {\n    try {\n      const result = document.evaluate(\n        xpath,\n        document,\n        null,\n        XPathResult.FIRST_ORDERED_NODE_TYPE,\n        null\n      );\n      return result.singleNodeValue as Element;\n    } catch {\n      return null;\n    }\n  }\n\n  private generateId(): string {\n    return `comment_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  public destroy(): void {\n    if (this.sidebar) {\n      this.sidebar.destroy();\n    }\n    if (this.commentManager) {\n      this.commentManager.destroy();\n    }\n    this.isInitialized = false;\n  }\n\n  public getComments(): Comment[] {\n    return this.comments;\n  }\n\n  public getCurrentUser(): User {\n    return this.currentUser;\n  }\n}\n\nexport function initCommentSDK(config: CommentSDKConfig): CommentSDK {\n  return new CommentSDK(config);\n}\n","import { Comment } from \"../types\";\n\nexport class CommentStorage {\n  private static readonly STORAGE_KEY = \"uicm-comments\";\n\n  // Load comments from localStorage\n  public static loadComments(): Comment[] {\n    try {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      if (stored) {\n        const data = JSON.parse(stored);\n        return data.comments || [];\n      }\n    } catch (error) {\n      console.error(\"Failed to load comments from storage:\", error);\n    }\n    return [];\n  }\n\n  // Save comments to localStorage\n  public static saveComments(comments: Comment[]): void {\n    try {\n      const data = {\n        comments,\n        lastUpdated: new Date().toISOString(),\n      };\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n    } catch (error) {\n      console.error(\"Failed to save comments to storage:\", error);\n    }\n  }\n\n  // Add a new comment\n  public static addComment(comment: Comment): Comment {\n    const comments = this.loadComments();\n    const newComment = {\n      ...comment,\n      id: this.generateId(),\n      createdAt: new Date().toISOString(),\n    };\n    comments.push(newComment);\n    this.saveComments(comments);\n    return newComment;\n  }\n\n  // Update an existing comment\n  public static updateComment(updatedComment: Comment): Comment {\n    const comments = this.loadComments();\n    const index = comments.findIndex((c) => c.id === updatedComment.id);\n    if (index !== -1) {\n      comments[index] = updatedComment;\n      this.saveComments(comments);\n    }\n    return updatedComment;\n  }\n\n  // Delete a comment\n  public static deleteComment(commentId: string): void {\n    const comments = this.loadComments();\n    const filteredComments = comments.filter((c) => c.id !== commentId);\n    this.saveComments(filteredComments);\n  }\n\n  // Get comments for specific URL\n  public static getCommentsForUrl(url: string): Comment[] {\n    const allComments = this.loadComments();\n    return allComments.filter((comment) => comment.url === url);\n  }\n\n  // Get comments for specific element XPath\n  public static getCommentsForXPath(xpath: string, url: string): Comment[] {\n    const allComments = this.loadComments();\n    return allComments.filter(\n      (comment) => comment.xpath === xpath && comment.url === url\n    );\n  }\n\n  // Clear all comments (for development/testing)\n  public static clearAllComments(): void {\n    localStorage.removeItem(this.STORAGE_KEY);\n  }\n\n  // Export comments to JSON file (for backup)\n  public static exportComments(): string {\n    const comments = this.loadComments();\n    return JSON.stringify(\n      {\n        comments,\n        exportedAt: new Date().toISOString(),\n        version: \"1.0.0\",\n      },\n      null,\n      2\n    );\n  }\n\n  // Import comments from JSON string\n  public static importComments(jsonString: string): void {\n    try {\n      const data = JSON.parse(jsonString);\n      if (data.comments && Array.isArray(data.comments)) {\n        this.saveComments(data.comments);\n      }\n    } catch (error) {\n      console.error(\"Failed to import comments:\", error);\n    }\n  }\n\n  // Generate unique ID\n  private static generateId(): string {\n    return (\n      \"comment_\" + Date.now() + \"_\" + Math.random().toString(36).substr(2, 9)\n    );\n  }\n\n  // Get storage info\n  public static getStorageInfo(): {\n    totalComments: number;\n    storageSize: number;\n    lastUpdated: string | null;\n  } {\n    const comments = this.loadComments();\n    const stored = localStorage.getItem(this.STORAGE_KEY);\n    const storageSize = stored ? new Blob([stored]).size : 0;\n\n    let lastUpdated = null;\n    try {\n      const data = JSON.parse(stored || \"{}\");\n      lastUpdated = data.lastUpdated || null;\n    } catch (error) {\n      // Ignore parse errors\n    }\n\n    return {\n      totalComments: comments.length,\n      storageSize,\n      lastUpdated,\n    };\n  }\n}\n","import { CommentManagerConfig } from \"../types\";\nimport { HybridCommentStorage } from \"../storage/HybridCommentStorage\";\n\n/**\n * Creates a hybrid storage config for demo/development purposes\n * Saves comments to localStorage + exports to JSON file\n */\nexport function createHybridStorageConfig(\n  projectId: string = \"demo-project\"\n): CommentManagerConfig {\n  return {\n    projectId,\n    currentUser: {\n      id: \"user_demo\",\n      name: \"Demo User\",\n      avatar: undefined,\n    },\n    theme: \"light\",\n    onLoadComments: async () => {\n      return await HybridCommentStorage.loadComments();\n    },\n    onSaveComment: async (comment) => {\n      return await HybridCommentStorage.addComment(comment);\n    },\n    onDeleteComment: async (commentId) => {\n      await HybridCommentStorage.deleteComment(commentId);\n    },\n    onUpdateComment: async (updatedComment) => {\n      return await HybridCommentStorage.updateComment(updatedComment);\n    },\n  };\n}\n\n/**\n * Hybrid storage utilities for demo/development\n */\nexport const hybridStorageUtils = {\n  /**\n   * Load all comments from storage and show alert\n   */\n  loadAll: () => {\n    HybridCommentStorage.loadComments().then((comments) => {\n      console.log(\"Loaded comments:\", comments);\n      alert(`Loaded ${comments.length} comments from storage`);\n    });\n  },\n\n  /**\n   * Export comments to JSON file\n   */\n  syncToFile: () => {\n    HybridCommentStorage.syncToFile();\n  },\n\n  /**\n   * Clear all comments from storage\n   */\n  clearAll: () => {\n    HybridCommentStorage.clearAllComments().then(() => {\n      alert(\"All comments cleared!\");\n      location.reload();\n    });\n  },\n\n  /**\n   * Show instructions in console\n   */\n  showInstructions: () => {\n    console.log(\"🔧 Hybrid Storage Instructions:\");\n    console.log(\"- Comments are saved to localStorage + exported to JSON file\");\n    console.log(\"- Use loadAll() to load comments from storage\");\n    console.log(\"- Use syncToFile() to download comments as JSON\");\n    console.log(\"- Use clearAll() to clear all comments\");\n  },\n};\n","export interface LocalStorageUtils {\n  getCommentsData(): any;\n  getAllUICMData(): Record<string, any>;\n  clearCommentsData(): void;\n  exportCommentsData(): string;\n  importCommentsData(data: string): boolean;\n}\n\nexport class LocalStorageManager implements LocalStorageUtils {\n  private commentsKey = \"uicm-comments\";\n  private userProfileKey = \"uicm-user-profile\";\n  private projectKey = \"uicm-demo-project\";\n\n  public getCommentsData(): any {\n    try {\n      const data = localStorage.getItem(this.commentsKey);\n      if (!data) {\n        console.log(\"📭 No comments data found in localStorage\");\n        return null;\n      }\n\n      const parsedData = JSON.parse(data);\n      console.log(\"📂 Comments data loaded from localStorage:\", parsedData);\n      return parsedData;\n    } catch (error) {\n      console.error(\n        \"❌ Failed to load comments data from localStorage:\",\n        error\n      );\n      return null;\n    }\n  }\n\n  public getAllUICMData(): Record<string, any> {\n    const allData: Record<string, any> = {};\n\n    try {\n      // Get all localStorage keys that start with 'uicm-'\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith(\"uicm-\")) {\n          try {\n            const value = localStorage.getItem(key);\n            if (value) {\n              allData[key] = JSON.parse(value);\n            }\n          } catch (error) {\n            console.warn(`⚠️ Failed to parse localStorage key: ${key}`, error);\n            allData[key] = localStorage.getItem(key); // Store as string if JSON parse fails\n          }\n        }\n      }\n\n      console.log(\"📊 All UICM data from localStorage:\", allData);\n      return allData;\n    } catch (error) {\n      console.error(\"❌ Failed to get all UICM data:\", error);\n      return {};\n    }\n  }\n\n  public clearCommentsData(): void {\n    try {\n      localStorage.removeItem(this.commentsKey);\n      console.log(\"🗑️ Comments data cleared from localStorage\");\n    } catch (error) {\n      console.error(\"❌ Failed to clear comments data:\", error);\n    }\n  }\n\n  public exportCommentsData(): string {\n    try {\n      const data = this.getCommentsData();\n      if (!data) {\n        return \"\";\n      }\n\n      const exportData = {\n        timestamp: new Date().toISOString(),\n        data: data,\n        version: \"1.0.0\",\n      };\n\n      const jsonString = JSON.stringify(exportData, null, 2);\n      console.log(\"📤 Comments data exported:\", exportData);\n      return jsonString;\n    } catch (error) {\n      console.error(\"❌ Failed to export comments data:\", error);\n      return \"\";\n    }\n  }\n\n  public importCommentsData(data: string): boolean {\n    try {\n      const parsedData = JSON.parse(data);\n\n      // Handle both direct data and wrapped export format\n      const commentsData = parsedData.data || parsedData;\n\n      localStorage.setItem(this.commentsKey, JSON.stringify(commentsData));\n      console.log(\"📥 Comments data imported to localStorage:\", commentsData);\n      return true;\n    } catch (error) {\n      console.error(\"❌ Failed to import comments data:\", error);\n      return false;\n    }\n  }\n\n  public getProjectData(projectId: string): any {\n    try {\n      const key = `uicm-${projectId}`;\n      const data = localStorage.getItem(key);\n      if (!data) {\n        console.log(`📭 No project data found for: ${projectId}`);\n        return null;\n      }\n\n      const parsedData = JSON.parse(data);\n      console.log(`📂 Project data loaded for ${projectId}:`, parsedData);\n      return parsedData;\n    } catch (error) {\n      console.error(`❌ Failed to load project data for ${projectId}:`, error);\n      return null;\n    }\n  }\n\n  public getUserProfileData(): any {\n    try {\n      const data = localStorage.getItem(this.userProfileKey);\n      if (!data) {\n        console.log(\"📭 No user profile data found in localStorage\");\n        return null;\n      }\n\n      const parsedData = JSON.parse(data);\n      console.log(\"📂 User profile data loaded from localStorage:\", parsedData);\n      return parsedData;\n    } catch (error) {\n      console.error(\n        \"❌ Failed to load user profile data from localStorage:\",\n        error\n      );\n      return null;\n    }\n  }\n\n  public displayAllData(): void {\n    const allData = this.getAllUICMData();\n\n    console.group(\"🔍 UICM LocalStorage Data\");\n    console.log(\"Total UICM keys found:\", Object.keys(allData).length);\n\n    Object.keys(allData).forEach((key) => {\n      const value = allData[key];\n      console.group(`📁 ${key}`);\n      console.log(\"Type:\", typeof value);\n      console.log(\"Size:\", JSON.stringify(value).length, \"characters\");\n      console.log(\"Data:\", value);\n      console.groupEnd();\n    });\n\n    console.groupEnd();\n  }\n}\n\n// Default instance\nexport const localStorageUtils = new LocalStorageManager();\n","// Main SDK exports\nimport { initCommentSDK } from \"./core/CommentSDK\";\nexport { CommentSDK, initCommentSDK } from \"./core/CommentSDK\";\nimport \"./styles/layers.css\";\nimport \"./styles/image-modal.css\";\nimport \"./styles/comment-modal.css\";\nimport \"./styles/comment-bubble.css\";\nimport \"./styles/comment-form.css\";\nimport \"./styles/profile-settings-modal.css\";\nimport \"./styles/settings-button.css\";\nimport \"./styles/sidebar-button.css\";\nimport \"./styles/comment-sidebar.css\";\n\n// Type exports for consumers\nexport * from \"./types\";\n\n// Component exports\nexport { ProfileSettingsModal } from \"./components/ProfileSettingsModal\";\nexport { SettingsButton } from \"./components/SettingsButton\";\n\n// Storage and utilities\nexport { CommentStorage } from \"./storage/CommentStorage\";\nexport { HybridCommentStorage } from \"./storage/HybridCommentStorage\";\nexport {\n  createHybridStorageConfig,\n  hybridStorageUtils,\n} from \"./utils/hybridStorageUtils\";\nexport {\n  userProfileStorage,\n  LocalUserProfileStorage,\n} from \"./utils/userProfileStorage\";\nexport {\n  localStorageUtils,\n  LocalStorageManager,\n} from \"./utils/localStorageUtils\";\n\n// Version information\nexport const VERSION = \"1.0.0\";\n\n// Default export for UMD build\nexport default { initCommentSDK };\n"],"names":["CommentStatus"],"mappings":"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","x_google_ignoreList":[2]}